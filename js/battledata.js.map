{"version":3,"sources":["battle-dex.ts","battle-dex-data.ts","battle-log.ts","battle-log-misc.js","battle-text-parser.ts"],"names":[],"mappings":"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C,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,CAAC,CAAC,MAAO,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,QAAS,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAO,CAAA,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,QAAS,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAO,CAAA,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,QAAS,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAO,CAAA,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,QAAS,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAClf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAO,CAAA,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,QAAS,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,GAAI,CAAA,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAO,CAAA,CAAC,EAAC,GAAI,CAAA,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,GAAI,CAAA,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAI,CAAA,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAC,MAAO,CAAA,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAI,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;AACrf,CAAC,CAAC,CAAC,CAAC,IAAI,GAAI,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,MAAO,CAAA,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;AACpf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;AAC1f,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC;AAC5f,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC;AAC3f,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EA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","file":"battledata.js","sourcesContent":["/**\r\n * Pokemon Showdown Dex\r\n *\r\n * Roughly equivalent to sim/dex.js in a Pokemon Showdown server, but\r\n * designed for use in browsers rather than in Node.\r\n *\r\n * This is a generic utility library for Pokemon Showdown code: any\r\n * code shared between the replay viewer and the client usually ends up\r\n * here.\r\n *\r\n * Licensing note: PS's client has complicated licensing:\r\n * - The client as a whole is AGPLv3\r\n * - The battle replay/animation engine (battle-*.ts) by itself is MIT\r\n *\r\n * Compiled into battledata.js which includes all dependencies\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license MIT\r\n */\r\n\r\ndeclare var require: any;\r\ndeclare var global: any;\r\n\r\nif (typeof window === 'undefined') {\r\n\t// Node\r\n\t(global as any).window = global;\r\n} else {\r\n\t// browser (possibly NW.js!)\r\n\twindow.exports = window;\r\n}\r\n\r\n// @ts-ignore\r\nwindow.nodewebkit = !!(typeof process !== 'undefined' && process.versions && process.versions['node-webkit']);\r\n\r\nfunction toID(text: any) {\r\n\tif (text?.id) {\r\n\t\ttext = text.id;\r\n\t} else if (text?.userid) {\r\n\t\ttext = text.userid;\r\n\t}\r\n\tif (typeof text !== 'string' && typeof text !== 'number') return '' as ID;\r\n\treturn ('' + text).toLowerCase().replace(/[^a-z0-9]+/g, '') as ID;\r\n}\r\n\r\nfunction toUserid(text: any) {\r\n\treturn toID(text);\r\n}\r\n\r\ntype Comparable = number | string | boolean | Comparable[] | {reverse: Comparable};\r\nconst PSUtils = new class {\r\n\t/**\r\n\t * Like string.split(delimiter), but only recognizes the first `limit`\r\n\t * delimiters (default 1).\r\n\t *\r\n\t * `\"1 2 3 4\".split(\" \", 2) => [\"1\", \"2\"]`\r\n\t *\r\n\t * `splitFirst(\"1 2 3 4\", \" \", 1) => [\"1\", \"2 3 4\"]`\r\n\t *\r\n\t * Returns an array of length exactly limit + 1.\r\n\t */\r\n\tsplitFirst(str: string, delimiter: string, limit: number = 1) {\r\n\t\tlet splitStr: string[] = [];\r\n\t\twhile (splitStr.length < limit) {\r\n\t\t\tlet delimiterIndex = str.indexOf(delimiter);\r\n\t\t\tif (delimiterIndex >= 0) {\r\n\t\t\t\tsplitStr.push(str.slice(0, delimiterIndex));\r\n\t\t\t\tstr = str.slice(delimiterIndex + delimiter.length);\r\n\t\t\t} else {\r\n\t\t\t\tsplitStr.push(str);\r\n\t\t\t\tstr = '';\r\n\t\t\t}\r\n\t\t}\r\n\t\tsplitStr.push(str);\r\n\t\treturn splitStr;\r\n\t}\r\n\r\n\t/**\r\n\t * Compares two variables; intended to be used as a smarter comparator.\r\n\t * The two variables must be the same type (TypeScript will not check this).\r\n\t *\r\n\t * - Numbers are sorted low-to-high, use `-val` to reverse\r\n\t * - Strings are sorted A to Z case-semi-insensitively, use `{reverse: val}` to reverse\r\n\t * - Booleans are sorted true-first (REVERSE of casting to numbers), use `!val` to reverse\r\n\t * - Arrays are sorted lexically in the order of their elements\r\n\t *\r\n\t * In other words: `[num, str]` will be sorted A to Z, `[num, {reverse: str}]` will be sorted Z to A.\r\n\t */\r\n\tcompare(a: Comparable, b: Comparable): number {\r\n\t\tif (typeof a === 'number') {\r\n\t\t\treturn a - (b as number);\r\n\t\t}\r\n\t\tif (typeof a === 'string') {\r\n\t\t\treturn a.localeCompare(b as string);\r\n\t\t}\r\n\t\tif (typeof a === 'boolean') {\r\n\t\t\treturn (a ? 1 : 2) - (b ? 1 : 2);\r\n\t\t}\r\n\t\tif (Array.isArray(a)) {\r\n\t\t\tfor (let i = 0; i < a.length; i++) {\r\n\t\t\t\tconst comparison = PSUtils.compare(a[i], (b as Comparable[])[i]);\r\n\t\t\t\tif (comparison) return comparison;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif (a.reverse) {\r\n\t\t\treturn PSUtils.compare((b as {reverse: string}).reverse, a.reverse);\r\n\t\t}\r\n\t\tthrow new Error(`Passed value ${a} is not comparable`);\r\n\t}\r\n\t/**\r\n\t * Sorts an array according to the callback's output on its elements.\r\n\t *\r\n\t * The callback's output is compared according to `PSUtils.compare` (in\r\n\t * particular, it supports arrays so you can sort by multiple things).\r\n\t */\r\n\tsortBy<T>(array: T[], callback: (a: T) => Comparable): T[];\r\n\t/**\r\n\t * Sorts an array according to `PSUtils.compare`. (Correctly sorts numbers,\r\n\t * unlike `array.sort`)\r\n\t */\r\n\tsortBy<T extends Comparable>(array: T[]): T[];\r\n\tsortBy<T>(array: T[], callback?: (a: T) => Comparable) {\r\n\t\tif (!callback) return (array as any[]).sort(PSUtils.compare);\r\n\t\treturn array.sort((a, b) => PSUtils.compare(callback(a), callback(b)));\r\n\t}\r\n};\r\n\r\n/**\r\n * Sanitize a room ID by removing anything that isn't alphanumeric or `-`.\r\n * Shouldn't actually do anything except against malicious input.\r\n */\r\nfunction toRoomid(roomid: string) {\r\n\treturn roomid.replace(/[^a-zA-Z0-9-]+/g, '').toLowerCase();\r\n}\r\n\r\nfunction toName(name: any) {\r\n\tif (typeof name !== 'string' && typeof name !== 'number') return '';\r\n\tname = ('' + name).replace(/[\\|\\s\\[\\]\\,\\u202e]+/g, ' ').trim();\r\n\tif (name.length > 18) name = name.substr(0, 18).trim();\r\n\r\n\t// remove zalgo\r\n\tname = name.replace(\r\n\t\t/[\\u0300-\\u036f\\u0483-\\u0489\\u0610-\\u0615\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06ED\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E]{3,}/g,\r\n\t\t''\r\n\t);\r\n\tname = name.replace(/[\\u239b-\\u23b9]/g, '');\r\n\r\n\treturn name;\r\n}\r\n\r\ninterface SpriteData {\r\n\tw: number;\r\n\th: number;\r\n\ty?: number;\r\n\tgen?: number;\r\n\turl?: string;\r\n\trawHTML?: string;\r\n\tpixelated?: boolean;\r\n\tisFrontSprite?: boolean;\r\n\tcryurl?: string;\r\n\tshiny?: boolean;\r\n}\r\n\r\ninterface TeambuilderSpriteData {\r\n\tx: number;\r\n\ty: number;\r\n\tspriteDir: string;\r\n\tspriteid: string;\r\n\tshiny?: boolean;\r\n}\r\n\r\nconst Dex = new class implements ModdedDex {\r\n\treadonly gen = 9;\r\n\treadonly modid = 'gen9' as ID;\r\n\treadonly cache = null!;\r\n\r\n\treadonly statNames: ReadonlyArray<StatName> = ['hp', 'atk', 'def', 'spa', 'spd', 'spe'];\r\n\treadonly statNamesExceptHP: ReadonlyArray<StatNameExceptHP> = ['atk', 'def', 'spa', 'spd', 'spe'];\r\n\r\n\tpokeballs: string[] | null = null;\r\n\r\n\tresourcePrefix = (() => {\r\n\t\tlet prefix = '';\r\n\t\tif (window.document?.location?.protocol !== 'http:') prefix = 'https:';\r\n\t\treturn `${prefix}//${window.Config ? Config.routes.client : 'play.pokemonshowdown.com'}/`;\r\n\t})();\r\n\r\n\tfxPrefix = (() => {\r\n\t\tconst protocol = (window.document?.location?.protocol !== 'http:') ? 'https:' : '';\r\n\t\treturn `${protocol}//${window.Config ? Config.routes.client : 'play.pokemonshowdown.com'}/fx/`;\r\n\t})();\r\n\r\n\tloadedSpriteData = {xy: 1, bw: 0};\r\n\tmoddedDexes: {[mod: string]: ModdedDex} = {};\r\n\r\n\tmod(modid: ID): ModdedDex {\r\n\t\tif (modid === 'gen9') return this;\r\n\t\tif (!window.BattleTeambuilderTable) return this;\r\n\t\tif (modid in this.moddedDexes) {\r\n\t\t\treturn this.moddedDexes[modid];\r\n\t\t}\r\n\t\tthis.moddedDexes[modid] = new ModdedDex(modid);\r\n\t\treturn this.moddedDexes[modid];\r\n\t}\r\n\tforGen(gen: number) {\r\n\t\tif (!gen) return this;\r\n\t\treturn this.mod(`gen${gen}` as ID);\r\n\t}\r\n\r\n\tresolveAvatar(avatar: string): string {\r\n\t\tif (window.BattleAvatarNumbers && avatar in BattleAvatarNumbers) {\r\n\t\t\tavatar = BattleAvatarNumbers[avatar];\r\n\t\t}\r\n\t\tif (avatar.charAt(0) === '#') {\r\n\t\t\treturn Dex.resourcePrefix + 'sprites/trainers-custom/' + toID(avatar.substr(1)) + '.png';\r\n\t\t}\r\n\t\tif (avatar.includes('.') && window.Config?.server?.registered) {\r\n\t\t\t// custom avatar served by the server\r\n\t\t\tlet protocol = (Config.server.port === 443) ? 'https' : 'http';\r\n\t\t\treturn protocol + '://' + Config.server.host + ':' + Config.server.port +\r\n\t\t\t\t'/avatars/' + encodeURIComponent(avatar).replace(/\\%3F/g, '?');\r\n\t\t}\r\n\t\treturn Dex.resourcePrefix + 'sprites/trainers/' + Dex.sanitizeName(avatar || 'unknown') + '.png';\r\n\t}\r\n\r\n\t/**\r\n\t * This is used to sanitize strings from data files like `moves.js` and\r\n\t * `teambuilder-tables.js`.\r\n\t *\r\n\t * This makes sure untrusted strings can't wreak havoc if someone forgets to\r\n\t * escape it before putting it in HTML.\r\n\t *\r\n\t * None of these characters belong in these files, anyway. (They can be used\r\n\t * in move descriptions, but those are served from `text.js`, which are\r\n\t * definitely always treated as unsanitized.)\r\n\t */\r\n\tsanitizeName(name: any) {\r\n\t\tif (!name) return '';\r\n\t\treturn ('' + name)\r\n\t\t\t.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;')\r\n\t\t\t.slice(0, 50);\r\n\t}\r\n\r\n\tprefs(prop: string) {\r\n\t\t// @ts-ignore\r\n\t\treturn window.Storage?.prefs?.(prop);\r\n\t}\r\n\r\n\tgetShortName(name: string) {\r\n\t\tlet shortName = name.replace(/[^A-Za-z0-9]+$/, '');\r\n\t\tif (shortName.indexOf('(') >= 0) {\r\n\t\t\tshortName += name.slice(shortName.length).replace(/[^\\(\\)]+/g, '').replace(/\\(\\)/g, '');\r\n\t\t}\r\n\t\treturn shortName;\r\n\t}\r\n\r\n\tgetEffect(name: string | null | undefined): PureEffect | Item | Ability | Move {\r\n\t\tname = (name || '').trim();\r\n\t\tif (name.substr(0, 5) === 'item:') {\r\n\t\t\treturn Dex.items.get(name.substr(5).trim());\r\n\t\t} else if (name.substr(0, 8) === 'ability:') {\r\n\t\t\treturn Dex.abilities.get(name.substr(8).trim());\r\n\t\t} else if (name.substr(0, 5) === 'move:') {\r\n\t\t\treturn Dex.moves.get(name.substr(5).trim());\r\n\t\t}\r\n\t\tlet id = toID(name);\r\n\t\treturn new PureEffect(id, name);\r\n\t}\r\n\r\n\tmoves = {\r\n\t\tget: (nameOrMove: string | Move | null | undefined): Move => {\r\n\t\t\tif (nameOrMove && typeof nameOrMove !== 'string') {\r\n\t\t\t\t// TODO: don't accept Moves here\r\n\t\t\t\treturn nameOrMove;\r\n\t\t\t}\r\n\t\t\tlet name = nameOrMove || '';\r\n\t\t\tlet id = toID(nameOrMove);\r\n\t\t\tif (window.BattleAliases && id in BattleAliases) {\r\n\t\t\t\tname = BattleAliases[id];\r\n\t\t\t\tid = toID(name);\r\n\t\t\t}\r\n\t\t\tif (!window.BattleMovedex) window.BattleMovedex = {};\r\n\t\t\tlet data = window.BattleMovedex[id];\r\n\t\t\tif (data && typeof data.exists === 'boolean') return data;\r\n\r\n\t\t\tif (!data && id.substr(0, 11) === 'hiddenpower' && id.length > 11) {\r\n\t\t\t\tlet [, hpWithType, hpPower] = /([a-z]*)([0-9]*)/.exec(id)!;\r\n\t\t\t\tdata = {\r\n\t\t\t\t\t...(window.BattleMovedex[hpWithType] || {}),\r\n\t\t\t\t\tbasePower: Number(hpPower) || 60,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (!data && id.substr(0, 6) === 'return' && id.length > 6) {\r\n\t\t\t\tdata = {\r\n\t\t\t\t\t...(window.BattleMovedex['return'] || {}),\r\n\t\t\t\t\tbasePower: Number(id.slice(6)),\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (!data && id.substr(0, 11) === 'frustration' && id.length > 11) {\r\n\t\t\t\tdata = {\r\n\t\t\t\t\t...(window.BattleMovedex['frustration'] || {}),\r\n\t\t\t\t\tbasePower: Number(id.slice(11)),\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (!data) data = {exists: false};\r\n\t\t\tlet move = new Move(id, name, data);\r\n\t\t\twindow.BattleMovedex[id] = move;\r\n\t\t\treturn move;\r\n\t\t},\r\n\t};\r\n\r\n\tgetGen3Category(type: string) {\r\n\t\treturn [\r\n\t\t\t'Fire', 'Water', 'Grass', 'Electric', 'Ice', 'Psychic', 'Dark', 'Dragon',\r\n\t\t].includes(type) ? 'Special' : 'Physical';\r\n\t}\r\n\r\n\titems = {\r\n\t\tget: (nameOrItem: string | Item | null | undefined): Item => {\r\n\t\t\tif (nameOrItem && typeof nameOrItem !== 'string') {\r\n\t\t\t\t// TODO: don't accept Items here\r\n\t\t\t\treturn nameOrItem;\r\n\t\t\t}\r\n\t\t\tlet name = nameOrItem || '';\r\n\t\t\tlet id = toID(nameOrItem);\r\n\t\t\tif (window.BattleAliases && id in BattleAliases) {\r\n\t\t\t\tname = BattleAliases[id];\r\n\t\t\t\tid = toID(name);\r\n\t\t\t}\r\n\t\t\tif (!window.BattleItems) window.BattleItems = {};\r\n\t\t\tlet data = window.BattleItems[id];\r\n\t\t\tif (data && typeof data.exists === 'boolean') return data;\r\n\t\t\tif (!data) data = {exists: false};\r\n\t\t\tlet item = new Item(id, name, data);\r\n\t\t\twindow.BattleItems[id] = item;\r\n\t\t\treturn item;\r\n\t\t},\r\n\t};\r\n\r\n\tabilities = {\r\n\t\tget: (nameOrAbility: string | Ability | null | undefined): Ability => {\r\n\t\t\tif (nameOrAbility && typeof nameOrAbility !== 'string') {\r\n\t\t\t\t// TODO: don't accept Abilities here\r\n\t\t\t\treturn nameOrAbility;\r\n\t\t\t}\r\n\t\t\tlet name = nameOrAbility || '';\r\n\t\t\tlet id = toID(nameOrAbility);\r\n\t\t\tif (window.BattleAliases && id in BattleAliases) {\r\n\t\t\t\tname = BattleAliases[id];\r\n\t\t\t\tid = toID(name);\r\n\t\t\t}\r\n\t\t\tif (!window.BattleAbilities) window.BattleAbilities = {};\r\n\t\t\tlet data = window.BattleAbilities[id];\r\n\t\t\tif (data && typeof data.exists === 'boolean') return data;\r\n\t\t\tif (!data) data = {exists: false};\r\n\t\t\tlet ability = new Ability(id, name, data);\r\n\t\t\twindow.BattleAbilities[id] = ability;\r\n\t\t\treturn ability;\r\n\t\t},\r\n\t};\r\n\r\n\tspecies = {\r\n\t\tget: (nameOrSpecies: string | Species | null | undefined): Species => {\r\n\t\t\tif (nameOrSpecies && typeof nameOrSpecies !== 'string') {\r\n\t\t\t\t// TODO: don't accept Species' here\r\n\t\t\t\treturn nameOrSpecies;\r\n\t\t\t}\r\n\t\t\tlet name = nameOrSpecies || '';\r\n\t\t\tlet id = toID(nameOrSpecies);\r\n\t\t\tlet formid = id;\r\n\t\t\tif (!window.BattlePokedexAltForms) window.BattlePokedexAltForms = {};\r\n\t\t\tif (formid in window.BattlePokedexAltForms) return window.BattlePokedexAltForms[formid];\r\n\t\t\tif (window.BattleAliases && id in BattleAliases) {\r\n\t\t\t\tname = BattleAliases[id];\r\n\t\t\t\tid = toID(name);\r\n\t\t\t} else if (window.BattlePokedex && !(id in BattlePokedex) && window.BattleBaseSpeciesChart) {\r\n\t\t\t\tfor (const baseSpeciesId of BattleBaseSpeciesChart) {\r\n\t\t\t\t\tif (formid.startsWith(baseSpeciesId)) {\r\n\t\t\t\t\t\tid = baseSpeciesId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!window.BattlePokedex) window.BattlePokedex = {};\r\n\t\t\tlet data = window.BattlePokedex[id];\r\n\r\n\t\t\tlet species: Species;\r\n\t\t\tif (data && typeof data.exists === 'boolean') {\r\n\t\t\t\tspecies = data;\r\n\t\t\t} else {\r\n\t\t\t\tif (!data) data = {exists: false};\r\n\t\t\t\tif (!data.tier && id.slice(-5) === 'totem') {\r\n\t\t\t\t\tdata.tier = this.species.get(id.slice(0, -5)).tier;\r\n\t\t\t\t}\r\n\t\t\t\tif (!data.tier && data.baseSpecies && toID(data.baseSpecies) !== id) {\r\n\t\t\t\t\tdata.tier = this.species.get(data.baseSpecies).tier;\r\n\t\t\t\t}\r\n\t\t\t\tspecies = new Species(id, name, data);\r\n\t\t\t\twindow.BattlePokedex[id] = species;\r\n\t\t\t}\r\n\r\n\t\t\tif (species.cosmeticFormes) {\r\n\t\t\t\tfor (const forme of species.cosmeticFormes) {\r\n\t\t\t\t\tif (toID(forme) === formid) {\r\n\t\t\t\t\t\tspecies = new Species(formid, name, {\r\n\t\t\t\t\t\t\t...species,\r\n\t\t\t\t\t\t\tname: forme,\r\n\t\t\t\t\t\t\tforme: forme.slice(species.name.length + 1),\r\n\t\t\t\t\t\t\tbaseForme: \"\",\r\n\t\t\t\t\t\t\tbaseSpecies: species.name,\r\n\t\t\t\t\t\t\totherFormes: null,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\twindow.BattlePokedexAltForms[formid] = species;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn species;\r\n\t\t},\r\n\t};\r\n\r\n\ttypes = {\r\n\t\tallCache: null as Type[] | null,\r\n\t\tget: (type: any): Type => {\r\n\t\t\tif (!type || typeof type === 'string') {\r\n\t\t\t\tconst id = toID(type) as string;\r\n\t\t\t\tconst name = id.substr(0, 1).toUpperCase() + id.substr(1);\r\n\t\t\t\ttype = (window.BattleTypeChart && window.BattleTypeChart[id]) || {};\r\n\t\t\t\tif (type.damageTaken) type.exists = true;\r\n\t\t\t\tif (!type.id) type.id = id;\r\n\t\t\t\tif (!type.name) type.name = name;\r\n\t\t\t\tif (!type.effectType) {\r\n\t\t\t\t\ttype.effectType = 'Type';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn type;\r\n\t\t},\r\n\t\tall: (): readonly Type[] => {\r\n\t\t\tif (this.types.allCache) return this.types.allCache;\r\n\t\t\tconst types = [];\r\n\t\t\tfor (const id in (window.BattleTypeChart || {})) {\r\n\t\t\t\ttypes.push(Dex.types.get(id));\r\n\t\t\t}\r\n\t\t\tif (types.length) this.types.allCache = types;\r\n\t\t\treturn types;\r\n\t\t},\r\n\t\tisName: (name: string | null): boolean => {\r\n\t\t\tconst id = toID(name);\r\n\t\t\tif (name !== id.substr(0, 1).toUpperCase() + id.substr(1)) return false;\r\n\t\t\treturn (window.BattleTypeChart || {}).hasOwnProperty(id);\r\n\t\t},\r\n\t};\r\n\r\n\thasAbility(species: Species, ability: string) {\r\n\t\tfor (const i in species.abilities) {\r\n\t\t\t// @ts-ignore\r\n\t\t\tif (ability === species.abilities[i]) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tloadSpriteData(gen: 'xy' | 'bw') {\r\n\t\tif (this.loadedSpriteData[gen]) return;\r\n\t\tthis.loadedSpriteData[gen] = 1;\r\n\r\n\t\tlet path = $('script[src*=\"pokedex-mini.js\"]').attr('src') || '';\r\n\t\tlet qs = '?' + (path.split('?')[1] || '');\r\n\t\tpath = (path.match(/.+?(?=data\\/pokedex-mini\\.js)/) || [])[0] || '';\r\n\r\n\t\tlet el = document.createElement('script');\r\n\t\tel.src = path + 'data/pokedex-mini-bw.js' + qs;\r\n\t\tdocument.getElementsByTagName('body')[0].appendChild(el);\r\n\t}\r\n\tgetSpriteData(pokemon: Pokemon | Species | string, isFront: boolean, options: {\r\n\t\tgen?: number,\r\n\t\tshiny?: boolean,\r\n\t\tgender?: GenderName,\r\n\t\tafd?: boolean,\r\n\t\tnoScale?: boolean,\r\n\t\tmod?: string,\r\n\t\tdynamax?: boolean,\r\n\t} = {gen: 6}) {\r\n\t\tconst mechanicsGen = options.gen || 6;\r\n\t\tlet isDynamax = !!options.dynamax;\r\n\t\tif (pokemon instanceof Pokemon) {\r\n\t\t\tif (pokemon.volatiles.transform) {\r\n\t\t\t\toptions.shiny = pokemon.volatiles.transform[2];\r\n\t\t\t\toptions.gender = pokemon.volatiles.transform[3];\r\n\t\t\t} else {\r\n\t\t\t\toptions.shiny = pokemon.shiny;\r\n\t\t\t\toptions.gender = pokemon.gender;\r\n\t\t\t}\r\n\t\t\tlet isGigantamax = false;\r\n\t\t\tif (pokemon.volatiles.dynamax) {\r\n\t\t\t\tif (pokemon.volatiles.dynamax[1]) {\r\n\t\t\t\t\tisGigantamax = true;\r\n\t\t\t\t} else if (options.dynamax !== false) {\r\n\t\t\t\t\tisDynamax = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tpokemon = pokemon.getSpeciesForme() + (isGigantamax ? '-Gmax' : '');\r\n\t\t}\r\n\t\tconst species = Dex.species.get(pokemon);\r\n\t\t// Gmax sprites are already extremely large, so we don't need to double.\r\n\t\tif (species.name.endsWith('-Gmax')) isDynamax = false;\r\n\t\tlet spriteData = {\r\n\t\t\tgen: mechanicsGen,\r\n\t\t\tw: 96,\r\n\t\t\th: 96,\r\n\t\t\ty: 0,\r\n\t\t\turl: Dex.resourcePrefix + 'sprites/',\r\n\t\t\tpixelated: true,\r\n\t\t\tisFrontSprite: false,\r\n\t\t\tcryurl: '',\r\n\t\t\tshiny: options.shiny,\r\n\t\t};\r\n\t\tlet name = species.spriteid;\r\n\t\tlet dir;\r\n\t\tlet facing;\r\n\t\tif (isFront) {\r\n\t\t\tspriteData.isFrontSprite = true;\r\n\t\t\tdir = '';\r\n\t\t\tfacing = 'front';\r\n\t\t} else {\r\n\t\t\tdir = '-back';\r\n\t\t\tfacing = 'back';\r\n\t\t}\r\n\r\n\t\t// Decide which gen sprites to use.\r\n\t\t//\r\n\t\t// There are several different generations we care about here:\r\n\t\t//\r\n\t\t//   - mechanicsGen: the generation number of the mechanics and battle (options.gen)\r\n\t\t//   - graphicsGen: the generation number of sprite/field graphics the user has requested.\r\n\t\t//     This will default to mechanicsGen, but may be altered depending on user preferences.\r\n\t\t//   - spriteData.gen: the generation number of a the specific Pokemon sprite in question.\r\n\t\t//     This defaults to graphicsGen, but if the graphicsGen doesn't have a sprite for the Pokemon\r\n\t\t//     (eg. Darmanitan in graphicsGen 2) then we go up gens until it exists.\r\n\t\t//\r\n\t\tlet graphicsGen = mechanicsGen;\r\n\t\tif (Dex.prefs('nopastgens')) graphicsGen = 6;\r\n\t\tif (Dex.prefs('bwgfx') && graphicsGen >= 6) graphicsGen = 5;\r\n\t\tspriteData.gen = Math.max(graphicsGen, Math.min(species.gen, 5));\r\n\t\tconst baseDir = ['', 'gen1', 'gen2', 'gen3', 'gen4', 'gen5', '', '', '', ''][spriteData.gen];\r\n\r\n\t\tlet animationData = null;\r\n\t\tlet miscData = null;\r\n\t\tlet speciesid = species.id;\r\n\t\tif (species.isTotem) speciesid = toID(name);\r\n\t\tif (baseDir === '' && window.BattlePokemonSprites) {\r\n\t\t\tanimationData = BattlePokemonSprites[speciesid];\r\n\t\t}\r\n\t\tif (baseDir === 'gen5' && window.BattlePokemonSpritesBW) {\r\n\t\t\tanimationData = BattlePokemonSpritesBW[speciesid];\r\n\t\t}\r\n\t\tif (window.BattlePokemonSprites) miscData = BattlePokemonSprites[speciesid];\r\n\t\tif (!miscData && window.BattlePokemonSpritesBW) miscData = BattlePokemonSpritesBW[speciesid];\r\n\t\tif (!animationData) animationData = {};\r\n\t\tif (!miscData) miscData = {};\r\n\r\n\t\tif (miscData.num !== 0 && miscData.num > -5000) {\r\n\t\t\tlet baseSpeciesid = toID(species.baseSpecies);\r\n\t\t\tspriteData.cryurl = 'audio/cries/' + baseSpeciesid;\r\n\t\t\tlet formeid = species.formeid;\r\n\t\t\tif (species.isMega || formeid && (\r\n\t\t\t\tformeid === '-crowned' ||\r\n\t\t\t\tformeid === '-eternal' ||\r\n\t\t\t\tformeid === '-eternamax' ||\r\n\t\t\t\tformeid === '-four' ||\r\n\t\t\t\tformeid === '-hangry' ||\r\n\t\t\t\tformeid === '-hero' ||\r\n\t\t\t\tformeid === '-lowkey' ||\r\n\t\t\t\tformeid === '-noice' ||\r\n\t\t\t\tformeid === '-primal' ||\r\n\t\t\t\tformeid === '-rapidstrike' ||\r\n\t\t\t\tformeid === '-roaming' ||\r\n\t\t\t\tformeid === '-school' ||\r\n\t\t\t\tformeid === '-sky' ||\r\n\t\t\t\tformeid === '-starter' ||\r\n\t\t\t\tformeid === '-super' ||\r\n\t\t\t\tformeid === '-therian' ||\r\n\t\t\t\tformeid === '-unbound' ||\r\n\t\t\t\tbaseSpeciesid === 'calyrex' ||\r\n\t\t\t\tbaseSpeciesid === 'kyurem' ||\r\n\t\t\t\tbaseSpeciesid === 'cramorant' ||\r\n\t\t\t\tbaseSpeciesid === 'indeedee' ||\r\n\t\t\t\tbaseSpeciesid === 'lycanroc' ||\r\n\t\t\t\tbaseSpeciesid === 'necrozma' ||\r\n\t\t\t\tbaseSpeciesid === 'oinkologne' ||\r\n\t\t\t\tbaseSpeciesid === 'oricorio' ||\r\n\t\t\t\tbaseSpeciesid === 'slowpoke' ||\r\n\t\t\t\tbaseSpeciesid === 'tatsugiri' ||\r\n\t\t\t\tbaseSpeciesid === 'zygarde'\r\n\t\t\t)) {\r\n\t\t\t\tspriteData.cryurl += formeid;\r\n\t\t\t}\r\n\t\t\tspriteData.cryurl += '.mp3';\r\n\t\t}\r\n\r\n\t\tif (options.shiny && mechanicsGen > 1) dir += '-shiny';\r\n\r\n\t\t// April Fool's 2014\r\n\t\tif (window.Config && Config.server && Config.server.afd || options.afd) {\r\n\t\t\tdir = 'afd' + dir;\r\n\t\t\tspriteData.url += dir + '/' + name + '.png';\r\n\t\t\t// Duplicate code but needed to make AFD tinymax work\r\n\t\t\t// April Fool's 2020\r\n\t\t\tif (isDynamax && !options.noScale) {\r\n\t\t\t\tspriteData.w *= 0.25;\r\n\t\t\t\tspriteData.h *= 0.25;\r\n\t\t\t\tspriteData.y += -22;\r\n\t\t\t} else if (species.isTotem && !options.noScale) {\r\n\t\t\t\tspriteData.w *= 0.5;\r\n\t\t\t\tspriteData.h *= 0.5;\r\n\t\t\t\tspriteData.y += -11;\r\n\t\t\t}\r\n\t\t\treturn spriteData;\r\n\t\t}\r\n\r\n\t\t// Mod Cries\r\n\t\tif (options.mod) {\r\n\t\t\tspriteData.cryurl = `sprites/${options.mod}/audio/${toID(species.baseSpecies)}`;\r\n\t\t\tspriteData.cryurl += '.mp3';\r\n\t\t}\r\n\r\n\t\tif (animationData[facing + 'f'] && options.gender === 'F') facing += 'f';\r\n\t\tlet allowAnim = !Dex.prefs('noanim') && !Dex.prefs('nogif');\r\n\t\tif (allowAnim && spriteData.gen >= 6) spriteData.pixelated = false;\r\n\t\tif (allowAnim && animationData[facing] && spriteData.gen >= 5) {\r\n\t\t\tif (facing.slice(-1) === 'f') name += '-f';\r\n\t\t\tdir = baseDir + 'ani' + dir;\r\n\r\n\t\t\tspriteData.w = animationData[facing].w;\r\n\t\t\tspriteData.h = animationData[facing].h;\r\n\t\t\tspriteData.url += dir + '/' + name + '.gif';\r\n\t\t} else {\r\n\t\t\t// There is no entry or enough data in pokedex-mini.js\r\n\t\t\t// Handle these in case-by-case basis; either using BW sprites or matching the played gen.\r\n\t\t\tdir = (baseDir || 'gen5') + dir;\r\n\r\n\t\t\t// Gender differences don't exist prior to Gen 4,\r\n\t\t\t// so there are no sprites for it\r\n\t\t\tif (spriteData.gen >= 4 && miscData['frontf'] && options.gender === 'F') {\r\n\t\t\t\tname += '-f';\r\n\t\t\t}\r\n\r\n\t\t\tspriteData.url += dir + '/' + name + '.png';\r\n\t\t}\r\n\r\n\t\tif (!options.noScale) {\r\n\t\t\tif (graphicsGen > 4) {\r\n\t\t\t\t// no scaling\r\n\t\t\t} else if (spriteData.isFrontSprite) {\r\n\t\t\t\tspriteData.w *= 2;\r\n\t\t\t\tspriteData.h *= 2;\r\n\t\t\t\tspriteData.y += -16;\r\n\t\t\t} else {\r\n\t\t\t\t// old gen backsprites are multiplied by 1.5x by the 3D engine\r\n\t\t\t\tspriteData.w *= 2 / 1.5;\r\n\t\t\t\tspriteData.h *= 2 / 1.5;\r\n\t\t\t\tspriteData.y += -11;\r\n\t\t\t}\r\n\t\t\tif (spriteData.gen <= 2) spriteData.y += 2;\r\n\t\t}\r\n\t\tif (isDynamax && !options.noScale) {\r\n\t\t\tspriteData.w *= 2;\r\n\t\t\tspriteData.h *= 2;\r\n\t\t\tspriteData.y += -22;\r\n\t\t} else if (species.isTotem && !options.noScale) {\r\n\t\t\tspriteData.w *= 1.5;\r\n\t\t\tspriteData.h *= 1.5;\r\n\t\t\tspriteData.y += -11;\r\n\t\t}\r\n\r\n\t\treturn spriteData;\r\n\t}\r\n\r\n\tgetPokemonIconNum(id: ID, isFemale?: boolean, facingLeft?: boolean) {\r\n\t\tlet num = 0;\r\n\t\tif (window.BattlePokemonSprites?.[id]?.num) {\r\n\t\t\tnum = BattlePokemonSprites[id].num;\r\n\t\t} else if (window.BattlePokedex?.[id]?.num) {\r\n\t\t\tnum = BattlePokedex[id].num;\r\n\t\t}\r\n\t\tif (num < 0) num = 0;\r\n\t\tif (num > 1017) num = 0;\r\n\r\n\t\tif (window.BattlePokemonIconIndexes?.[id]) {\r\n\t\t\tnum = BattlePokemonIconIndexes[id];\r\n\t\t}\r\n\r\n\t\tif (isFemale) {\r\n\t\t\tif (['unfezant', 'frillish', 'jellicent', 'meowstic', 'pyroar'].includes(id)) {\r\n\t\t\t\tnum = BattlePokemonIconIndexes[id + 'f'];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (facingLeft) {\r\n\t\t\tif (BattlePokemonIconIndexesLeft[id]) {\r\n\t\t\t\tnum = BattlePokemonIconIndexesLeft[id];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn num;\r\n\t}\r\n\r\n\tgetPokemonIcon(pokemon: string | Pokemon | ServerPokemon | PokemonSet | null, facingLeft?: boolean) {\r\n\t\tif (pokemon === 'pokeball') {\r\n\t\t\treturn `background:transparent url(${Dex.resourcePrefix}sprites/pokemonicons-pokeball-sheet.png) no-repeat scroll -0px 4px`;\r\n\t\t} else if (pokemon === 'pokeball-statused') {\r\n\t\t\treturn `background:transparent url(${Dex.resourcePrefix}sprites/pokemonicons-pokeball-sheet.png) no-repeat scroll -40px 4px`;\r\n\t\t} else if (pokemon === 'pokeball-fainted') {\r\n\t\t\treturn `background:transparent url(${Dex.resourcePrefix}sprites/pokemonicons-pokeball-sheet.png) no-repeat scroll -80px 4px;opacity:.4;filter:contrast(0)`;\r\n\t\t} else if (pokemon === 'pokeball-none') {\r\n\t\t\treturn `background:transparent url(${Dex.resourcePrefix}sprites/pokemonicons-pokeball-sheet.png) no-repeat scroll -80px 4px`;\r\n\t\t}\r\n\r\n\t\tlet id = toID(pokemon);\r\n\t\tif (!pokemon || typeof pokemon === 'string') pokemon = null;\r\n\t\t// @ts-ignore\r\n\t\tif (pokemon?.speciesForme) id = toID(pokemon.speciesForme);\r\n\t\t// @ts-ignore\r\n\t\tif (pokemon?.species) id = toID(pokemon.species);\r\n\t\t// @ts-ignore\r\n\t\tif (pokemon?.volatiles?.formechange && !pokemon.volatiles.transform) {\r\n\t\t\t// @ts-ignore\r\n\t\t\tid = toID(pokemon.volatiles.formechange[1]);\r\n\t\t}\r\n\t\tlet num = this.getPokemonIconNum(id, pokemon?.gender === 'F', facingLeft);\r\n\r\n\t\tlet top = Math.floor(num / 12) * 30;\r\n\t\tlet left = (num % 12) * 40;\r\n\t\tlet fainted = ((pokemon as Pokemon | ServerPokemon)?.fainted ? `;opacity:.3;filter:grayscale(100%) brightness(.5)` : ``);\r\n\t\treturn `background:transparent url(${Dex.resourcePrefix}sprites/pokemonicons-sheet.png?v14) no-repeat scroll -${left}px -${top}px${fainted}`;\r\n\t}\r\n\r\n\tgetTeambuilderSpriteData(pokemon: any, gen: number = 0): TeambuilderSpriteData {\r\n\t\tlet id = toID(pokemon.species);\r\n\t\tlet spriteid = pokemon.spriteid;\r\n\t\tlet species = Dex.species.get(pokemon.species);\r\n\t\tif (pokemon.species && !spriteid) {\r\n\t\t\tspriteid = species.spriteid || toID(pokemon.species);\r\n\t\t}\r\n\t\tif (species.exists === false) return { spriteDir: 'sprites/gen5', spriteid: '0', x: 10, y: 5 };\r\n\t\tconst spriteData: TeambuilderSpriteData = {\r\n\t\t\tspriteid,\r\n\t\t\tspriteDir: 'sprites/dex',\r\n\t\t\tx: -2,\r\n\t\t\ty: -3,\r\n\t\t};\r\n\t\tif (pokemon.shiny) spriteData.shiny = true;\r\n\t\tif (Dex.prefs('nopastgens')) gen = 6;\r\n\t\tif (Dex.prefs('bwgfx') && gen > 5) gen = 5;\r\n\t\tlet xydexExists = (!species.isNonstandard || species.isNonstandard === 'Past' || species.isNonstandard === 'CAP') || [\r\n\t\t\t\"pikachustarter\", \"eeveestarter\", \"meltan\", \"melmetal\", \"pokestarufo\", \"pokestarufo2\", \"pokestarbrycenman\", \"pokestarmt\", \"pokestarmt2\", \"pokestargiant\", \"pokestarhumanoid\", \"pokestarmonster\", \"pokestarf00\", \"pokestarf002\", \"pokestarspirit\",\r\n\t\t].includes(species.id);\r\n\t\tif (species.gen === 8 && species.isNonstandard !== 'CAP') xydexExists = false;\r\n\t\tif ((!gen || gen >= 6) && xydexExists) {\r\n\t\t\tif (species.gen >= 7) {\r\n\t\t\t\tspriteData.x = -6;\r\n\t\t\t\tspriteData.y = -7;\r\n\t\t\t} else if (id.substr(0, 6) === 'arceus') {\r\n\t\t\t\tspriteData.x = -2;\r\n\t\t\t\tspriteData.y = 7;\r\n\t\t\t} else if (id === 'garchomp') {\r\n\t\t\t\tspriteData.x = -2;\r\n\t\t\t\tspriteData.y = 2;\r\n\t\t\t} else if (id === 'garchompmega') {\r\n\t\t\t\tspriteData.x = -2;\r\n\t\t\t\tspriteData.y = 0;\r\n\t\t\t}\r\n\t\t\treturn spriteData;\r\n\t\t}\r\n\t\tspriteData.spriteDir = 'sprites/gen5';\r\n\t\tif (gen <= 1 && species.gen <= 1) spriteData.spriteDir = 'sprites/gen1';\r\n\t\telse if (gen <= 2 && species.gen <= 2) spriteData.spriteDir = 'sprites/gen2';\r\n\t\telse if (gen <= 3 && species.gen <= 3) spriteData.spriteDir = 'sprites/gen3';\r\n\t\telse if (gen <= 4 && species.gen <= 4) spriteData.spriteDir = 'sprites/gen4';\r\n\t\tspriteData.x = 10;\r\n\t\tspriteData.y = 5;\r\n\t\treturn spriteData;\r\n\t}\r\n\r\n\tgetTeambuilderSprite(pokemon: any, gen: number = 0) {\r\n\t\tif (!pokemon) return '';\r\n\t\tconst data = this.getTeambuilderSpriteData(pokemon, gen);\r\n\t\tconst shiny = (data.shiny ? '-shiny' : '');\r\n\t\treturn 'background-image:url(' + Dex.resourcePrefix + data.spriteDir + shiny + '/' + data.spriteid + '.png);background-position:' + data.x + 'px ' + data.y + 'px;background-repeat:no-repeat';\r\n\t}\r\n\r\n\tgetItemIcon(item: any) {\r\n\t\tlet num = 0;\r\n\t\tif (typeof item === 'string' && exports.BattleItems) item = exports.BattleItems[toID(item)];\r\n\t\tif (item?.spritenum) num = item.spritenum;\r\n\r\n\t\tlet top = Math.floor(num / 16) * 24;\r\n\t\tlet left = (num % 16) * 24;\r\n\t\treturn 'background:transparent url(' + Dex.resourcePrefix + 'sprites/itemicons-sheet.png?v1) no-repeat scroll -' + left + 'px -' + top + 'px';\r\n\t}\r\n\r\n\tgetTypeIcon(type: string | null, b?: boolean) { // b is just for utilichart.js\r\n\t\ttype = this.types.get(type).name;\r\n\t\tif (!type) type = '???';\r\n\t\tlet sanitizedType = type.replace(/\\?/g, '%3f');\r\n\t\treturn `<img src=\"${Dex.resourcePrefix}sprites/types/${sanitizedType}.png\" alt=\"${type}\" height=\"14\" width=\"32\" class=\"pixelated${b ? ' b' : ''}\" />`;\r\n\t}\r\n\r\n\tgetCategoryIcon(category: string | null) {\r\n\t\tconst categoryID = toID(category);\r\n\t\tlet sanitizedCategory = '';\r\n\t\tswitch (categoryID) {\r\n\t\tcase 'physical':\r\n\t\tcase 'special':\r\n\t\tcase 'status':\r\n\t\t\tsanitizedCategory = categoryID.charAt(0).toUpperCase() + categoryID.slice(1);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tsanitizedCategory = 'undefined';\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn `<img src=\"${Dex.resourcePrefix}sprites/categories/${sanitizedCategory}.png\" alt=\"${sanitizedCategory}\" height=\"14\" width=\"32\" class=\"pixelated\" />`;\r\n\t}\r\n\r\n\tgetPokeballs() {\r\n\t\tif (this.pokeballs) return this.pokeballs;\r\n\t\tthis.pokeballs = [];\r\n\t\tif (!window.BattleItems) window.BattleItems = {};\r\n\t\tfor (const data of Object.values(window.BattleItems) as AnyObject[]) {\r\n\t\t\tif (!data.isPokeball) continue;\r\n\t\t\tthis.pokeballs.push(data.name);\r\n\t\t}\r\n\t\treturn this.pokeballs;\r\n\t}\r\n};\r\n\r\nclass ModdedDex {\r\n\treadonly gen: number;\r\n\treadonly modid: ID;\r\n\treadonly cache = {\r\n\t\tMoves: {} as any as {[k: string]: Move},\r\n\t\tItems: {} as any as {[k: string]: Item},\r\n\t\tAbilities: {} as any as {[k: string]: Ability},\r\n\t\tSpecies: {} as any as {[k: string]: Species},\r\n\t\tTypes: {} as any as {[k: string]: Effect},\r\n\t};\r\n\tpokeballs: string[] | null = null;\r\n\tconstructor(modid: ID) {\r\n\t\tthis.modid = modid;\r\n\t\tconst gen = parseInt(modid.substr(3, 1), 10);\r\n\t\tif (!modid.startsWith('gen') || !gen) throw new Error(\"Unsupported modid\");\r\n\t\tthis.gen = gen;\r\n\t}\r\n\tmoves = {\r\n\t\tget: (name: string): Move => {\r\n\t\t\tlet id = toID(name);\r\n\t\t\tif (window.BattleAliases && id in BattleAliases) {\r\n\t\t\t\tname = BattleAliases[id];\r\n\t\t\t\tid = toID(name);\r\n\t\t\t}\r\n\t\t\tif (this.cache.Moves.hasOwnProperty(id)) return this.cache.Moves[id];\r\n\r\n\t\t\tlet data = {...Dex.moves.get(name)};\r\n\r\n\t\t\tfor (let i = Dex.gen - 1; i >= this.gen; i--) {\r\n\t\t\t\tconst table = window.BattleTeambuilderTable[`gen${i}`];\r\n\t\t\t\tif (id in table.overrideMoveData) {\r\n\t\t\t\t\tObject.assign(data, table.overrideMoveData[id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.modid !== `gen${this.gen}`) {\r\n\t\t\t\tconst table = window.BattleTeambuilderTable[this.modid];\r\n\t\t\t\tif (id in table.overrideMoveData) {\r\n\t\t\t\t\tObject.assign(data, table.overrideMoveData[id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.gen <= 3 && data.category !== 'Status') {\r\n\t\t\t\tdata.category = Dex.getGen3Category(data.type);\r\n\t\t\t}\r\n\r\n\t\t\tconst move = new Move(id, name, data);\r\n\t\t\tthis.cache.Moves[id] = move;\r\n\t\t\treturn move;\r\n\t\t},\r\n\t};\r\n\r\n\titems = {\r\n\t\tget: (name: string): Item => {\r\n\t\t\tlet id = toID(name);\r\n\t\t\tif (window.BattleAliases && id in BattleAliases) {\r\n\t\t\t\tname = BattleAliases[id];\r\n\t\t\t\tid = toID(name);\r\n\t\t\t}\r\n\t\t\tif (this.cache.Items.hasOwnProperty(id)) return this.cache.Items[id];\r\n\r\n\t\t\tlet data = {...Dex.items.get(name)};\r\n\r\n\t\t\tfor (let i = this.gen; i < 9; i++) {\r\n\t\t\t\tconst table = window.BattleTeambuilderTable['gen' + i];\r\n\t\t\t\tif (id in table.overrideItemDesc) {\r\n\t\t\t\t\tdata.shortDesc = table.overrideItemDesc[id];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst item = new Item(id, name, data);\r\n\t\t\tthis.cache.Items[id] = item;\r\n\t\t\treturn item;\r\n\t\t},\r\n\t};\r\n\r\n\tabilities = {\r\n\t\tget: (name: string): Ability => {\r\n\t\t\tlet id = toID(name);\r\n\t\t\tif (window.BattleAliases && id in BattleAliases) {\r\n\t\t\t\tname = BattleAliases[id];\r\n\t\t\t\tid = toID(name);\r\n\t\t\t}\r\n\t\t\tif (this.cache.Abilities.hasOwnProperty(id)) return this.cache.Abilities[id];\r\n\r\n\t\t\tlet data = {...Dex.abilities.get(name)};\r\n\r\n\t\t\tfor (let i = Dex.gen - 1; i >= this.gen; i--) {\r\n\t\t\t\tconst table = window.BattleTeambuilderTable[`gen${i}`];\r\n\t\t\t\tif (id in table.overrideAbilityData) {\r\n\t\t\t\t\tObject.assign(data, table.overrideAbilityData[id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.modid !== `gen${this.gen}`) {\r\n\t\t\t\tconst table = window.BattleTeambuilderTable[this.modid];\r\n\t\t\t\tif (id in table.overrideAbilityData) {\r\n\t\t\t\t\tObject.assign(data, table.overrideAbilityData[id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst ability = new Ability(id, name, data);\r\n\t\t\tthis.cache.Abilities[id] = ability;\r\n\t\t\treturn ability;\r\n\t\t},\r\n\t};\r\n\r\n\tspecies = {\r\n\t\tget: (name: string): Species => {\r\n\t\t\tlet id = toID(name);\r\n\t\t\tif (window.BattleAliases && id in BattleAliases) {\r\n\t\t\t\tname = BattleAliases[id];\r\n\t\t\t\tid = toID(name);\r\n\t\t\t}\r\n\t\t\tif (this.cache.Species.hasOwnProperty(id)) return this.cache.Species[id];\r\n\r\n\t\t\tlet data = {...Dex.species.get(name)};\r\n\r\n\t\t\tfor (let i = Dex.gen - 1; i >= this.gen; i--) {\r\n\t\t\t\tconst table = window.BattleTeambuilderTable[`gen${i}`];\r\n\t\t\t\tif (id in table.overrideSpeciesData) {\r\n\t\t\t\t\tObject.assign(data, table.overrideSpeciesData[id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.modid !== `gen${this.gen}`) {\r\n\t\t\t\tconst table = window.BattleTeambuilderTable[this.modid];\r\n\t\t\t\tif (id in table.overrideSpeciesData) {\r\n\t\t\t\t\tObject.assign(data, table.overrideSpeciesData[id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.gen < 3 || this.modid === 'gen7letsgo') {\r\n\t\t\t\tdata.abilities = {0: \"No Ability\"};\r\n\t\t\t}\r\n\r\n\t\t\tconst table = window.BattleTeambuilderTable[this.modid];\r\n\t\t\tif (id in table.overrideTier) data.tier = table.overrideTier[id];\r\n\t\t\tif (!data.tier && id.slice(-5) === 'totem') {\r\n\t\t\t\tdata.tier = this.species.get(id.slice(0, -5)).tier;\r\n\t\t\t}\r\n\t\t\tif (!data.tier && data.baseSpecies && toID(data.baseSpecies) !== id) {\r\n\t\t\t\tdata.tier = this.species.get(data.baseSpecies).tier;\r\n\t\t\t}\r\n\t\t\tif (data.gen > this.gen) data.tier = 'Illegal';\r\n\r\n\t\t\tconst species = new Species(id, name, data);\r\n\t\t\tthis.cache.Species[id] = species;\r\n\t\t\treturn species;\r\n\t\t},\r\n\t};\r\n\r\n\ttypes = {\r\n\t\tget: (name: string): Effect => {\r\n\t\t\tconst id = toID(name) as ID;\r\n\t\t\tname = id.substr(0, 1).toUpperCase() + id.substr(1);\r\n\r\n\t\t\tif (this.cache.Types.hasOwnProperty(id)) return this.cache.Types[id];\r\n\r\n\t\t\tlet data = {...Dex.types.get(name)};\r\n\r\n\t\t\tfor (let i = 7; i >= this.gen; i--) {\r\n\t\t\t\tconst table = window.BattleTeambuilderTable['gen' + i];\r\n\t\t\t\tif (id in table.removeType) {\r\n\t\t\t\t\tdata.exists = false;\r\n\t\t\t\t\t// don't bother correcting its attributes given it doesn't exist\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (id in table.overrideTypeChart) {\r\n\t\t\t\t\tdata = {...data, ...table.overrideTypeChart[id]};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.cache.Types[id] = data;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t};\r\n\r\n\tgetPokeballs() {\r\n\t\tif (this.pokeballs) return this.pokeballs;\r\n\t\tthis.pokeballs = [];\r\n\t\tif (!window.BattleItems) window.BattleItems = {};\r\n\t\tfor (const data of Object.values(window.BattleItems) as AnyObject[]) {\r\n\t\t\tif (data.gen && data.gen > this.gen) continue;\r\n\t\t\tif (!data.isPokeball) continue;\r\n\t\t\tthis.pokeballs.push(data.name);\r\n\t\t}\r\n\t\treturn this.pokeballs;\r\n\t}\r\n}\r\n\r\nif (typeof require === 'function') {\r\n\t// in Node\r\n\t(global as any).Dex = Dex;\r\n\t(global as any).toID = toID;\r\n}\r\n","/**\r\n * Pokemon Showdown Dex Data\r\n *\r\n * A collection of data and definitions for src/battle-dex.ts.\r\n *\r\n * Larger data has their own files in data/, so this is just for small\r\n * miscellaneous data that doesn't need its own file.\r\n *\r\n * Licensing note: PS's client has complicated licensing:\r\n * - The client as a whole is AGPLv3\r\n * - The battle replay/animation engine (battle-*.ts) by itself is MIT\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license MIT\r\n */\r\n\r\n/**\r\n * String that contains only lowercase alphanumeric characters.\r\n */\r\ntype ID = string & {__isID: true};\r\n\r\nconst BattleNatures: {[k in NatureName]: {plus?: StatName, minus?: StatName}} = {\r\n\tAdamant: {\r\n\t\tplus: 'atk',\r\n\t\tminus: 'spa',\r\n\t},\r\n\tBashful: {},\r\n\tBold: {\r\n\t\tplus: 'def',\r\n\t\tminus: 'atk',\r\n\t},\r\n\tBrave: {\r\n\t\tplus: 'atk',\r\n\t\tminus: 'spe',\r\n\t},\r\n\tCalm: {\r\n\t\tplus: 'spd',\r\n\t\tminus: 'atk',\r\n\t},\r\n\tCareful: {\r\n\t\tplus: 'spd',\r\n\t\tminus: 'spa',\r\n\t},\r\n\tDocile: {},\r\n\tGentle: {\r\n\t\tplus: 'spd',\r\n\t\tminus: 'def',\r\n\t},\r\n\tHardy: {},\r\n\tHasty: {\r\n\t\tplus: 'spe',\r\n\t\tminus: 'def',\r\n\t},\r\n\tImpish: {\r\n\t\tplus: 'def',\r\n\t\tminus: 'spa',\r\n\t},\r\n\tJolly: {\r\n\t\tplus: 'spe',\r\n\t\tminus: 'spa',\r\n\t},\r\n\tLax: {\r\n\t\tplus: 'def',\r\n\t\tminus: 'spd',\r\n\t},\r\n\tLonely: {\r\n\t\tplus: 'atk',\r\n\t\tminus: 'def',\r\n\t},\r\n\tMild: {\r\n\t\tplus: 'spa',\r\n\t\tminus: 'def',\r\n\t},\r\n\tModest: {\r\n\t\tplus: 'spa',\r\n\t\tminus: 'atk',\r\n\t},\r\n\tNaive: {\r\n\t\tplus: 'spe',\r\n\t\tminus: 'spd',\r\n\t},\r\n\tNaughty: {\r\n\t\tplus: 'atk',\r\n\t\tminus: 'spd',\r\n\t},\r\n\tQuiet: {\r\n\t\tplus: 'spa',\r\n\t\tminus: 'spe',\r\n\t},\r\n\tQuirky: {},\r\n\tRash: {\r\n\t\tplus: 'spa',\r\n\t\tminus: 'spd',\r\n\t},\r\n\tRelaxed: {\r\n\t\tplus: 'def',\r\n\t\tminus: 'spe',\r\n\t},\r\n\tSassy: {\r\n\t\tplus: 'spd',\r\n\t\tminus: 'spe',\r\n\t},\r\n\tSerious: {},\r\n\tTimid: {\r\n\t\tplus: 'spe',\r\n\t\tminus: 'atk',\r\n\t},\r\n};\r\nconst BattleStatIDs: {[k: string]: StatName | undefined} = {\r\n\tHP: 'hp',\r\n\thp: 'hp',\r\n\tAtk: 'atk',\r\n\tatk: 'atk',\r\n\tDef: 'def',\r\n\tdef: 'def',\r\n\tSpA: 'spa',\r\n\tSAtk: 'spa',\r\n\tSpAtk: 'spa',\r\n\tspa: 'spa',\r\n\tspc: 'spa',\r\n\tSpc: 'spa',\r\n\tSpD: 'spd',\r\n\tSDef: 'spd',\r\n\tSpDef: 'spd',\r\n\tspd: 'spd',\r\n\tSpe: 'spe',\r\n\tSpd: 'spe',\r\n\tspe: 'spe',\r\n};\r\n/** Stat short names */\r\nconst BattleStatNames = {\r\n\thp: 'HP',\r\n\tatk: 'Atk',\r\n\tdef: 'Def',\r\n\tspa: 'SpA',\r\n\tspd: 'SpD',\r\n\tspe: 'Spe',\r\n} as const;\r\n\r\nconst BattleBaseSpeciesChart = [\r\n\t\"unown\", \"burmy\", \"shellos\", \"gastrodon\", \"deerling\", \"sawsbuck\", \"vivillon\", \"flabebe\", \"floette\", \"florges\", \"furfrou\", \"minior\", \"alcremie\", \"tatsugiri\", \"pokestarufo\", \"pokestarbrycenman\", \"pokestarmt\", \"pokestarmt2\", \"pokestartransport\", \"pokestargiant\", \"pokestarhumanoid\", \"pokestarmonster\", \"pokestarf00\", \"pokestarf002\", \"pokestarspirit\", \"pokestarblackdoor\", \"pokestarwhitedoor\", \"pokestarblackbelt\",\r\n] as ID[];\r\n\r\nconst BattlePokemonIconIndexes: {[id: string]: number} = {\r\n\t// alt forms\r\n\tegg: 1020 + 1,\r\n\tpikachubelle: 1020 + 2,\r\n\tpikachulibre: 1020 + 3,\r\n\tpikachuphd: 1020 + 4,\r\n\tpikachupopstar: 1020 + 5,\r\n\tpikachurockstar: 1020 + 6,\r\n\tpikachucosplay: 1020 + 7,\r\n\tunownexclamation: 1020 + 8,\r\n\tunownquestion: 1020 + 9,\r\n\tunownb: 1020 + 10,\r\n\tunownc: 1020 + 11,\r\n\tunownd: 1020 + 12,\r\n\tunowne: 1020 + 13,\r\n\tunownf: 1020 + 14,\r\n\tunowng: 1020 + 15,\r\n\tunownh: 1020 + 16,\r\n\tunowni: 1020 + 17,\r\n\tunownj: 1020 + 18,\r\n\tunownk: 1020 + 19,\r\n\tunownl: 1020 + 20,\r\n\tunownm: 1020 + 21,\r\n\tunownn: 1020 + 22,\r\n\tunowno: 1020 + 23,\r\n\tunownp: 1020 + 24,\r\n\tunownq: 1020 + 25,\r\n\tunownr: 1020 + 26,\r\n\tunowns: 1020 + 27,\r\n\tunownt: 1020 + 28,\r\n\tunownu: 1020 + 29,\r\n\tunownv: 1020 + 30,\r\n\tunownw: 1020 + 31,\r\n\tunownx: 1020 + 32,\r\n\tunowny: 1020 + 33,\r\n\tunownz: 1020 + 34,\r\n\tcastformrainy: 1020 + 35,\r\n\tcastformsnowy: 1020 + 36,\r\n\tcastformsunny: 1020 + 37,\r\n\tdeoxysattack: 1020 + 38,\r\n\tdeoxysdefense: 1020 + 39,\r\n\tdeoxysspeed: 1020 + 40,\r\n\tburmysandy: 1020 + 41,\r\n\tburmytrash: 1020 + 42,\r\n\twormadamsandy: 1020 + 43,\r\n\twormadamtrash: 1020 + 44,\r\n\tcherrimsunshine: 1020 + 45,\r\n\tshelloseast: 1020 + 46,\r\n\tgastrodoneast: 1020 + 47,\r\n\trotomfan: 1020 + 48,\r\n\trotomfrost: 1020 + 49,\r\n\trotomheat: 1020 + 50,\r\n\trotommow: 1020 + 51,\r\n\trotomwash: 1020 + 52,\r\n\tgiratinaorigin: 1020 + 53,\r\n\tshayminsky: 1020 + 54,\r\n\tunfezantf: 1020 + 55,\r\n\tbasculinbluestriped: 1020 + 56,\r\n\tdarmanitanzen: 1020 + 57,\r\n\tdeerlingautumn: 1020 + 58,\r\n\tdeerlingsummer: 1020 + 59,\r\n\tdeerlingwinter: 1020 + 60,\r\n\tsawsbuckautumn: 1020 + 61,\r\n\tsawsbucksummer: 1020 + 62,\r\n\tsawsbuckwinter: 1020 + 63,\r\n\tfrillishf: 1020 + 64,\r\n\tjellicentf: 1020 + 65,\r\n\ttornadustherian: 1020 + 66,\r\n\tthundurustherian: 1020 + 67,\r\n\tlandorustherian: 1020 + 68,\r\n\tkyuremblack: 1020 + 69,\r\n\tkyuremwhite: 1020 + 70,\r\n\tkeldeoresolute: 1020 + 71,\r\n\tmeloettapirouette: 1020 + 72,\r\n\tvivillonarchipelago: 1020 + 73,\r\n\tvivilloncontinental: 1020 + 74,\r\n\tvivillonelegant: 1020 + 75,\r\n\tvivillonfancy: 1020 + 76,\r\n\tvivillongarden: 1020 + 77,\r\n\tvivillonhighplains: 1020 + 78,\r\n\tvivillonicysnow: 1020 + 79,\r\n\tvivillonjungle: 1020 + 80,\r\n\tvivillonmarine: 1020 + 81,\r\n\tvivillonmodern: 1020 + 82,\r\n\tvivillonmonsoon: 1020 + 83,\r\n\tvivillonocean: 1020 + 84,\r\n\tvivillonpokeball: 1020 + 85,\r\n\tvivillonpolar: 1020 + 86,\r\n\tvivillonriver: 1020 + 87,\r\n\tvivillonsandstorm: 1020 + 88,\r\n\tvivillonsavanna: 1020 + 89,\r\n\tvivillonsun: 1020 + 90,\r\n\tvivillontundra: 1020 + 91,\r\n\tpyroarf: 1020 + 92,\r\n\tflabebeblue: 1020 + 93,\r\n\tflabebeorange: 1020 + 94,\r\n\tflabebewhite: 1020 + 95,\r\n\tflabebeyellow: 1020 + 96,\r\n\tfloetteblue: 1020 + 97,\r\n\tfloetteeternal: 1020 + 98,\r\n\tfloetteorange: 1020 + 99,\r\n\tfloettewhite: 1020 + 100,\r\n\tfloetteyellow: 1020 + 101,\r\n\tflorgesblue: 1020 + 102,\r\n\tflorgesorange: 1020 + 103,\r\n\tflorgeswhite: 1020 + 104,\r\n\tflorgesyellow: 1020 + 105,\r\n\tfurfroudandy: 1020 + 106,\r\n\tfurfroudebutante: 1020 + 107,\r\n\tfurfroudiamond: 1020 + 108,\r\n\tfurfrouheart: 1020 + 109,\r\n\tfurfroukabuki: 1020 + 110,\r\n\tfurfroulareine: 1020 + 111,\r\n\tfurfroumatron: 1020 + 112,\r\n\tfurfroupharaoh: 1020 + 113,\r\n\tfurfroustar: 1020 + 114,\r\n\tmeowsticf: 1020 + 115,\r\n\taegislashblade: 1020 + 116,\r\n\txerneasneutral: 1020 + 117,\r\n\thoopaunbound: 1020 + 118,\r\n\trattataalola: 1020 + 119,\r\n\traticatealola: 1020 + 120,\r\n\traichualola: 1020 + 121,\r\n\tsandshrewalola: 1020 + 122,\r\n\tsandslashalola: 1020 + 123,\r\n\tvulpixalola: 1020 + 124,\r\n\tninetalesalola: 1020 + 125,\r\n\tdiglettalola: 1020 + 126,\r\n\tdugtrioalola: 1020 + 127,\r\n\tmeowthalola: 1020 + 128,\r\n\tpersianalola: 1020 + 129,\r\n\tgeodudealola: 1020 + 130,\r\n\tgraveleralola: 1020 + 131,\r\n\tgolemalola: 1020 + 132,\r\n\tgrimeralola: 1020 + 133,\r\n\tmukalola: 1020 + 134,\r\n\texeggutoralola: 1020 + 135,\r\n\tmarowakalola: 1020 + 136,\r\n\tgreninjaash: 1020 + 137,\r\n\tzygarde10: 1020 + 138,\r\n\tzygardecomplete: 1020 + 139,\r\n\toricoriopompom: 1020 + 140,\r\n\toricoriopau: 1020 + 141,\r\n\toricoriosensu: 1020 + 142,\r\n\tlycanrocmidnight: 1020 + 143,\r\n\twishiwashischool: 1020 + 144,\r\n\tminiormeteor: 1020 + 145,\r\n\tminiororange: 1020 + 146,\r\n\tminioryellow: 1020 + 147,\r\n\tminiorgreen: 1020 + 148,\r\n\tminiorblue: 1020 + 149,\r\n\tminiorindigo: 1020 + 150,\r\n\tminiorviolet: 1020 + 151,\r\n\tmagearnaoriginal: 1020 + 152,\r\n\tpikachuoriginal: 1020 + 153,\r\n\tpikachuhoenn: 1020 + 154,\r\n\tpikachusinnoh: 1020 + 155,\r\n\tpikachuunova: 1020 + 156,\r\n\tpikachukalos: 1020 + 157,\r\n\tpikachualola: 1020 + 158,\r\n\tpikachupartner: 1020 + 159,\r\n\tlycanrocdusk: 1020 + 160,\r\n\tnecrozmaduskmane: 1020 + 161,\r\n\tnecrozmadawnwings: 1020 + 162,\r\n\tnecrozmaultra: 1020 + 163,\r\n\tpikachustarter: 1020 + 164,\r\n\teeveestarter: 1020 + 165,\r\n\tmeowthgalar: 1020 + 166,\r\n\tponytagalar: 1020 + 167,\r\n\trapidashgalar: 1020 + 168,\r\n\tfarfetchdgalar: 1020 + 169,\r\n\tweezinggalar: 1020 + 170,\r\n\tmrmimegalar: 1020 + 171,\r\n\tcorsolagalar: 1020 + 172,\r\n\tzigzagoongalar: 1020 + 173,\r\n\tlinoonegalar: 1020 + 174,\r\n\tdarumakagalar: 1020 + 175,\r\n\tdarmanitangalar: 1020 + 176,\r\n\tdarmanitangalarzen: 1020 + 177,\r\n\tyamaskgalar: 1020 + 178,\r\n\tstunfiskgalar: 1020 + 179,\r\n\tcramorantgulping: 1020 + 180,\r\n\tcramorantgorging: 1020 + 181,\r\n\ttoxtricitylowkey: 1020 + 182,\r\n\talcremierubycream: 1020 + 183,\r\n\talcremiematchacream: 1020 + 184,\r\n\talcremiemintcream: 1020 + 185,\r\n\talcremielemoncream: 1020 + 186,\r\n\talcremiesaltedcream: 1020 + 187,\r\n\talcremierubyswirl: 1020 + 188,\r\n\talcremiecaramelswirl: 1020 + 189,\r\n\talcremierainbowswirl: 1020 + 190,\r\n\teiscuenoice: 1020 + 191,\r\n\tindeedeef: 1020 + 192,\r\n\tmorpekohangry: 1020 + 193,\r\n\tzaciancrowned: 1020 + 194,\r\n\tzamazentacrowned: 1020 + 195,\r\n\tslowpokegalar: 1020 + 196,\r\n\tslowbrogalar: 1020 + 197,\r\n\tzarudedada: 1020 + 198,\r\n\tpikachuworld: 1020 + 199,\r\n\tarticunogalar: 1020 + 200,\r\n\tzapdosgalar: 1020 + 201,\r\n\tmoltresgalar: 1020 + 202,\r\n\tslowkinggalar: 1020 + 203,\r\n\tcalyrexice: 1020 + 204,\r\n\tcalyrexshadow: 1020 + 205,\r\n\tgrowlithehisui: 1020 + 206,\r\n\tarcaninehisui: 1020 + 207,\r\n\tvoltorbhisui: 1020 + 208,\r\n\telectrodehisui: 1020 + 209,\r\n\ttyphlosionhisui: 1020 + 210,\r\n\tqwilfishhisui: 1020 + 211,\r\n\tsneaselhisui: 1020 + 212,\r\n\tsamurotthisui: 1020 + 213,\r\n\tlilliganthisui: 1020 + 214,\r\n\tzoruahisui: 1020 + 215,\r\n\tzoroarkhisui: 1020 + 216,\r\n\tbraviaryhisui: 1020 + 217,\r\n\tsliggoohisui: 1020 + 218,\r\n\tgoodrahisui: 1020 + 219,\r\n\tavalugghisui: 1020 + 220,\r\n\tdecidueyehisui: 1020 + 221,\r\n\tbasculegionf: 1020 + 222,\r\n\tenamorustherian: 1020 + 223,\r\n\ttaurospaldea: 1020 + 224,\r\n\ttaurospaldeafire: 1020 + 225,\r\n\ttaurospaldeawater: 1020 + 226,\r\n\ttaurospaldeacombat: 1020 + 224,\r\n\ttaurospaldeablaze: 1020 + 225,\r\n\ttaurospaldeaaqua: 1020 + 226,\r\n\twooperpaldea: 1020 + 227,\r\n\toinkolognef: 1020 + 228,\r\n\tpalafinhero: 1020 + 229,\r\n\tmausholdfour: 1020 + 230,\r\n\ttatsugiridroopy: 1020 + 231,\r\n\ttatsugiristretchy: 1020 + 232,\r\n\tsquawkabillyblue: 1020 + 233,\r\n\tsquawkabillyyellow: 1020 + 234,\r\n\tsquawkabillywhite: 1020 + 235,\r\n\tgimmighoulroaming: 1020 + 236,\r\n\tdialgaorigin: 1020 + 237,\r\n\tpalkiaorigin: 1020 + 238,\r\n\tbasculinwhitestriped: 1020 + 239,\r\n\tursalunabloodmoon: 1020 + 240,\r\n\togerponwellspring: 1020 + 241,\r\n\togerponhearthflame: 1020 + 242,\r\n\togerponcornerstone: 1020 + 243,\r\n\r\n\t// alt forms with duplicate icons\r\n\tgreninjabond: 658,\r\n\tgumshoostotem: 735,\r\n\traticatealolatotem: 1020 + 120,\r\n\tmarowakalolatotem: 1020 + 136,\r\n\taraquanidtotem: 752,\r\n\tlurantistotem: 754,\r\n\tsalazzletotem: 758,\r\n\tvikavolttotem: 738,\r\n\ttogedemarutotem: 777,\r\n\tmimikyutotem: 778,\r\n\tmimikyubustedtotem: 778,\r\n\tribombeetotem: 743,\r\n\tkommoototem: 784,\r\n\tsinisteaantique: 854,\r\n\tpolteageistantique: 855,\r\n\tpoltchageistartisan: 1012,\r\n\tsinistchamasterpiece: 1013,\r\n\togerpontealtera: 1017,\r\n\togerponwellspringtera: 1020 + 241,\r\n\togerponhearthflametera: 1020 + 242,\r\n\togerponcornerstonetera: 1020 + 243,\r\n\r\n\t// Mega/G-Max\r\n\tvenusaurmega: 1272 + 0,\r\n\tcharizardmegax: 1272 + 1,\r\n\tcharizardmegay: 1272 + 2,\r\n\tblastoisemega: 1272 + 3,\r\n\tbeedrillmega: 1272 + 4,\r\n\tpidgeotmega: 1272 + 5,\r\n\talakazammega: 1272 + 6,\r\n\tslowbromega: 1272 + 7,\r\n\tgengarmega: 1272 + 8,\r\n\tkangaskhanmega: 1272 + 9,\r\n\tpinsirmega: 1272 + 10,\r\n\tgyaradosmega: 1272 + 11,\r\n\taerodactylmega: 1272 + 12,\r\n\tmewtwomegax: 1272 + 13,\r\n\tmewtwomegay: 1272 + 14,\r\n\tampharosmega: 1272 + 15,\r\n\tsteelixmega: 1272 + 16,\r\n\tscizormega: 1272 + 17,\r\n\theracrossmega: 1272 + 18,\r\n\thoundoommega: 1272 + 19,\r\n\ttyranitarmega: 1272 + 20,\r\n\tsceptilemega: 1272 + 21,\r\n\tblazikenmega: 1272 + 22,\r\n\tswampertmega: 1272 + 23,\r\n\tgardevoirmega: 1272 + 24,\r\n\tsableyemega: 1272 + 25,\r\n\tmawilemega: 1272 + 26,\r\n\taggronmega: 1272 + 27,\r\n\tmedichammega: 1272 + 28,\r\n\tmanectricmega: 1272 + 29,\r\n\tsharpedomega: 1272 + 30,\r\n\tcameruptmega: 1272 + 31,\r\n\taltariamega: 1272 + 32,\r\n\tbanettemega: 1272 + 33,\r\n\tabsolmega: 1272 + 34,\r\n\tglaliemega: 1272 + 35,\r\n\tsalamencemega: 1272 + 36,\r\n\tmetagrossmega: 1272 + 37,\r\n\tlatiasmega: 1272 + 38,\r\n\tlatiosmega: 1272 + 39,\r\n\tkyogreprimal: 1272 + 40,\r\n\tgroudonprimal: 1272 + 41,\r\n\trayquazamega: 1272 + 42,\r\n\tlopunnymega: 1272 + 43,\r\n\tgarchompmega: 1272 + 44,\r\n\tlucariomega: 1272 + 45,\r\n\tabomasnowmega: 1272 + 46,\r\n\tgallademega: 1272 + 47,\r\n\taudinomega: 1272 + 48,\r\n\tdianciemega: 1272 + 49,\r\n\tcharizardgmax: 1272 + 50,\r\n\tbutterfreegmax: 1272 + 51,\r\n\tpikachugmax: 1272 + 52,\r\n\tmeowthgmax: 1272 + 53,\r\n\tmachampgmax: 1272 + 54,\r\n\tgengargmax: 1272 + 55,\r\n\tkinglergmax: 1272 + 56,\r\n\tlaprasgmax: 1272 + 57,\r\n\teeveegmax: 1272 + 58,\r\n\tsnorlaxgmax: 1272 + 59,\r\n\tgarbodorgmax: 1272 + 60,\r\n\tmelmetalgmax: 1272 + 61,\r\n\tcorviknightgmax: 1272 + 62,\r\n\torbeetlegmax: 1272 + 63,\r\n\tdrednawgmax: 1272 + 64,\r\n\tcoalossalgmax: 1272 + 65,\r\n\tflapplegmax: 1272 + 66,\r\n\tappletungmax: 1272 + 67,\r\n\tsandacondagmax: 1272 + 68,\r\n\ttoxtricitygmax: 1272 + 69,\r\n\ttoxtricitylowkeygmax: 1272 + 69,\r\n\tcentiskorchgmax: 1272 + 70,\r\n\thatterenegmax: 1272 + 71,\r\n\tgrimmsnarlgmax: 1272 + 72,\r\n\talcremiegmax: 1272 + 73,\r\n\tcopperajahgmax: 1272 + 74,\r\n\tduraludongmax: 1272 + 75,\r\n\teternatuseternamax: 1272 + 76,\r\n\tvenusaurgmax: 1272 + 77,\r\n\tblastoisegmax: 1272 + 78,\r\n\trillaboomgmax: 1272 + 79,\r\n\tcinderacegmax: 1272 + 80,\r\n\tinteleongmax: 1272 + 81,\r\n\turshifugmax: 1272 + 82,\r\n\turshifurapidstrikegmax: 1272 + 83,\r\n\r\n\t// CAP\r\n\tsyclant: 1464 + 0,\r\n\trevenankh: 1464 + 1,\r\n\tpyroak: 1464 + 2,\r\n\tfidgit: 1464 + 3,\r\n\tstratagem: 1464 + 4,\r\n\targhonaut: 1464 + 5,\r\n\tkitsunoh: 1464 + 6,\r\n\tcyclohm: 1464 + 7,\r\n\tcolossoil: 1464 + 8,\r\n\tkrilowatt: 1464 + 9,\r\n\tvoodoom: 1464 + 10,\r\n\ttomohawk: 1464 + 11,\r\n\tnecturna: 1464 + 12,\r\n\tmollux: 1464 + 13,\r\n\taurumoth: 1464 + 14,\r\n\tmalaconda: 1464 + 15,\r\n\tcawmodore: 1464 + 16,\r\n\tvolkraken: 1464 + 17,\r\n\tplasmanta: 1464 + 18,\r\n\tnaviathan: 1464 + 19,\r\n\tcrucibelle: 1464 + 20,\r\n\tcrucibellemega: 1464 + 21,\r\n\tkerfluffle: 1464 + 22,\r\n\tpajantom: 1464 + 23,\r\n\tjumbao: 1464 + 24,\r\n\tcaribolt: 1464 + 25,\r\n\tsmokomodo: 1464 + 26,\r\n\tsnaelstrom: 1464 + 27,\r\n\tequilibra: 1464 + 28,\r\n\tastrolotl: 1464 + 29,\r\n\tmiasmaw: 1464 + 30,\r\n\tchromera: 1464 + 31,\r\n\tvenomicon: 1464 + 32,\r\n\tvenomiconepilogue: 1464 + 33,\r\n\tsaharaja: 1464 + 34,\r\n\themogoblin: 1464 + 35,\r\n\r\n\t// CAP prevos\r\n\tsyclar: 1500 + 0,\r\n\tembirch: 1500 + 1,\r\n\tflarelm: 1500 + 2,\r\n\tbreezi: 1500 + 3,\r\n\tscratchet: 1500 + 4,\r\n\tnecturine: 1500 + 5,\r\n\tcupra: 1500 + 6,\r\n\targalis: 1500 + 7,\r\n\tbrattler: 1500 + 8,\r\n\tcawdet: 1500 + 9,\r\n\tvolkritter: 1500 + 10,\r\n\tsnugglow: 1500 + 11,\r\n\tfloatoy: 1500 + 12,\r\n\tcaimanoe: 1500 + 13,\r\n\tpluffle: 1500 + 14,\r\n\trebble: 1500 + 15,\r\n\ttactite: 1500 + 16,\r\n\tprivatyke: 1500 + 17,\r\n\tnohface: 1500 + 18,\r\n\tmonohm: 1500 + 19,\r\n\tduohm: 1500 + 20,\r\n\tprotowatt: 1500 + 21,\r\n\tvoodoll: 1500 + 22,\r\n\tmumbao: 1500 + 23,\r\n\tfawnifer: 1500 + 24,\r\n\telectrelk: 1500 + 25,\r\n\tsmogecko: 1500 + 26,\r\n\tsmoguana: 1500 + 27,\r\n\tswirlpool: 1500 + 28,\r\n\tcoribalis: 1500 + 29,\r\n\tjustyke: 1500 + 30,\r\n\tsolotl: 1500 + 31,\r\n\tmiasmite: 1500 + 32,\r\n\tdorsoil: 1500 + 33,\r\n\tsaharascal: 1500 + 34,\r\n\tababo: 1500 + 35,\r\n\tscattervein: 1500 + 36,\r\n};\r\n\r\nconst BattlePokemonIconIndexesLeft: {[id: string]: number} = {\r\n\tpikachubelle: 1356 + 0,\r\n\tpikachupopstar: 1356 + 1,\r\n\tclefairy: 1356 + 2,\r\n\tclefable: 1356 + 3,\r\n\tjigglypuff: 1356 + 4,\r\n\twigglytuff: 1356 + 5,\r\n\tdugtrioalola: 1356 + 6,\r\n\tpoliwhirl: 1356 + 7,\r\n\tpoliwrath: 1356 + 8,\r\n\tmukalola: 1356 + 9,\r\n\tkingler: 1356 + 10,\r\n\tcroconaw: 1356 + 11,\r\n\tcleffa: 1356 + 12,\r\n\tigglybuff: 1356 + 13,\r\n\tpolitoed: 1356 + 14,\r\n\tunownb: 1356 + 15,\r\n\tunownc: 1356 + 16,\r\n\tunownd: 1356 + 17,\r\n\tunowne: 1356 + 18,\r\n\tunownf: 1356 + 19,\r\n\tunowng: 1356 + 20,\r\n\tunownh: 1356 + 21,\r\n\tunownj: 1356 + 22,\r\n\tunownk: 1356 + 23,\r\n\tunownl: 1356 + 24,\r\n\tunownm: 1356 + 25,\r\n\tunownn: 1356 + 26,\r\n\tunownp: 1356 + 27,\r\n\tunownq: 1356 + 28,\r\n\tunownquestion: 1356 + 29,\r\n\tunownr: 1356 + 30,\r\n\tunowns: 1356 + 31,\r\n\tunownt: 1356 + 32,\r\n\tunownv: 1356 + 33,\r\n\tunownz: 1356 + 34,\r\n\tsneasel: 1356 + 35,\r\n\tteddiursa: 1356 + 36,\r\n\troselia: 1356 + 37,\r\n\tzangoose: 1356 + 38,\r\n\tseviper: 1356 + 39,\r\n\tcastformsnowy: 1356 + 40,\r\n\tabsolmega: 1356 + 41,\r\n\tabsol: 1356 + 42,\r\n\tregirock: 1356 + 43,\r\n\ttorterra: 1356 + 44,\r\n\tbudew: 1356 + 45,\r\n\troserade: 1356 + 46,\r\n\tmagmortar: 1356 + 47,\r\n\ttogekiss: 1356 + 48,\r\n\trotomwash: 1356 + 49,\r\n\tshayminsky: 1356 + 50,\r\n\temboar: 1356 + 51,\r\n\tpansear: 1356 + 52,\r\n\tsimisear: 1356 + 53,\r\n\tdrilbur: 1356 + 54,\r\n\texcadrill: 1356 + 55,\r\n\tsawk: 1356 + 56,\r\n\tlilligant: 1356 + 57,\r\n\tgarbodor: 1356 + 58,\r\n\tsolosis: 1356 + 59,\r\n\tvanilluxe: 1356 + 60,\r\n\tamoonguss: 1356 + 61,\r\n\tklink: 1356 + 62,\r\n\tklang: 1356 + 63,\r\n\tklinklang: 1356 + 64,\r\n\tlitwick: 1356 + 65,\r\n\tgolett: 1356 + 66,\r\n\tgolurk: 1356 + 67,\r\n\tkyuremblack: 1356 + 68,\r\n\tkyuremwhite: 1356 + 69,\r\n\tkyurem: 1356 + 70,\r\n\tkeldeoresolute: 1356 + 71,\r\n\tmeloetta: 1356 + 72,\r\n\tgreninja: 1356 + 73,\r\n\tgreninjabond: 1356 + 73,\r\n\tgreninjaash: 1356 + 74,\r\n\tfurfroudebutante: 1356 + 75,\r\n\tbarbaracle: 1356 + 76,\r\n\tclauncher: 1356 + 77,\r\n\tclawitzer: 1356 + 78,\r\n\tsylveon: 1356 + 79,\r\n\tklefki: 1356 + 80,\r\n\tzygarde: 1356 + 81,\r\n\tzygarde10: 1356 + 82,\r\n\tzygardecomplete: 1356 + 83,\r\n\tdartrix: 1356 + 84,\r\n\tsteenee: 1356 + 85,\r\n\ttsareena: 1356 + 86,\r\n\tcomfey: 1356 + 87,\r\n\tminiormeteor: 1356 + 88,\r\n\tminior: 1356 + 89,\r\n\tminiororange: 1356 + 90,\r\n\tminioryellow: 1356 + 91,\r\n\tminiorgreen: 1356 + 92,\r\n\tminiorblue: 1356 + 93,\r\n\tminiorviolet: 1356 + 94,\r\n\tminiorindigo: 1356 + 95,\r\n\tdhelmise: 1356 + 96,\r\n\tnecrozma: 1356 + 97,\r\n\tmarshadow: 1356 + 98,\r\n\tpikachuoriginal: 1356 + 99,\r\n\tpikachupartner: 1356 + 100,\r\n\tnecrozmaduskmane: 1356 + 101,\r\n\tnecrozmadawnwings: 1356 + 102,\r\n\tnecrozmaultra: 1356 + 103,\r\n\tstakataka: 1356 + 104,\r\n\tblacephalon: 1356 + 105,\r\n};\r\n\r\nconst BattleAvatarNumbers: {[k: string]: string} = {\r\n\t1: 'lucas',\r\n\t2: 'dawn',\r\n\t3: 'youngster-gen4dp',\r\n\t4: 'lass-gen4dp',\r\n\t5: 'camper',\r\n\t6: 'picnicker',\r\n\t7: 'bugcatcher-gen4dp',\r\n\t8: 'aromalady',\r\n\t9: 'twins-gen4dp',\r\n\t10: 'hiker-gen4',\r\n\t11: 'battlegirl-gen4',\r\n\t12: 'fisherman-gen4',\r\n\t13: 'cyclist-gen4',\r\n\t14: 'cyclistf-gen4',\r\n\t15: 'blackbelt-gen4dp',\r\n\t16: 'artist-gen4',\r\n\t17: 'pokemonbreeder-gen4',\r\n\t18: 'pokemonbreederf-gen4',\r\n\t19: 'cowgirl',\r\n\t20: 'jogger',\r\n\t21: 'pokefan-gen4',\r\n\t22: 'pokefanf-gen4',\r\n\t23: 'pokekid',\r\n\t24: 'youngcouple-gen4dp',\r\n\t25: 'acetrainer-gen4dp',\r\n\t26: 'acetrainerf-gen4dp',\r\n\t27: 'waitress-gen4',\r\n\t28: 'veteran-gen4',\r\n\t29: 'ninjaboy',\r\n\t30: 'dragontamer',\r\n\t31: 'birdkeeper-gen4dp',\r\n\t32: 'doubleteam',\r\n\t33: 'richboy-gen4',\r\n\t34: 'lady-gen4',\r\n\t35: 'gentleman-gen4dp',\r\n\t36: 'madame-gen4dp',\r\n\t37: 'beauty-gen4dp',\r\n\t38: 'collector',\r\n\t39: 'policeman-gen4',\r\n\t40: 'pokemonranger-gen4',\r\n\t41: 'pokemonrangerf-gen4',\r\n\t42: 'scientist-gen4dp',\r\n\t43: 'swimmer-gen4dp',\r\n\t44: 'swimmerf-gen4dp',\r\n\t45: 'tuber',\r\n\t46: 'tuberf',\r\n\t47: 'sailor',\r\n\t48: 'sisandbro',\r\n\t49: 'ruinmaniac',\r\n\t50: 'psychic-gen4',\r\n\t51: 'psychicf-gen4',\r\n\t52: 'gambler',\r\n\t53: 'guitarist-gen4',\r\n\t54: 'acetrainersnow',\r\n\t55: 'acetrainersnowf',\r\n\t56: 'skier',\r\n\t57: 'skierf-gen4dp',\r\n\t58: 'roughneck-gen4',\r\n\t59: 'clown',\r\n\t60: 'worker-gen4',\r\n\t61: 'schoolkid-gen4dp',\r\n\t62: 'schoolkidf-gen4',\r\n\t63: 'roark',\r\n\t64: 'barry',\r\n\t65: 'byron',\r\n\t66: 'aaron',\r\n\t67: 'bertha',\r\n\t68: 'flint',\r\n\t69: 'lucian',\r\n\t70: 'cynthia-gen4',\r\n\t71: 'bellepa',\r\n\t72: 'rancher',\r\n\t73: 'mars',\r\n\t74: 'galacticgrunt',\r\n\t75: 'gardenia',\r\n\t76: 'crasherwake',\r\n\t77: 'maylene',\r\n\t78: 'fantina',\r\n\t79: 'candice',\r\n\t80: 'volkner',\r\n\t81: 'parasollady-gen4',\r\n\t82: 'waiter-gen4dp',\r\n\t83: 'interviewers',\r\n\t84: 'cameraman',\r\n\t85: 'reporter',\r\n\t86: 'idol',\r\n\t87: 'cyrus',\r\n\t88: 'jupiter',\r\n\t89: 'saturn',\r\n\t90: 'galacticgruntf',\r\n\t91: 'argenta',\r\n\t92: 'palmer',\r\n\t93: 'thorton',\r\n\t94: 'buck',\r\n\t95: 'darach-caitlin',\r\n\t96: 'marley',\r\n\t97: 'mira',\r\n\t98: 'cheryl',\r\n\t99: 'riley',\r\n\t100: 'dahlia',\r\n\t101: 'ethan',\r\n\t102: 'lyra',\r\n\t103: 'twins-gen4',\r\n\t104: 'lass-gen4',\r\n\t105: 'acetrainer-gen4',\r\n\t106: 'acetrainerf-gen4',\r\n\t107: 'juggler',\r\n\t108: 'sage',\r\n\t109: 'li',\r\n\t110: 'gentleman-gen4',\r\n\t111: 'teacher',\r\n\t112: 'beauty',\r\n\t113: 'birdkeeper',\r\n\t114: 'swimmer-gen4',\r\n\t115: 'swimmerf-gen4',\r\n\t116: 'kimonogirl',\r\n\t117: 'scientist-gen4',\r\n\t118: 'acetrainercouple',\r\n\t119: 'youngcouple',\r\n\t120: 'supernerd',\r\n\t121: 'medium',\r\n\t122: 'schoolkid-gen4',\r\n\t123: 'blackbelt-gen4',\r\n\t124: 'pokemaniac',\r\n\t125: 'firebreather',\r\n\t126: 'burglar',\r\n\t127: 'biker-gen4',\r\n\t128: 'skierf',\r\n\t129: 'boarder',\r\n\t130: 'rocketgrunt',\r\n\t131: 'rocketgruntf',\r\n\t132: 'archer',\r\n\t133: 'ariana',\r\n\t134: 'proton',\r\n\t135: 'petrel',\r\n\t136: 'eusine',\r\n\t137: 'lucas-gen4pt',\r\n\t138: 'dawn-gen4pt',\r\n\t139: 'madame-gen4',\r\n\t140: 'waiter-gen4',\r\n\t141: 'falkner',\r\n\t142: 'bugsy',\r\n\t143: 'whitney',\r\n\t144: 'morty',\r\n\t145: 'chuck',\r\n\t146: 'jasmine',\r\n\t147: 'pryce',\r\n\t148: 'clair',\r\n\t149: 'will',\r\n\t150: 'koga',\r\n\t151: 'bruno',\r\n\t152: 'karen',\r\n\t153: 'lance',\r\n\t154: 'brock',\r\n\t155: 'misty',\r\n\t156: 'ltsurge',\r\n\t157: 'erika',\r\n\t158: 'janine',\r\n\t159: 'sabrina',\r\n\t160: 'blaine',\r\n\t161: 'blue',\r\n\t162: 'red',\r\n\t163: 'red',\r\n\t164: 'silver',\r\n\t165: 'giovanni',\r\n\t166: 'unknownf',\r\n\t167: 'unknown',\r\n\t168: 'unknown',\r\n\t169: 'hilbert',\r\n\t170: 'hilda',\r\n\t171: 'youngster',\r\n\t172: 'lass',\r\n\t173: 'schoolkid',\r\n\t174: 'schoolkidf',\r\n\t175: 'smasher',\r\n\t176: 'linebacker',\r\n\t177: 'waiter',\r\n\t178: 'waitress',\r\n\t179: 'chili',\r\n\t180: 'cilan',\r\n\t181: 'cress',\r\n\t182: 'nurseryaide',\r\n\t183: 'preschoolerf',\r\n\t184: 'preschooler',\r\n\t185: 'twins',\r\n\t186: 'pokemonbreeder',\r\n\t187: 'pokemonbreederf',\r\n\t188: 'lenora',\r\n\t189: 'burgh',\r\n\t190: 'elesa',\r\n\t191: 'clay',\r\n\t192: 'skyla',\r\n\t193: 'pokemonranger',\r\n\t194: 'pokemonrangerf',\r\n\t195: 'worker',\r\n\t196: 'backpacker',\r\n\t197: 'backpackerf',\r\n\t198: 'fisherman',\r\n\t199: 'musician',\r\n\t200: 'dancer',\r\n\t201: 'harlequin',\r\n\t202: 'artist',\r\n\t203: 'baker',\r\n\t204: 'psychic',\r\n\t205: 'psychicf',\r\n\t206: 'cheren',\r\n\t207: 'bianca',\r\n\t208: 'plasmagrunt-gen5bw',\r\n\t209: 'n',\r\n\t210: 'richboy',\r\n\t211: 'lady',\r\n\t212: 'pilot',\r\n\t213: 'workerice',\r\n\t214: 'hoopster',\r\n\t215: 'scientistf',\r\n\t216: 'clerkf',\r\n\t217: 'acetrainerf',\r\n\t218: 'acetrainer',\r\n\t219: 'blackbelt',\r\n\t220: 'scientist',\r\n\t221: 'striker',\r\n\t222: 'brycen',\r\n\t223: 'iris',\r\n\t224: 'drayden',\r\n\t225: 'roughneck',\r\n\t226: 'janitor',\r\n\t227: 'pokefan',\r\n\t228: 'pokefanf',\r\n\t229: 'doctor',\r\n\t230: 'nurse',\r\n\t231: 'hooligans',\r\n\t232: 'battlegirl',\r\n\t233: 'parasollady',\r\n\t234: 'clerk',\r\n\t235: 'clerk-boss',\r\n\t236: 'backers',\r\n\t237: 'backersf',\r\n\t238: 'veteran',\r\n\t239: 'veteranf',\r\n\t240: 'biker',\r\n\t241: 'infielder',\r\n\t242: 'hiker',\r\n\t243: 'madame',\r\n\t244: 'gentleman',\r\n\t245: 'plasmagruntf-gen5bw',\r\n\t246: 'shauntal',\r\n\t247: 'marshal',\r\n\t248: 'grimsley',\r\n\t249: 'caitlin',\r\n\t250: 'ghetsis-gen5bw',\r\n\t251: 'depotagent',\r\n\t252: 'swimmer',\r\n\t253: 'swimmerf',\r\n\t254: 'policeman',\r\n\t255: 'maid',\r\n\t256: 'ingo',\r\n\t257: 'alder',\r\n\t258: 'cyclist',\r\n\t259: 'cyclistf',\r\n\t260: 'cynthia',\r\n\t261: 'emmet',\r\n\t262: 'hilbert-wonderlauncher',\r\n\t263: 'hilda-wonderlauncher',\r\n\t264: 'hugh',\r\n\t265: 'rosa',\r\n\t266: 'nate',\r\n\t267: 'colress',\r\n\t268: 'beauty-gen5bw2',\r\n\t269: 'ghetsis',\r\n\t270: 'plasmagrunt',\r\n\t271: 'plasmagruntf',\r\n\t272: 'iris-gen5bw2',\r\n\t273: 'brycenman',\r\n\t274: 'shadowtriad',\r\n\t275: 'rood',\r\n\t276: 'zinzolin',\r\n\t277: 'cheren-gen5bw2',\r\n\t278: 'marlon',\r\n\t279: 'roxie',\r\n\t280: 'roxanne',\r\n\t281: 'brawly',\r\n\t282: 'wattson',\r\n\t283: 'flannery',\r\n\t284: 'norman',\r\n\t285: 'winona',\r\n\t286: 'tate',\r\n\t287: 'liza',\r\n\t288: 'juan',\r\n\t289: 'guitarist',\r\n\t290: 'steven',\r\n\t291: 'wallace',\r\n\t292: 'bellelba',\r\n\t293: 'benga',\r\n\t294: 'ash',\r\n\t'#bw2elesa': 'elesa-gen5bw2',\r\n\t'#teamrocket': 'teamrocket',\r\n\t'#yellow': 'yellow',\r\n\t'#zinnia': 'zinnia',\r\n\t'#clemont': 'clemont',\r\n\t'#wally': 'wally',\r\n\tbreeder: 'pokemonbreeder',\r\n\tbreederf: 'pokemonbreederf',\r\n\t'hilbert-dueldisk': 'hilbert-wonderlauncher',\r\n\t'hilda-dueldisk': 'hilda-wonderlauncher',\r\n\t'nate-dueldisk': 'nate-wonderlauncher',\r\n\t'rosa-dueldisk': 'rosa-wonderlauncher',\r\n\r\n\t1001: '#1001',\r\n\t1002: '#1002',\r\n\t1003: '#1003',\r\n\t1005: '#1005',\r\n\t1010: '#1010',\r\n};\r\n\r\ntype StatName = 'hp' | 'atk' | 'def' | 'spa' | 'spd' | 'spe';\r\ntype NatureName = 'Adamant' | 'Bashful' | 'Bold' | 'Brave' | 'Calm' | 'Careful' | 'Docile' | 'Gentle' |\r\n\t'Hardy' | 'Hasty' | 'Impish' | 'Jolly' | 'Lax' | 'Lonely' | 'Mild' | 'Modest' | 'Naive' | 'Naughty' |\r\n\t'Quiet' | 'Quirky' | 'Rash' | 'Relaxed' | 'Sassy' | 'Serious' | 'Timid';\r\ntype StatNameExceptHP = 'atk' | 'def' | 'spa' | 'spd' | 'spe';\r\ntype TypeName = 'Normal' | 'Fighting' | 'Flying' | 'Poison' | 'Ground' | 'Rock' | 'Bug' | 'Ghost' | 'Steel' |\r\n\t'Fire' | 'Water' | 'Grass' | 'Electric' | 'Psychic' | 'Ice' | 'Dragon' | 'Dark' | 'Fairy' | '???';\r\ntype StatusName = 'par' | 'psn' | 'frz' | 'slp' | 'brn';\r\ntype BoostStatName = 'atk' | 'def' | 'spa' | 'spd' | 'spe' | 'evasion' | 'accuracy' | 'spc';\r\ntype GenderName = 'M' | 'F' | 'N';\r\n\r\ninterface Effect {\r\n\treadonly id: ID;\r\n\treadonly name: string;\r\n\treadonly gen: number;\r\n\treadonly effectType: 'Item' | 'Move' | 'Ability' | 'Species' | 'PureEffect';\r\n\t/**\r\n\t * Do we have data on this item/move/ability/species?\r\n\t * WARNING: Always false if the relevant data files aren't loaded.\r\n\t */\r\n\treadonly exists: boolean;\r\n}\r\n\r\nclass PureEffect implements Effect {\r\n\treadonly effectType = 'PureEffect';\r\n\treadonly id: ID;\r\n\treadonly name: string;\r\n\treadonly gen: number;\r\n\treadonly exists: boolean;\r\n\tconstructor(id: ID, name: string) {\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.gen = 0;\r\n\t\tthis.exists = false;\r\n\t}\r\n}\r\n\r\nclass Item implements Effect {\r\n\t// effect\r\n\treadonly effectType = 'Item';\r\n\treadonly id: ID;\r\n\treadonly name: string;\r\n\treadonly gen: number;\r\n\treadonly exists: boolean;\r\n\r\n\treadonly num: number;\r\n\treadonly spritenum: number;\r\n\treadonly desc: string;\r\n\treadonly shortDesc: string;\r\n\r\n\treadonly megaStone: string;\r\n\treadonly megaEvolves: string;\r\n\treadonly zMove: string | true | null;\r\n\treadonly zMoveType: TypeName | '';\r\n\treadonly zMoveFrom: string;\r\n\treadonly zMoveUser: readonly string[] | null;\r\n\treadonly onPlate: TypeName;\r\n\treadonly onMemory: TypeName;\r\n\treadonly onDrive: TypeName;\r\n\treadonly fling: any;\r\n\treadonly naturalGift: any;\r\n\treadonly isPokeball: boolean;\r\n\treadonly itemUser?: readonly string[];\r\n\r\n\tconstructor(id: ID, name: string, data: any) {\r\n\t\tif (!data || typeof data !== 'object') data = {};\r\n\t\tif (data.name) name = data.name;\r\n\t\tthis.name = Dex.sanitizeName(name);\r\n\t\tthis.id = id;\r\n\t\tthis.gen = data.gen || 0;\r\n\t\tthis.exists = ('exists' in data ? !!data.exists : true);\r\n\r\n\t\tthis.num = data.num || 0;\r\n\t\tthis.spritenum = data.spritenum || 0;\r\n\t\tthis.desc = data.desc || data.shortDesc || '';\r\n\t\tthis.shortDesc = data.shortDesc || this.desc;\r\n\r\n\t\tthis.megaStone = data.megaStone || '';\r\n\t\tthis.megaEvolves = data.megaEvolves || '';\r\n\t\tthis.zMove = data.zMove || null;\r\n\t\tthis.zMoveType = data.zMoveType || '';\r\n\t\tthis.zMoveFrom = data.zMoveFrom || '';\r\n\t\tthis.zMoveUser = data.zMoveUser || null;\r\n\t\tthis.onPlate = data.onPlate || '';\r\n\t\tthis.onMemory = data.onMemory || '';\r\n\t\tthis.onDrive = data.onDrive || '';\r\n\t\tthis.fling = data.fling || null;\r\n\t\tthis.naturalGift = data.naturalGift || null;\r\n\t\tthis.isPokeball = !!data.isPokeball;\r\n\t\tthis.itemUser = data.itemUser;\r\n\r\n\t\tif (!this.gen) {\r\n\t\t\tif (this.num >= 577) {\r\n\t\t\t\tthis.gen = 6;\r\n\t\t\t} else if (this.num >= 537) {\r\n\t\t\t\tthis.gen = 5;\r\n\t\t\t} else if (this.num >= 377) {\r\n\t\t\t\tthis.gen = 4;\r\n\t\t\t} else {\r\n\t\t\t\tthis.gen = 3;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\ninterface MoveFlags {\r\n\t/** The move has an animation when used on an ally. */\r\n\tallyanim?: 1 | 0;\r\n\t/** Power is multiplied by 1.5 when used by a Pokemon with the Strong Jaw Ability. */\r\n\tbite?: 1 | 0;\r\n\t/** Has no effect on Pokemon with the Bulletproof Ability. */\r\n\tbullet?: 1 | 0;\r\n\t/** Ignores a target's substitute. */\r\n\tbypasssub?: 1 | 0;\r\n\t/** The user is unable to make a move between turns. */\r\n\tcharge?: 1 | 0;\r\n\t/** Makes contact. */\r\n\tcontact?: 1 | 0;\r\n\t/** When used by a Pokemon, other Pokemon with the Dancer Ability can attempt to execute the same move. */\r\n\tdance?: 1 | 0;\r\n\t/** Thaws the user if executed successfully while the user is frozen. */\r\n\tdefrost?: 1 | 0;\r\n\t/** Can target a Pokemon positioned anywhere in a Triple Battle. */\r\n\tdistance?: 1 | 0;\r\n\t/** Prevented from being executed or selected during Gravity's effect. */\r\n\tgravity?: 1 | 0;\r\n\t/** Prevented from being executed or selected during Heal Block's effect. */\r\n\theal?: 1 | 0;\r\n\t/** Can be copied by Mirror Move. */\r\n\tmirror?: 1 | 0;\r\n\t/** Prevented from being executed or selected in a Sky Battle. */\r\n\tnonsky?: 1 | 0;\r\n\t/** Has no effect on Grass-type Pokemon, Pokemon with the Overcoat Ability, and Pokemon holding Safety Goggles. */\r\n\tpowder?: 1 | 0;\r\n\t/** Blocked by Detect, Protect, Spiky Shield, and if not a Status move, King's Shield. */\r\n\tprotect?: 1 | 0;\r\n\t/** Power is multiplied by 1.5 when used by a Pokemon with the Mega Launcher Ability. */\r\n\tpulse?: 1 | 0;\r\n\t/** Power is multiplied by 1.2 when used by a Pokemon with the Iron Fist Ability. */\r\n\tpunch?: 1 | 0;\r\n\t/** If this move is successful, the user must recharge on the following turn and cannot make a move. */\r\n\trecharge?: 1 | 0;\r\n\t/** Bounced back to the original user by Magic Coat or the Magic Bounce Ability. */\r\n\treflectable?: 1 | 0;\r\n\t/** Power is multiplied by 1.5 when used by a Pokemon with the Sharpness Ability. */\r\n\tslicing?: 1 | 0;\r\n\t/** Can be stolen from the original user and instead used by another Pokemon using Snatch. */\r\n\tsnatch?: 1 | 0;\r\n\t/** Has no effect on Pokemon with the Soundproof Ability. */\r\n\tsound?: 1 | 0;\r\n\t/** Activates the effects of the Wind Power and Wind Rider Abilities. */\r\n\twind?: 1 | 0;\r\n}\r\n\r\ntype MoveTarget = 'normal' | 'any' | 'adjacentAlly' | 'adjacentFoe' | 'adjacentAllyOrSelf' | // single-target\r\n\t'self' | 'randomNormal' | // single-target, automatic\r\n\t'allAdjacent' | 'allAdjacentFoes' | // spread\r\n\t'allySide' | 'foeSide' | 'all'; // side and field\r\n\r\nclass Move implements Effect {\r\n\t// effect\r\n\treadonly effectType = 'Move';\r\n\treadonly id: ID;\r\n\treadonly name: string;\r\n\treadonly gen: number;\r\n\treadonly exists: boolean;\r\n\r\n\treadonly basePower: number;\r\n\treadonly accuracy: number | true;\r\n\treadonly pp: number;\r\n\treadonly type: TypeName;\r\n\treadonly category: 'Physical' | 'Special' | 'Status';\r\n\treadonly priority: number;\r\n\treadonly target: MoveTarget;\r\n\treadonly pressureTarget: MoveTarget;\r\n\treadonly flags: Readonly<MoveFlags>;\r\n\treadonly critRatio: number;\r\n\r\n\treadonly desc: string;\r\n\treadonly shortDesc: string;\r\n\treadonly isNonstandard: string | null;\r\n\treadonly isZ: ID;\r\n\treadonly zMove?: {\r\n\t\tbasePower?: number,\r\n\t\teffect?: string,\r\n\t\tboost?: {[stat in StatName]?: number},\r\n\t};\r\n\treadonly isMax: boolean | string;\r\n\treadonly maxMove: {basePower: number};\r\n\treadonly ohko: true | 'Ice' | null;\r\n\treadonly recoil: number[] | null;\r\n\treadonly heal: number[] | null;\r\n\treadonly multihit: number[] | number | null;\r\n\treadonly hasCrashDamage: boolean;\r\n\treadonly noPPBoosts: boolean;\r\n\treadonly secondaries: ReadonlyArray<any> | null;\r\n\treadonly noSketch: boolean;\r\n\treadonly num: number;\r\n\r\n\tconstructor(id: ID, name: string, data: any) {\r\n\t\tif (!data || typeof data !== 'object') data = {};\r\n\t\tif (data.name) name = data.name;\r\n\t\tthis.name = Dex.sanitizeName(name);\r\n\t\tthis.id = id;\r\n\t\tthis.gen = data.gen || 0;\r\n\t\tthis.exists = ('exists' in data ? !!data.exists : true);\r\n\r\n\t\tthis.basePower = data.basePower || 0;\r\n\t\tthis.accuracy = data.accuracy || 0;\r\n\t\tthis.pp = data.pp || 1;\r\n\t\tthis.type = data.type || '???';\r\n\t\tthis.category = data.category || 'Physical';\r\n\t\tthis.priority = data.priority || 0;\r\n\t\tthis.target = data.target || 'normal';\r\n\t\tthis.pressureTarget = data.pressureTarget || this.target;\r\n\t\tthis.flags = data.flags || {};\r\n\t\tthis.critRatio = data.critRatio === 0 ? 0 : (data.critRatio || 1);\r\n\r\n\t\t// TODO: move to text.js\r\n\t\tthis.desc = data.desc;\r\n\t\tthis.shortDesc = data.shortDesc;\r\n\t\tthis.isNonstandard = data.isNonstandard || null;\r\n\t\tthis.isZ = data.isZ || '';\r\n\t\tthis.zMove = data.zMove || {};\r\n\t\tthis.ohko = data.ohko || null;\r\n\t\tthis.recoil = data.recoil || null;\r\n\t\tthis.heal = data.heal || null;\r\n\t\tthis.multihit = data.multihit || null;\r\n\t\tthis.hasCrashDamage = data.hasCrashDamage || false;\r\n\t\tthis.noPPBoosts = data.noPPBoosts || false;\r\n\t\tthis.secondaries = data.secondaries || (data.secondary ? [data.secondary] : null);\r\n\t\tthis.noSketch = !!data.noSketch;\r\n\r\n\t\tthis.isMax = data.isMax || false;\r\n\t\tthis.maxMove = data.maxMove || {basePower: 0};\r\n\t\tif (this.category !== 'Status' && !this.maxMove?.basePower) {\r\n\t\t\tif (this.isZ || this.isMax) {\r\n\t\t\t\tthis.maxMove = {basePower: 1};\r\n\t\t\t} else if (!this.basePower) {\r\n\t\t\t\tthis.maxMove = {basePower: 100};\r\n\t\t\t} else if (['Fighting', 'Poison'].includes(this.type)) {\r\n\t\t\t\tif (this.basePower >= 150) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 100};\r\n\t\t\t\t} else if (this.basePower >= 110) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 95};\r\n\t\t\t\t} else if (this.basePower >= 75) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 90};\r\n\t\t\t\t} else if (this.basePower >= 65) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 85};\r\n\t\t\t\t} else if (this.basePower >= 55) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 80};\r\n\t\t\t\t} else if (this.basePower >= 45) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 75};\r\n\t\t\t\t} else  {\r\n\t\t\t\t\tthis.maxMove = {basePower: 70};\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.basePower >= 150) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 150};\r\n\t\t\t\t} else if (this.basePower >= 110) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 140};\r\n\t\t\t\t} else if (this.basePower >= 75) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 130};\r\n\t\t\t\t} else if (this.basePower >= 65) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 120};\r\n\t\t\t\t} else if (this.basePower >= 55) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 110};\r\n\t\t\t\t} else if (this.basePower >= 45) {\r\n\t\t\t\t\tthis.maxMove = {basePower: 100};\r\n\t\t\t\t} else  {\r\n\t\t\t\t\tthis.maxMove = {basePower: 90};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.category !== 'Status' && !this.isZ && !this.isMax) {\r\n\t\t\tlet basePower = this.basePower;\r\n\t\t\tthis.zMove = {};\r\n\t\t\tif (Array.isArray(this.multihit)) basePower *= 3;\r\n\t\t\tif (!basePower) {\r\n\t\t\t\tthis.zMove.basePower = 100;\r\n\t\t\t} else if (basePower >= 140) {\r\n\t\t\t\tthis.zMove.basePower = 200;\r\n\t\t\t} else if (basePower >= 130) {\r\n\t\t\t\tthis.zMove.basePower = 195;\r\n\t\t\t} else if (basePower >= 120) {\r\n\t\t\t\tthis.zMove.basePower = 190;\r\n\t\t\t} else if (basePower >= 110) {\r\n\t\t\t\tthis.zMove.basePower = 185;\r\n\t\t\t} else if (basePower >= 100) {\r\n\t\t\t\tthis.zMove.basePower = 180;\r\n\t\t\t} else if (basePower >= 90) {\r\n\t\t\t\tthis.zMove.basePower = 175;\r\n\t\t\t} else if (basePower >= 80) {\r\n\t\t\t\tthis.zMove.basePower = 160;\r\n\t\t\t} else if (basePower >= 70) {\r\n\t\t\t\tthis.zMove.basePower = 140;\r\n\t\t\t} else if (basePower >= 60) {\r\n\t\t\t\tthis.zMove.basePower = 120;\r\n\t\t\t} else {\r\n\t\t\t\tthis.zMove.basePower = 100;\r\n\t\t\t}\r\n\t\t\tif (data.zMove) this.zMove.basePower = data.zMove.basePower;\r\n\t\t}\r\n\r\n\t\tthis.num = data.num || 0;\r\n\t\tif (!this.gen) {\r\n\t\t\tif (this.num >= 743) {\r\n\t\t\t\tthis.gen = 8;\r\n\t\t\t} else if (this.num >= 622) {\r\n\t\t\t\tthis.gen = 7;\r\n\t\t\t} else if (this.num >= 560) {\r\n\t\t\t\tthis.gen = 6;\r\n\t\t\t} else if (this.num >= 468) {\r\n\t\t\t\tthis.gen = 5;\r\n\t\t\t} else if (this.num >= 355) {\r\n\t\t\t\tthis.gen = 4;\r\n\t\t\t} else if (this.num >= 252) {\r\n\t\t\t\tthis.gen = 3;\r\n\t\t\t} else if (this.num >= 166) {\r\n\t\t\t\tthis.gen = 2;\r\n\t\t\t} else if (this.num >= 1) {\r\n\t\t\t\tthis.gen = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass Ability implements Effect {\r\n\t// effect\r\n\treadonly effectType = 'Ability';\r\n\treadonly id: ID;\r\n\treadonly name: string;\r\n\treadonly gen: number;\r\n\treadonly exists: boolean;\r\n\r\n\treadonly num: number;\r\n\treadonly shortDesc: string;\r\n\treadonly desc: string;\r\n\r\n\treadonly rating: number;\r\n\treadonly isPermanent: boolean;\r\n\treadonly isNonstandard: boolean;\r\n\r\n\tconstructor(id: ID, name: string, data: any) {\r\n\t\tif (!data || typeof data !== 'object') data = {};\r\n\t\tif (data.name) name = data.name;\r\n\t\tthis.name = Dex.sanitizeName(name);\r\n\t\tthis.id = id;\r\n\t\tthis.gen = data.gen || 0;\r\n\t\tthis.exists = ('exists' in data ? !!data.exists : true);\r\n\t\tthis.num = data.num || 0;\r\n\t\tthis.shortDesc = data.shortDesc || data.desc || '';\r\n\t\tthis.desc = data.desc || data.shortDesc || '';\r\n\t\tthis.rating = data.rating || 1;\r\n\t\tthis.isPermanent = !!data.isPermanent;\r\n\t\tthis.isNonstandard = !!data.isNonstandard;\r\n\t\tif (!this.gen) {\r\n\t\t\tif (this.num >= 234) {\r\n\t\t\t\tthis.gen = 8;\r\n\t\t\t} else if (this.num >= 192) {\r\n\t\t\t\tthis.gen = 7;\r\n\t\t\t} else if (this.num >= 165) {\r\n\t\t\t\tthis.gen = 6;\r\n\t\t\t} else if (this.num >= 124) {\r\n\t\t\t\tthis.gen = 5;\r\n\t\t\t} else if (this.num >= 77) {\r\n\t\t\t\tthis.gen = 4;\r\n\t\t\t} else if (this.num >= 1) {\r\n\t\t\t\tthis.gen = 3;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass Species implements Effect {\r\n\t// effect\r\n\treadonly effectType = 'Species';\r\n\treadonly id: ID;\r\n\treadonly name: string;\r\n\treadonly gen: number;\r\n\treadonly exists: boolean;\r\n\r\n\t// name\r\n\treadonly baseSpecies: string;\r\n\treadonly forme: string;\r\n\treadonly formeid: string;\r\n\treadonly spriteid: string;\r\n\treadonly baseForme: string;\r\n\r\n\t// basic data\r\n\treadonly num: number;\r\n\treadonly types: ReadonlyArray<TypeName>;\r\n\treadonly abilities: Readonly<{\r\n\t\t0: string, 1?: string, H?: string, S?: string,\r\n\t}>;\r\n\treadonly baseStats: Readonly<{\r\n\t\thp: number, atk: number, def: number, spa: number, spd: number, spe: number,\r\n\t}>;\r\n\treadonly bst: number;\r\n\treadonly weightkg: number;\r\n\r\n\t// flavor data\r\n\treadonly heightm: number;\r\n\treadonly gender: GenderName;\r\n\treadonly color: string;\r\n\treadonly genderRatio: Readonly<{M: number, F: number}> | null;\r\n\treadonly eggGroups: ReadonlyArray<string>;\r\n\treadonly tags: ReadonlyArray<string>;\r\n\r\n\t// format data\r\n\treadonly otherFormes: ReadonlyArray<string> | null;\r\n\treadonly cosmeticFormes: ReadonlyArray<string> | null;\r\n\treadonly evos: ReadonlyArray<string> | null;\r\n\treadonly prevo: string;\r\n\treadonly evoType: 'trade' | 'useItem' | 'levelMove' | 'levelExtra' | 'levelFriendship' | 'levelHold' | 'other' | '';\r\n\treadonly evoLevel: number;\r\n\treadonly evoMove: string;\r\n\treadonly evoItem: string;\r\n\treadonly evoCondition: string;\r\n\treadonly requiredItems: ReadonlyArray<string>;\r\n\treadonly tier: string;\r\n\treadonly isTotem: boolean;\r\n\treadonly isMega: boolean;\r\n\treadonly isPrimal: boolean;\r\n\treadonly canGigantamax: boolean;\r\n\treadonly cannotDynamax: boolean;\r\n\treadonly forceTeraType: TypeName;\r\n\treadonly battleOnly: string | string[] | undefined;\r\n\treadonly isNonstandard: string | null;\r\n\treadonly unreleasedHidden: boolean | 'Past';\r\n\treadonly changesFrom: string | undefined;\r\n\r\n\tconstructor(id: ID, name: string, data: any) {\r\n\t\tif (!data || typeof data !== 'object') data = {};\r\n\t\tif (data.name) name = data.name;\r\n\t\tthis.name = Dex.sanitizeName(name);\r\n\t\tthis.id = id;\r\n\t\tthis.gen = data.gen || 0;\r\n\t\tthis.exists = ('exists' in data ? !!data.exists : true);\r\n\t\tthis.baseSpecies = data.baseSpecies || name;\r\n\t\tthis.forme = data.forme || '';\r\n\t\tconst baseId = toID(this.baseSpecies);\r\n\t\tthis.formeid = (baseId === this.id ? '' : '-' + toID(this.forme));\r\n\t\tthis.spriteid = baseId + this.formeid;\r\n\t\tif (this.spriteid.slice(-5) === 'totem') this.spriteid = this.spriteid.slice(0, -5);\r\n\t\tif (this.spriteid === 'greninja-bond') this.spriteid = 'greninja';\r\n\t\tif (this.spriteid.slice(-1) === '-') this.spriteid = this.spriteid.slice(0, -1);\r\n\t\tthis.baseForme = data.baseForme || '';\r\n\r\n\t\tthis.num = data.num || 0;\r\n\t\tthis.types = data.types || ['???'];\r\n\t\tthis.abilities = data.abilities || {0: \"No Ability\"};\r\n\t\tthis.baseStats = data.baseStats || {hp: 0, atk: 0, def: 0, spa: 0, spd: 0, spe: 0};\r\n\t\tthis.bst = this.baseStats.hp + this.baseStats.atk + this.baseStats.def +\r\n\t\t\tthis.baseStats.spa + this.baseStats.spd + this.baseStats.spe;\r\n\t\tthis.weightkg = data.weightkg || 0;\r\n\r\n\t\tthis.heightm = data.heightm || 0;\r\n\t\tthis.gender = data.gender || '';\r\n\t\tthis.color = data.color || '';\r\n\t\tthis.genderRatio = data.genderRatio || null;\r\n\t\tthis.eggGroups = data.eggGroups || [];\r\n\t\tthis.tags = data.tags || [];\r\n\r\n\t\tthis.otherFormes = data.otherFormes || null;\r\n\t\tthis.cosmeticFormes = data.cosmeticFormes || null;\r\n\t\tthis.evos = data.evos || null;\r\n\t\tthis.prevo = data.prevo || '';\r\n\t\tthis.evoType = data.evoType || '';\r\n\t\tthis.evoLevel = data.evoLevel || 0;\r\n\t\tthis.evoMove = data.evoMove || '';\r\n\t\tthis.evoItem = data.evoItem || '';\r\n\t\tthis.evoCondition = data.evoCondition || '';\r\n\t\tthis.requiredItems = data.requiredItems || (data.requiredItem ? [data.requiredItem] : []);\r\n\t\tthis.tier = data.tier || '';\r\n\r\n\t\tthis.isTotem = false;\r\n\t\tthis.isMega = !!(this.forme && ['-mega', '-megax', '-megay'].includes(this.formeid));\r\n\t\tthis.isPrimal = !!(this.forme && this.formeid === '-primal');\r\n\t\tthis.canGigantamax = !!data.canGigantamax;\r\n\t\tthis.cannotDynamax = !!data.cannotDynamax;\r\n\t\tthis.forceTeraType = data.forceTeraType || '';\r\n\t\tthis.battleOnly = data.battleOnly || undefined;\r\n\t\tthis.isNonstandard = data.isNonstandard || null;\r\n\t\tthis.unreleasedHidden = data.unreleasedHidden || false;\r\n\t\tthis.changesFrom = data.changesFrom || undefined;\r\n\t\tif (!this.gen) {\r\n\t\t\tif (this.num >= 906 || this.formeid.startsWith('-paldea')) {\r\n\t\t\t\tthis.gen = 9;\r\n\t\t\t} else if (this.num >= 810 || this.formeid.startsWith('-galar') || this.formeid.startsWith('-hisui')) {\r\n\t\t\t\tthis.gen = 8;\r\n\t\t\t} else if (this.num >= 722 || this.formeid === '-alola' || this.formeid === '-starter') {\r\n\t\t\t\tthis.gen = 7;\r\n\t\t\t} else if (this.isMega || this.isPrimal) {\r\n\t\t\t\tthis.gen = 6;\r\n\t\t\t\tthis.battleOnly = this.baseSpecies;\r\n\t\t\t} else if (this.formeid === '-totem' || this.formeid === '-alolatotem') {\r\n\t\t\t\tthis.gen = 7;\r\n\t\t\t\tthis.isTotem = true;\r\n\t\t\t} else if (this.num >= 650) {\r\n\t\t\t\tthis.gen = 6;\r\n\t\t\t} else if (this.num >= 494) {\r\n\t\t\t\tthis.gen = 5;\r\n\t\t\t} else if (this.num >= 387) {\r\n\t\t\t\tthis.gen = 4;\r\n\t\t\t} else if (this.num >= 252) {\r\n\t\t\t\tthis.gen = 3;\r\n\t\t\t} else if (this.num >= 152) {\r\n\t\t\t\tthis.gen = 2;\r\n\t\t\t} else if (this.num >= 1) {\r\n\t\t\t\tthis.gen = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\ninterface Type extends Effect {\r\n\tdamageTaken?: AnyObject;\r\n\tHPivs?: Partial<StatsTable>;\r\n\tHPdvs?: Partial<StatsTable>;\r\n}\r\n\r\nif (typeof require === 'function') {\r\n\t// in Node\r\n\t(global as any).BattleBaseSpeciesChart = BattleBaseSpeciesChart;\r\n\t(global as any).BattleNatures = BattleNatures;\r\n\t(global as any).PureEffect = PureEffect;\r\n\t(global as any).Species = Species;\r\n\t(global as any).Ability = Ability;\r\n\t(global as any).Item = Item;\r\n\t(global as any).Move = Move;\r\n}\r\n","/**\r\n * Battle log\r\n *\r\n * An exercise in minimalism! This is a dependency of the client, which\r\n * requires IE9+ and uses Preact, and the replay player, which requires\r\n * IE7+ and uses jQuery. Therefore, this has to be compatible with IE7+\r\n * and use the DOM directly!\r\n *\r\n * Special thanks to PPK for QuirksMode.org, one of the few resources\r\n * available for how to do web development in these conditions.\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license MIT\r\n */\r\n\r\nimport type {BattleScene} from './battle-animations';\r\n\r\n// Caja\r\ndeclare const html4: any;\r\ndeclare const html: any;\r\n\r\n// defined in battle-log-misc\r\ndeclare function MD5(input: string): string;\r\ndeclare function formatText(input: string, isTrusted?: boolean): string;\r\n\r\nexport class BattleLog {\r\n\telem: HTMLDivElement;\r\n\tinnerElem: HTMLDivElement;\r\n\tscene: BattleScene | null = null;\r\n\tpreemptElem: HTMLDivElement = null!;\r\n\tatBottom = true;\r\n\tskippedLines = false;\r\n\tclassName: string;\r\n\tbattleParser: BattleTextParser | null = null;\r\n\tjoinLeave: {\r\n\t\tjoins: string[],\r\n\t\tleaves: string[],\r\n\t\telement: HTMLDivElement,\r\n\t} | null = null;\r\n\tlastRename: {\r\n\t\tfrom: string,\r\n\t\tto: string,\r\n\t\telement: HTMLDivElement,\r\n\t} | null = null;\r\n\t/**\r\n\t * * -1 = spectator: \"Red sent out Pikachu!\" \"Blue's Eevee used Tackle!\"\r\n\t * * 0 = player 1: \"Go! Pikachu!\" \"The opposing Eevee used Tackle!\"\r\n\t * * 1 = player 2: \"Red sent out Pikachu!\" \"Eevee used Tackle!\"\r\n\t */\r\n\tperspective: -1 | 0 | 1 = -1;\r\n\tconstructor(elem: HTMLDivElement, scene?: BattleScene | null, innerElem?: HTMLDivElement) {\r\n\t\tthis.elem = elem;\r\n\r\n\t\tif (!innerElem) {\r\n\t\t\telem.setAttribute('role', 'log');\r\n\t\t\telem.innerHTML = '';\r\n\t\t\tinnerElem = document.createElement('div');\r\n\t\t\tinnerElem.className = 'inner message-log';\r\n\t\t\telem.appendChild(innerElem);\r\n\t\t}\r\n\t\tthis.innerElem = innerElem;\r\n\r\n\t\tif (scene) {\r\n\t\t\tthis.scene = scene;\r\n\t\t\tconst preemptElem = document.createElement('div');\r\n\t\t\tpreemptElem.className = 'inner-preempt message-log';\r\n\t\t\telem.appendChild(preemptElem);\r\n\t\t\tthis.preemptElem = preemptElem;\r\n\t\t\tthis.battleParser = new BattleTextParser();\r\n\t\t}\r\n\r\n\t\tthis.className = elem.className;\r\n\t\telem.onscroll = this.onScroll;\r\n\t}\r\n\tonScroll = () => {\r\n\t\tconst distanceFromBottom = this.elem.scrollHeight - this.elem.scrollTop - this.elem.clientHeight;\r\n\t\tthis.atBottom = (distanceFromBottom < 30);\r\n\t};\r\n\treset() {\r\n\t\tthis.innerElem.innerHTML = '';\r\n\t\tthis.atBottom = true;\r\n\t\tthis.skippedLines = false;\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.elem.onscroll = null;\r\n\t}\r\n\taddSeekEarlierButton() {\r\n\t\tif (this.skippedLines) return;\r\n\t\tthis.skippedLines = true;\r\n\t\tconst el = document.createElement('div');\r\n\t\tel.className = 'chat';\r\n\t\tel.innerHTML = '<button class=\"button earlier-button\"><i class=\"fa fa-caret-up\"></i><br />Earlier messages</button>';\r\n\t\tconst button = el.getElementsByTagName('button')[0];\r\n\t\tbutton?.addEventListener?.('click', e => {\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.scene?.battle.seekTurn(this.scene.battle.turn - 100);\r\n\t\t});\r\n\t\tthis.addNode(el);\r\n\t}\r\n\tadd(args: Args, kwArgs?: KWArgs, preempt?: boolean) {\r\n\t\tif (kwArgs?.silent) return;\r\n\t\tif (this.scene?.battle.seeking) {\r\n\t\t\tconst battle = this.scene.battle;\r\n\t\t\tif (battle.stepQueue.length > 2000) {\r\n\t\t\t\t// adding elements gets slower and slower the more there are\r\n\t\t\t\t// (so showing 100 turns takes around 2 seconds, and 1000 turns takes around a minute)\r\n\t\t\t\t// capping at 100 turns makes everything _reasonably_ snappy\r\n\t\t\t\tif (\r\n\t\t\t\t\tbattle.seeking === Infinity ?\r\n\t\t\t\t\t\tbattle.currentStep < battle.stepQueue.length - 2000 :\r\n\t\t\t\t\t\tbattle.turn < battle.seeking! - 100\r\n\t\t\t\t) {\r\n\t\t\t\t\tthis.addSeekEarlierButton();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet divClass = 'chat';\r\n\t\tlet divHTML = '';\r\n\t\tlet noNotify: boolean | undefined;\r\n\t\tif (!['join', 'j', 'leave', 'l'].includes(args[0])) this.joinLeave = null;\r\n\t\tif (!['name', 'n'].includes(args[0])) this.lastRename = null;\r\n\t\tswitch (args[0]) {\r\n\t\tcase 'chat': case 'c': case 'c:':\r\n\t\t\tlet battle = this.scene?.battle;\r\n\t\t\tlet name;\r\n\t\t\tlet message;\r\n\t\t\tif (args[0] === 'c:') {\r\n\t\t\t\tname = args[2];\r\n\t\t\t\tmessage = args[3];\r\n\t\t\t} else {\r\n\t\t\t\tname = args[1];\r\n\t\t\t\tmessage = args[2];\r\n\t\t\t}\r\n\t\t\tlet rank = name.charAt(0);\r\n\t\t\tif (battle?.ignoreSpects && ' +'.includes(rank)) return;\r\n\t\t\tif (battle?.ignoreOpponent) {\r\n\t\t\t\tif ('\\u2605\\u2606'.includes(rank) && toUserid(name) !== app.user.get('userid')) return;\r\n\t\t\t}\r\n\t\t\tif (window.app?.ignore?.[toUserid(name)] && ' +\\u2605\\u2606'.includes(rank)) return;\r\n\t\t\tlet isHighlighted = window.app?.rooms?.[battle!.roomid].getHighlight(message);\r\n\t\t\t[divClass, divHTML, noNotify] = this.parseChatMessage(message, name, '', isHighlighted);\r\n\t\t\tif (!noNotify && isHighlighted) {\r\n\t\t\t\tlet notifyTitle = \"Mentioned by \" + name + \" in \" + battle!.roomid;\r\n\t\t\t\tapp.rooms[battle!.roomid].notifyOnce(notifyTitle, \"\\\"\" + message + \"\\\"\", 'highlight');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'join': case 'j': case 'leave': case 'l': {\r\n\t\t\tconst user = BattleTextParser.parseNameParts(args[1]);\r\n\t\t\tif (battle?.ignoreSpects && ' +'.includes(user.group)) return;\r\n\t\t\tconst formattedUser = user.group + user.name;\r\n\t\t\tconst isJoin = (args[0].charAt(0) === 'j');\r\n\t\t\tif (!this.joinLeave) {\r\n\t\t\t\tthis.joinLeave = {\r\n\t\t\t\t\tjoins: [],\r\n\t\t\t\t\tleaves: [],\r\n\t\t\t\t\telement: document.createElement('div'),\r\n\t\t\t\t};\r\n\t\t\t\tthis.joinLeave.element.className = 'chat';\r\n\t\t\t}\r\n\r\n\t\t\tif (isJoin && this.joinLeave.leaves.includes(formattedUser)) {\r\n\t\t\t\tthis.joinLeave.leaves.splice(this.joinLeave.leaves.indexOf(formattedUser), 1);\r\n\t\t\t} else {\r\n\t\t\t\tthis.joinLeave[isJoin ? \"joins\" : \"leaves\"].push(formattedUser);\r\n\t\t\t}\r\n\r\n\t\t\tlet buf = '';\r\n\t\t\tif (this.joinLeave.joins.length) {\r\n\t\t\t\tbuf += `${this.textList(this.joinLeave.joins)} joined`;\r\n\t\t\t}\r\n\t\t\tif (this.joinLeave.leaves.length) {\r\n\t\t\t\tif (this.joinLeave.joins.length) buf += `; `;\r\n\t\t\t\tbuf += `${this.textList(this.joinLeave.leaves)} left`;\r\n\t\t\t}\r\n\t\t\tthis.joinLeave.element.innerHTML = `<small>${BattleLog.escapeHTML(buf)}</small>`;\r\n\t\t\t(preempt ? this.preemptElem : this.innerElem).appendChild(this.joinLeave.element);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcase 'name': case 'n': {\r\n\t\t\tconst user = BattleTextParser.parseNameParts(args[1]);\r\n\t\t\tif (toID(args[2]) === toID(user.name)) return;\r\n\t\t\tif (!this.lastRename || toID(this.lastRename.to) !== toID(user.name)) {\r\n\t\t\t\tthis.lastRename = {\r\n\t\t\t\t\tfrom: args[2],\r\n\t\t\t\t\tto: '',\r\n\t\t\t\t\telement: document.createElement('div'),\r\n\t\t\t\t};\r\n\t\t\t\tthis.lastRename.element.className = 'chat';\r\n\t\t\t}\r\n\t\t\tthis.lastRename.to = user.group + user.name;\r\n\t\t\tthis.lastRename.element.innerHTML = `<small>${BattleLog.escapeHTML(this.lastRename.to)} renamed from ${BattleLog.escapeHTML(this.lastRename.from)}.</small>`;\r\n\t\t\t(preempt ? this.preemptElem : this.innerElem).appendChild(this.lastRename.element);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcase 'chatmsg': case '':\r\n\t\t\tdivHTML = BattleLog.escapeHTML(args[1]);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'chatmsg-raw': case 'raw': case 'html':\r\n\t\t\tdivHTML = BattleLog.sanitizeHTML(args[1]);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'uhtml': case 'uhtmlchange':\r\n\t\t\tthis.changeUhtml(args[1], args[2], args[0] === 'uhtml');\r\n\t\t\treturn ['', ''];\r\n\r\n\t\tcase 'error': case 'inactive': case 'inactiveoff':\r\n\t\t\tdivClass = 'chat message-error';\r\n\t\t\tdivHTML = BattleLog.escapeHTML(args[1]);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'bigerror':\r\n\t\t\tthis.message('<div class=\"broadcast-red\">' + BattleLog.escapeHTML(args[1]).replace(/\\|/g, '<br />') + '</div>');\r\n\t\t\treturn;\r\n\r\n\t\tcase 'pm':\r\n\t\t\tdivHTML = '<strong>' + BattleLog.escapeHTML(args[1]) + ':</strong> <span class=\"message-pm\"><i style=\"cursor:pointer\" onclick=\"selectTab(\\'lobby\\');rooms.lobby.popupOpen(\\'' + BattleLog.escapeHTML(args[2], true) + '\\')\">(Private to ' + BattleLog.escapeHTML(args[3]) + ')</i> ' + BattleLog.parseMessage(args[4]) + '</span>';\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'askreg':\r\n\t\t\tthis.addDiv('chat', '<div class=\"broadcast-blue\"><b>Register an account to protect your ladder rating!</b><br /><button name=\"register\" value=\"' + BattleLog.escapeHTML(args[1]) + '\"><b>Register</b></button></div>');\r\n\t\t\treturn;\r\n\r\n\t\tcase 'unlink': {\r\n\t\t\t// |unlink| is deprecated in favor of |hidelines|\r\n\t\t\tconst user = toID(args[2]) || toID(args[1]);\r\n\t\t\tthis.unlinkChatFrom(user);\r\n\t\t\tif (args[2]) {\r\n\t\t\t\tconst lineCount = parseInt(args[3], 10);\r\n\t\t\t\tthis.hideChatFrom(user, true, lineCount);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcase 'hidelines': {\r\n\t\t\tconst user = toID(args[2]);\r\n\t\t\tthis.unlinkChatFrom(user);\r\n\t\t\tif (args[1] !== 'unlink') {\r\n\t\t\t\tconst lineCount = parseInt(args[3], 10);\r\n\t\t\t\tthis.hideChatFrom(user, args[1] === 'hide', lineCount);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcase 'debug':\r\n\t\t\tdivClass = 'debug';\r\n\t\t\tdivHTML = '<div class=\"chat\"><small style=\"color:#999\">[DEBUG] ' + BattleLog.escapeHTML(args[1]) + '.</small></div>';\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'notify':\r\n\t\t\tconst title = args[1];\r\n\t\t\tconst body = args[2];\r\n\t\t\tconst roomid = this.scene?.battle.roomid;\r\n\t\t\tif (!roomid) break;\r\n\t\t\tapp.rooms[roomid].notifyOnce(title, body, 'highlight');\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'seed': case 'choice': case ':': case 'timer': case 't:':\r\n\t\tcase 'J': case 'L': case 'N': case 'spectator': case 'spectatorleave':\r\n\t\tcase 'initdone':\r\n\t\t\treturn;\r\n\r\n\t\tdefault:\r\n\t\t\tthis.addBattleMessage(args, kwArgs);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (divHTML) this.addDiv(divClass, divHTML, preempt);\r\n\t}\r\n\taddBattleMessage(args: Args, kwArgs?: KWArgs) {\r\n\t\tswitch (args[0]) {\r\n\t\tcase 'warning':\r\n\t\t\tthis.message('<strong>Warning:</strong> ' + BattleLog.escapeHTML(args[1]));\r\n\t\t\tthis.message(`Bug? Report it to <a href=\"http://www.smogon.com/forums/showthread.php?t=3453192\">the replay viewer's Smogon thread</a>`);\r\n\t\t\tif (this.scene) this.scene.wait(1000);\r\n\t\t\treturn;\r\n\r\n\t\tcase 'variation':\r\n\t\t\tthis.addDiv('', '<small>Variation: <em>' + BattleLog.escapeHTML(args[1]) + '</em></small>');\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'rule':\r\n\t\t\tconst ruleArgs = args[1].split(': ');\r\n\t\t\tthis.addDiv('', '<small><em>' + BattleLog.escapeHTML(ruleArgs[0]) + (ruleArgs[1] ? ':' : '') + '</em> ' + BattleLog.escapeHTML(ruleArgs[1] || '') + '</small>');\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'rated':\r\n\t\t\tthis.addDiv('rated', '<strong>' + (BattleLog.escapeHTML(args[1]) || 'Rated battle') + '</strong>');\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'tier':\r\n\t\t\tthis.addDiv('', '<small>Format:</small> <br /><strong>' + BattleLog.escapeHTML(args[1]) + '</strong>');\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'turn':\r\n\t\t\tconst h2elem = document.createElement('h2');\r\n\t\t\th2elem.className = 'battle-history';\r\n\t\t\tlet turnMessage;\r\n\t\t\tif (this.battleParser) {\r\n\t\t\t\tturnMessage = this.battleParser.parseArgs(args, {}).trim();\r\n\t\t\t\tif (!turnMessage.startsWith('==') || !turnMessage.endsWith('==')) {\r\n\t\t\t\t\tthrow new Error(\"Turn message must be a heading.\");\r\n\t\t\t\t}\r\n\t\t\t\tturnMessage = turnMessage.slice(2, -2).trim();\r\n\t\t\t\tthis.battleParser.curLineSection = 'break';\r\n\t\t\t} else {\r\n\t\t\t\tturnMessage = `Turn ${args[1]}`;\r\n\t\t\t}\r\n\t\t\th2elem.innerHTML = BattleLog.escapeHTML(turnMessage);\r\n\t\t\tthis.addSpacer();\r\n\t\t\tthis.addNode(h2elem);\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tlet line = null;\r\n\t\t\tif (this.battleParser) {\r\n\t\t\t\tline = this.battleParser.parseArgs(args, kwArgs || {}, true);\r\n\t\t\t}\r\n\t\t\tif (line === null) {\r\n\t\t\t\tthis.addDiv('chat message-error', 'Unrecognized: |' + BattleLog.escapeHTML(args.join('|')));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!line) return;\r\n\t\t\tthis.message(...this.parseLogMessage(line));\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\ttextList(list: string[]) {\r\n\t\tlet message = '';\r\n\t\tconst listNoDuplicates: string[] = [];\r\n\t\tfor (const user of list) {\r\n\t\t\tif (!listNoDuplicates.includes(user)) listNoDuplicates.push(user);\r\n\t\t}\r\n\t\tlist = listNoDuplicates;\r\n\r\n\t\tif (list.length === 1) return list[0];\r\n\t\tif (list.length === 2) return `${list[0]} and ${list[1]}`;\r\n\t\tfor (let i = 0; i < list.length - 1; i++) {\r\n\t\t\tif (i >= 5) {\r\n\t\t\t\treturn `${message}and ${list.length - 5} others`;\r\n\t\t\t}\r\n\t\t\tmessage += `${list[i]}, `;\r\n\t\t}\r\n\t\treturn `${message}and ${list[list.length - 1]}`;\r\n\t\treturn message;\r\n\t}\r\n\t/**\r\n\t * To avoid trolling with nicknames, we can't just run this through\r\n\t * parseMessage\r\n\t */\r\n\tparseLogMessage(message: string): [string, string] {\r\n\t\tconst messages = message.split('\\n').map(line => {\r\n\t\t\tline = BattleLog.escapeHTML(line);\r\n\t\t\tline = line.replace(/\\*\\*(.*)\\*\\*/, '<strong>$1</strong>');\r\n\t\t\tline = line.replace(/\\|\\|([^\\|]*)\\|\\|([^\\|]*)\\|\\|/, '<abbr title=\"$1\">$2</abbr>');\r\n\t\t\tif (line.startsWith('  ')) line = '<small>' + line.trim() + '</small>';\r\n\t\t\treturn line;\r\n\t\t});\r\n\t\treturn [\r\n\t\t\tmessages.join('<br />'),\r\n\t\t\tmessages.filter(line => !line.startsWith('<small>[')).join('<br />'),\r\n\t\t];\r\n\t}\r\n\tmessage(message: string, sceneMessage = message) {\r\n\t\tif (this.scene) this.scene.message(sceneMessage);\r\n\t\tthis.addDiv('battle-history', message);\r\n\t}\r\n\taddNode(node: HTMLElement, preempt?: boolean) {\r\n\t\t(preempt ? this.preemptElem : this.innerElem).appendChild(node);\r\n\t\tif (this.atBottom) {\r\n\t\t\tthis.elem.scrollTop = this.elem.scrollHeight;\r\n\t\t}\r\n\t}\r\n\tupdateScroll() {\r\n\t\tif (this.atBottom) {\r\n\t\t\tthis.elem.scrollTop = this.elem.scrollHeight;\r\n\t\t}\r\n\t}\r\n\taddDiv(className: string, innerHTML: string, preempt?: boolean) {\r\n\t\tconst el = document.createElement('div');\r\n\t\tel.className = className;\r\n\t\tel.innerHTML = innerHTML;\r\n\t\tthis.addNode(el, preempt);\r\n\t}\r\n\tprependDiv(className: string, innerHTML: string, preempt?: boolean) {\r\n\t\tconst el = document.createElement('div');\r\n\t\tel.className = className;\r\n\t\tel.innerHTML = innerHTML;\r\n\t\tif (this.innerElem.childNodes.length) {\r\n\t\t\tthis.innerElem.insertBefore(el, this.innerElem.childNodes[0]);\r\n\t\t} else {\r\n\t\t\tthis.innerElem.appendChild(el);\r\n\t\t}\r\n\t\tthis.updateScroll();\r\n\t}\r\n\taddSpacer() {\r\n\t\tthis.addDiv('spacer battle-history', '<br />');\r\n\t}\r\n\tchangeUhtml(id: string, htmlSrc: string, forceAdd?: boolean) {\r\n\t\tid = toID(id);\r\n\t\tconst classContains = ' uhtml-' + id + ' ';\r\n\t\tlet elements = [] as HTMLDivElement[];\r\n\t\tfor (const node of this.innerElem.childNodes as any) {\r\n\t\t\tif (node.className && (' ' + node.className + ' ').includes(classContains)) {\r\n\t\t\t\telements.push(node);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.preemptElem) {\r\n\t\t\tfor (const node of this.preemptElem.childNodes as any) {\r\n\t\t\t\tif (node.className && (' ' + node.className + ' ').includes(classContains)) {\r\n\t\t\t\t\telements.push(node);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (htmlSrc && elements.length && !forceAdd) {\r\n\t\t\tfor (const element of elements) {\r\n\t\t\t\telement.innerHTML = BattleLog.sanitizeHTML(htmlSrc);\r\n\t\t\t}\r\n\t\t\tthis.updateScroll();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfor (const element of elements) {\r\n\t\t\telement.parentElement!.removeChild(element);\r\n\t\t}\r\n\t\tif (!htmlSrc) return;\r\n\t\tif (forceAdd) {\r\n\t\t\tthis.addDiv('notice uhtml-' + id, BattleLog.sanitizeHTML(htmlSrc));\r\n\t\t} else {\r\n\t\t\tthis.prependDiv('notice uhtml-' + id, BattleLog.sanitizeHTML(htmlSrc));\r\n\t\t}\r\n\t}\r\n\thideChatFrom(userid: ID, showRevealButton = true, lineCount = 0) {\r\n\t\tconst classStart = 'chat chatmessage-' + userid + ' ';\r\n\t\tlet nodes: HTMLElement[] = [];\r\n\t\tfor (const node of this.innerElem.childNodes as any as HTMLElement[]) {\r\n\t\t\tif (node.className && (node.className + ' ').startsWith(classStart)) {\r\n\t\t\t\tnodes.push(node);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.preemptElem) {\r\n\t\t\tfor (const node of this.preemptElem.childNodes as any as HTMLElement[]) {\r\n\t\t\t\tif (node.className && (node.className + ' ').startsWith(classStart)) {\r\n\t\t\t\t\tnodes.push(node);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (lineCount) nodes = nodes.slice(-lineCount);\r\n\r\n\t\tfor (const node of nodes) {\r\n\t\t\tnode.style.display = 'none';\r\n\t\t\tnode.className = 'revealed ' + node.className;\r\n\t\t}\r\n\t\tif (!nodes.length || !showRevealButton) return;\r\n\t\tconst button = document.createElement('button');\r\n\t\tbutton.name = 'toggleMessages';\r\n\t\tbutton.value = userid;\r\n\t\tbutton.className = 'subtle';\r\n\t\tbutton.innerHTML = `<small>(${nodes.length} line${nodes.length > 1 ? 's' : ''} from ${userid} hidden)</small>`;\r\n\t\tconst lastNode = nodes[nodes.length - 1];\r\n\t\tlastNode.appendChild(document.createTextNode(' '));\r\n\t\tlastNode.appendChild(button);\r\n\t}\r\n\r\n\tstatic unlinkNodeList(nodeList: ArrayLike<HTMLElement>, classStart: string) {\r\n\t\tfor (const node of nodeList as HTMLElement[]) {\r\n\t\t\tif (node.className && (node.className + ' ').startsWith(classStart)) {\r\n\t\t\t\tconst linkList = node.getElementsByTagName('a');\r\n\t\t\t\t// iterate in reverse because linkList will update as links are removed\r\n\t\t\t\tfor (let i = linkList.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tconst linkNode = linkList[i];\r\n\t\t\t\t\tconst parent = linkNode.parentElement;\r\n\t\t\t\t\tif (!parent) continue;\r\n\t\t\t\t\tfor (const childNode of linkNode.childNodes as any) {\r\n\t\t\t\t\t\tparent.insertBefore(childNode, linkNode);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparent.removeChild(linkNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tunlinkChatFrom(userid: ID) {\r\n\t\tconst classStart = 'chat chatmessage-' + userid + ' ';\r\n\t\tconst innerNodeList = this.innerElem.childNodes;\r\n\t\tBattleLog.unlinkNodeList(innerNodeList as NodeListOf<HTMLElement>, classStart);\r\n\r\n\t\tif (this.preemptElem) {\r\n\t\t\tconst preemptNodeList = this.preemptElem.childNodes;\r\n\t\t\tBattleLog.unlinkNodeList(preemptNodeList as NodeListOf<HTMLElement>, classStart);\r\n\t\t}\r\n\t}\r\n\r\n\tpreemptCatchup() {\r\n\t\tif (!this.preemptElem.firstChild) return;\r\n\t\tthis.innerElem.appendChild(this.preemptElem.firstChild);\r\n\t}\r\n\r\n\tstatic escapeFormat(formatid: string): string {\r\n\t\tlet atIndex = formatid.indexOf('@@@');\r\n\t\tif (atIndex >= 0) {\r\n\t\t\treturn this.escapeFormat(formatid.slice(0, atIndex)) +\r\n\t\t\t\t'<br />Custom rules: ' + this.escapeHTML(formatid.slice(atIndex + 3));\r\n\t\t}\r\n\t\tif (window.BattleFormats && BattleFormats[formatid]) {\r\n\t\t\treturn this.escapeHTML(BattleFormats[formatid].name);\r\n\t\t}\r\n\t\tif (window.NonBattleGames && NonBattleGames[formatid]) {\r\n\t\t\treturn this.escapeHTML(NonBattleGames[formatid]);\r\n\t\t}\r\n\t\treturn this.escapeHTML(formatid);\r\n\t}\r\n\r\n\tstatic escapeHTML(str: string, jsEscapeToo?: boolean) {\r\n\t\tif (typeof str !== 'string') return '';\r\n\t\tstr = str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\r\n\t\tif (jsEscapeToo) str = str.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, '\\\\\\'');\r\n\t\treturn str;\r\n\t}\r\n\r\n\tstatic unescapeHTML(str: string) {\r\n\t\tstr = (str ? '' + str : '');\r\n\t\treturn str.replace(/&quot;/g, '\"').replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&amp;/g, '&');\r\n\t}\r\n\r\n\tstatic colorCache: {[userid: string]: string} = {};\r\n\r\n\t/** @deprecated */\r\n\tstatic hashColor(name: ID) {\r\n\t\treturn `color:${this.usernameColor(name)};`;\r\n\t}\r\n\r\n\tstatic usernameColor(name: ID) {\r\n\t\tif (this.colorCache[name]) return this.colorCache[name];\r\n\t\tlet hash;\r\n\t\tif (Config.customcolors[name]) {\r\n\t\t\thash = MD5(Config.customcolors[name]);\r\n\t\t} else {\r\n\t\t\thash = MD5(name);\r\n\t\t}\r\n\t\tlet H = parseInt(hash.substr(4, 4), 16) % 360; // 0 to 360\r\n\t\tlet S = parseInt(hash.substr(0, 4), 16) % 50 + 40; // 40 to 89\r\n\t\tlet L = Math.floor(parseInt(hash.substr(8, 4), 16) % 20 + 30); // 30 to 49\r\n\r\n\t\tlet {R, G, B} = this.HSLToRGB(H, S, L);\r\n\t\tlet lum = R * R * R * 0.2126 + G * G * G * 0.7152 + B * B * B * 0.0722; // 0.013 (dark blue) to 0.737 (yellow)\r\n\r\n\t\tlet HLmod = (lum - 0.2) * -150; // -80 (yellow) to 28 (dark blue)\r\n\t\tif (HLmod > 18) HLmod = (HLmod - 18) * 2.5;\r\n\t\telse if (HLmod < 0) HLmod = (HLmod - 0) / 3;\r\n\t\telse HLmod = 0;\r\n\t\t// let mod = ';border-right: ' + Math.abs(HLmod) + 'px solid ' + (HLmod > 0 ? 'red' : '#0088FF');\r\n\t\tlet Hdist = Math.min(Math.abs(180 - H), Math.abs(240 - H));\r\n\t\tif (Hdist < 15) {\r\n\t\t\tHLmod += (15 - Hdist) / 3;\r\n\t\t}\r\n\r\n\t\tL += HLmod;\r\n\r\n\t\tlet {R: r, G: g, B: b} = this.HSLToRGB(H, S, L);\r\n\t\tconst toHex = (x: number) => {\r\n\t\t\tconst hex = Math.round(x * 255).toString(16);\r\n\t\t\treturn hex.length === 1 ? '0' + hex : hex;\r\n\t\t};\r\n\t\tthis.colorCache[name] = `#${toHex(r)}${toHex(g)}${toHex(b)}`;\r\n\t\treturn this.colorCache[name];\r\n\t}\r\n\r\n\tstatic HSLToRGB(H: number, S: number, L: number) {\r\n\t\tlet C = (100 - Math.abs(2 * L - 100)) * S / 100 / 100;\r\n\t\tlet X = C * (1 - Math.abs((H / 60) % 2 - 1));\r\n\t\tlet m = L / 100 - C / 2;\r\n\r\n\t\tlet R1;\r\n\t\tlet G1;\r\n\t\tlet B1;\r\n\t\tswitch (Math.floor(H / 60)) {\r\n\t\tcase 1: R1 = X; G1 = C; B1 = 0; break;\r\n\t\tcase 2: R1 = 0; G1 = C; B1 = X; break;\r\n\t\tcase 3: R1 = 0; G1 = X; B1 = C; break;\r\n\t\tcase 4: R1 = X; G1 = 0; B1 = C; break;\r\n\t\tcase 5: R1 = C; G1 = 0; B1 = X; break;\r\n\t\tcase 0: default: R1 = C; G1 = X; B1 = 0; break;\r\n\t\t}\r\n\t\tlet R = R1 + m;\r\n\t\tlet G = G1 + m;\r\n\t\tlet B = B1 + m;\r\n\t\treturn {R, G, B};\r\n\t}\r\n\r\n\tstatic prefs(name: string) {\r\n\t\t// @ts-ignore\r\n\t\tif (window.Storage?.prefs) return Storage.prefs(name);\r\n\t\t// @ts-ignore\r\n\t\tif (window.PS) return PS.prefs[name];\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tparseChatMessage(\r\n\t\tmessage: string, name: string, timestamp: string, isHighlighted?: boolean\r\n\t): [string, string, boolean?] {\r\n\t\tlet showMe = !BattleLog.prefs('chatformatting')?.hideme;\r\n\t\tlet group = ' ';\r\n\t\tif (!/[A-Za-z0-9]/.test(name.charAt(0))) {\r\n\t\t\t// Backwards compatibility\r\n\t\t\tgroup = name.charAt(0);\r\n\t\t\tname = name.substr(1);\r\n\t\t}\r\n\t\tconst colorStyle = ` style=\"color:${BattleLog.usernameColor(toID(name))}\"`;\r\n\t\tconst clickableName = `<small>${BattleLog.escapeHTML(group)}</small><span class=\"username\" data-name=\"${BattleLog.escapeHTML(name)}\">${BattleLog.escapeHTML(name)}</span>`;\r\n\t\tlet hlClass = isHighlighted ? ' highlighted' : '';\r\n\t\tlet isMine = (window.app?.user?.get('name') === name) || (window.PS?.user.name === name);\r\n\t\tlet mineClass = isMine ? ' mine' : '';\r\n\r\n\t\tlet cmd = '';\r\n\t\tlet target = '';\r\n\t\tif (message.charAt(0) === '/') {\r\n\t\t\tif (message.charAt(1) === '/') {\r\n\t\t\t\tmessage = message.slice(1);\r\n\t\t\t} else {\r\n\t\t\t\tlet spaceIndex = message.indexOf(' ');\r\n\t\t\t\tcmd = (spaceIndex >= 0 ? message.slice(1, spaceIndex) : message.slice(1));\r\n\t\t\t\tif (spaceIndex >= 0) target = message.slice(spaceIndex + 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswitch (cmd) {\r\n\t\tcase 'me':\r\n\t\tcase 'mee':\r\n\t\t\tlet parsedMessage = BattleLog.parseMessage(' ' + target);\r\n\t\t\tif (cmd === 'mee') parsedMessage = parsedMessage.slice(1);\r\n\t\t\tif (!showMe) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t'chat chatmessage-' + toID(name) + hlClass + mineClass,\r\n\t\t\t\t\t`${timestamp}<strong${colorStyle}>${clickableName}:</strong> <em>/me${parsedMessage}</em>`,\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\treturn [\r\n\t\t\t\t'chat chatmessage-' + toID(name) + hlClass + mineClass,\r\n\t\t\t\t`${timestamp}<em><i><strong${colorStyle}>&bull; ${clickableName}</strong>${parsedMessage}</i></em>`,\r\n\t\t\t];\r\n\t\tcase 'invite':\r\n\t\t\tlet roomid = toRoomid(target);\r\n\t\t\treturn [\r\n\t\t\t\t'chat',\r\n\t\t\t\t`${timestamp}<em>${clickableName} invited you to join the room \"${roomid}\"</em>' +\r\n\t\t\t\t'<div class=\"notice\"><button name=\"joinRoom\" value=\"${roomid}\">Join ${roomid}</button></div>`,\r\n\t\t\t];\r\n\t\tcase 'announce':\r\n\t\t\treturn [\r\n\t\t\t\t'chat chatmessage-' + toID(name) + hlClass + mineClass,\r\n\t\t\t\t`${timestamp}<strong${colorStyle}>${clickableName}:</strong> <span class=\"message-announce\">${BattleLog.parseMessage(target)}</span>`,\r\n\t\t\t];\r\n\t\tcase 'log':\r\n\t\t\treturn [\r\n\t\t\t\t'chat chatmessage-' + toID(name) + hlClass + mineClass,\r\n\t\t\t\t`${timestamp}<span class=\"message-log\">${BattleLog.parseMessage(target)}</span>`,\r\n\t\t\t];\r\n\t\tcase 'data-pokemon':\r\n\t\tcase 'data-item':\r\n\t\tcase 'data-ability':\r\n\t\tcase 'data-move':\r\n\t\t\treturn ['chat message-error', '[outdated code no longer supported]'];\r\n\t\tcase 'text':\r\n\t\t\treturn ['chat', BattleLog.parseMessage(target)];\r\n\t\tcase 'error':\r\n\t\t\treturn ['chat message-error', formatText(target, true)];\r\n\t\tcase 'html':\r\n\t\t\treturn [\r\n\t\t\t\t'chat chatmessage-' + toID(name) + hlClass + mineClass,\r\n\t\t\t\t`${timestamp}<strong${colorStyle}>${clickableName}:</strong> <em>${BattleLog.sanitizeHTML(target)}</em>`,\r\n\t\t\t];\r\n\t\tcase 'uhtml':\r\n\t\tcase 'uhtmlchange':\r\n\t\t\tlet parts = target.split(',');\r\n\t\t\tlet htmlSrc = parts.slice(1).join(',').trim();\r\n\t\t\tthis.changeUhtml(parts[0], htmlSrc, cmd === 'uhtml');\r\n\t\t\treturn ['', ''];\r\n\t\tcase 'raw':\r\n\t\t\treturn ['chat', BattleLog.sanitizeHTML(target)];\r\n\t\tcase 'nonotify':\r\n\t\t\treturn ['chat', BattleLog.sanitizeHTML(target), true];\r\n\t\tdefault:\r\n\t\t\t// Not a command or unsupported. Parsed as a normal chat message.\r\n\t\t\tif (!name) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t'chat' + hlClass,\r\n\t\t\t\t\t`${timestamp}<em>${BattleLog.parseMessage(message)}</em>`,\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\treturn [\r\n\t\t\t\t'chat chatmessage-' + toID(name) + hlClass + mineClass,\r\n\t\t\t\t`${timestamp}<strong${colorStyle}>${clickableName}:</strong> <em>${BattleLog.parseMessage(message)}</em>`,\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tstatic parseMessage(str: string, isTrusted = false) {\r\n\t\t// Don't format console commands (>>).\r\n\t\tif (str.substr(0, 3) === '>> ' || str.substr(0, 4) === '>>> ') return this.escapeHTML(str);\r\n\t\t// Don't format console results (<<).\r\n\t\tif (str.substr(0, 3) === '<< ') return this.escapeHTML(str);\r\n\t\tstr = formatText(str, isTrusted);\r\n\r\n\t\tlet options = BattleLog.prefs('chatformatting') || {};\r\n\r\n\t\tif (options.hidelinks) {\r\n\t\t\tstr = str.replace(/<a[^>]*>/g, '<u>').replace(/<\\/a>/g, '</u>');\r\n\t\t}\r\n\t\tif (options.hidespoiler) {\r\n\t\t\tstr = str.replace(/<span class=\"spoiler\">/g, '<span class=\"spoiler spoiler-shown\">');\r\n\t\t}\r\n\t\tif (options.hidegreentext) {\r\n\t\t\tstr = str.replace(/<span class=\"greentext\">/g, '<span>');\r\n\t\t}\r\n\r\n\t\treturn str;\r\n\t}\r\n\r\n\tstatic interstice = (() => {\r\n\t\tconst whitelist: string[] = Config.whitelist;\r\n\t\tconst patterns = whitelist.map(entry => new RegExp(\r\n\t\t\t`^(https?:)?//([A-Za-z0-9-]*\\\\.)?${entry.replace(/\\./g, '\\\\.')}(/.*)?`,\r\n\t\t'i'));\r\n\t\treturn {\r\n\t\t\tisWhitelisted(uri: string) {\r\n\t\t\t\tif (uri[0] === '/' && uri[1] !== '/') {\r\n\t\t\t\t\t// domain-relative URIs are safe\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tfor (const pattern of patterns) {\r\n\t\t\t\t\tif (pattern.test(uri)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tgetURI(uri: string) {\r\n\t\t\t\treturn `http://${Config.routes.root}/interstice?uri=${encodeURIComponent(uri)}`;\r\n\t\t\t},\r\n\t\t};\r\n\t})();\r\n\r\n\tstatic players: any[] = [];\r\n\tstatic ytLoading: Promise<void> | null = null;\r\n\tstatic tagPolicy: ((tagName: string, attribs: string[]) => any) | null = null;\r\n\tstatic initSanitizeHTML() {\r\n\t\tif (this.tagPolicy) return;\r\n\t\tif (!('html4' in window)) {\r\n\t\t\tthrow new Error('sanitizeHTML requires caja');\r\n\t\t}\r\n\r\n\t\t// By default, Caja will ban any HTML tags it doesn't recognize.\r\n\t\t// Additional HTML tags to allow:\r\n\t\tObject.assign(html4.ELEMENTS, {\r\n\t\t\tmarquee: 0,\r\n\t\t\tblink: 0,\r\n\t\t\tpsicon: html4.eflags['OPTIONAL_ENDTAG'] | html4.eflags['EMPTY'],\r\n\t\t\tusername: 0,\r\n\t\t\tspotify: 0,\r\n\t\t\tyoutube: 0,\r\n\t\t\ttwitch: 0,\r\n\t\t});\r\n\r\n\t\t// By default, Caja will ban any attributes it doesn't recognize.\r\n\t\t// Additional attributes to allow:\r\n\t\tObject.assign(html4.ATTRIBS, {\r\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/marquee\r\n\t\t\t'marquee::behavior': 0,\r\n\t\t\t'marquee::bgcolor': 0,\r\n\t\t\t'marquee::direction': 0,\r\n\t\t\t'marquee::height': 0,\r\n\t\t\t'marquee::hspace': 0,\r\n\t\t\t'marquee::loop': 0,\r\n\t\t\t'marquee::scrollamount': 0,\r\n\t\t\t'marquee::scrolldelay': 0,\r\n\t\t\t'marquee::truespeed': 0,\r\n\t\t\t'marquee::vspace': 0,\r\n\t\t\t'marquee::width': 0,\r\n\t\t\t'psicon::pokemon': 0,\r\n\t\t\t'psicon::item': 0,\r\n\t\t\t'psicon::type': 0,\r\n\t\t\t'psicon::category': 0,\r\n\t\t\t'username::name': 0,\r\n\t\t\t'form::data-submitsend': 0,\r\n\t\t\t'div::data-server': 0,\r\n\t\t\t'button::data-send': 0,\r\n\t\t\t'form::data-delimiter': 0,\r\n\t\t\t'button::data-delimiter': 0,\r\n\t\t\t'*::aria-label': 0,\r\n\t\t\t'*::aria-hidden': 0,\r\n\t\t});\r\n\r\n\t\t// Caja unfortunately doesn't document how `tagPolicy` works, so\r\n\t\t// here's how it goes:\r\n\r\n\t\t// Every opening tag and attributes is filtered through\r\n\t\t// `tagPolicy`, being replaced by the {tagName, attribs} returned.\r\n\t\t// Returning `undefined` means that the tag will be removed entirely.\r\n\r\n\t\t// We run Caja's built-in tag sanitization in the first line of our\r\n\t\t// custom tagPolicy, and its attribs sanitization midway through, with\r\n\t\t// `sanitizeAttribs`.\r\n\r\n\t\t// (n.b. tag contents etc can't be modified in this step.)\r\n\r\n\t\t/**\r\n\t\t * @param tagName Lowercase tag name\r\n\t\t * @param attribs attribs in the form of [key, value, key, value]\r\n\t\t * @return undefined to remove the tag\r\n\t\t */\r\n\t\tthis.tagPolicy = (tagName: string, attribs: string[]) => {\r\n\t\t\tif (html4.ELEMENTS[tagName] & html4.eflags['UNSAFE']) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getAttrib(key: string) {\r\n\t\t\t\tfor (let i = 0; i < attribs.length - 1; i += 2) {\r\n\t\t\t\t\tif (attribs[i] === key) {\r\n\t\t\t\t\t\treturn attribs[i + 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tfunction setAttrib(key: string, value: string) {\r\n\t\t\t\tfor (let i = 0; i < attribs.length - 1; i += 2) {\r\n\t\t\t\t\tif (attribs[i] === key) {\r\n\t\t\t\t\t\tattribs[i + 1] = value;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tattribs.push(key, value);\r\n\t\t\t}\r\n\t\t\tfunction deleteAttrib(key: string) {\r\n\t\t\t\tfor (let i = 0; i < attribs.length - 1; i += 2) {\r\n\t\t\t\t\tif (attribs[i] === key) {\r\n\t\t\t\t\t\tattribs.splice(i, 2);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet dataUri = '';\r\n\t\t\tlet targetReplace = false;\r\n\r\n\t\t\tif (tagName === 'a') {\r\n\t\t\t\tif (getAttrib('target') === 'replace') {\r\n\t\t\t\t\ttargetReplace = true;\r\n\t\t\t\t}\r\n\t\t\t} else if (tagName === 'img') {\r\n\t\t\t\tconst src = getAttrib('src') || '';\r\n\t\t\t\tif (src.startsWith('data:image/')) {\r\n\t\t\t\t\tdataUri = src;\r\n\t\t\t\t}\r\n\t\t\t\tif (src.startsWith('//')) {\r\n\t\t\t\t\tif (location.protocol !== 'http:' && location.protocol !== 'https:') {\r\n\t\t\t\t\t\t// in testclient with `file://`, fix src so it still works\r\n\t\t\t\t\t\tsetAttrib('src', 'https:' + src);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (tagName === 'twitch') {\r\n\t\t\t\t// <iframe src=\"https://player.twitch.tv/?channel=ninja&parent=www.example.com\" allowfullscreen=\"true\" height=\"378\" width=\"620\"></iframe>\r\n\t\t\t\tconst src = getAttrib('src') || \"\";\r\n\t\t\t\tconst channelId = /(https?:\\/\\/)?twitch.tv\\/([A-Za-z0-9]+)/i.exec(src)?.[2];\r\n\t\t\t\tconst height = parseInt(getAttrib('height') || \"\", 10) || 400;\r\n\t\t\t\tconst width = parseInt(getAttrib('width') || \"\", 10) || 340;\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttagName: 'iframe',\r\n\t\t\t\t\tattribs: [\r\n\t\t\t\t\t\t'src', `https://player.twitch.tv/?channel=${channelId}&parent=${location.hostname}&autoplay=false`,\r\n\t\t\t\t\t\t'allowfullscreen', 'true', 'height', `${height}`, 'width', `${width}`,\r\n\t\t\t\t\t],\r\n\t\t\t\t};\r\n\t\t\t} else if (tagName === 'username') {\r\n\t\t\t\t// <username> is a custom element that handles namecolors\r\n\t\t\t\ttagName = 'strong';\r\n\t\t\t\tconst color = this.usernameColor(toID(getAttrib('name')));\r\n\t\t\t\tconst style = getAttrib('style');\r\n\t\t\t\tsetAttrib('style', `${style};color:${color}`);\r\n\t\t\t} else if (tagName === 'spotify') {\r\n\t\t\t\t// <iframe src=\"https://open.spotify.com/embed/track/6aSYnCIwcLpnDXngGKAEzZ\" width=\"300\" height=\"380\" frameborder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\"></iframe>\r\n\t\t\t\tconst src = getAttrib('src') || '';\r\n\t\t\t\tconst songId = /(?:\\?v=|\\/track\\/)([A-Za-z0-9]+)/.exec(src)?.[1];\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttagName: 'iframe',\r\n\t\t\t\t\tattribs: ['src', `https://open.spotify.com/embed/track/${songId}`, 'width', '300', 'height', '380', 'frameborder', '0', 'allowtransparency', 'true', 'allow', 'encrypted-media'],\r\n\t\t\t\t};\r\n\t\t\t} else if (tagName === 'youtube') {\r\n\t\t\t\t// <iframe width=\"320\" height=\"180\" src=\"https://www.youtube.com/embed/dQw4w9WgXcQ\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\r\n\r\n\t\t\t\tconst src = getAttrib('src') || '';\r\n\t\t\t\t// Google's ToS requires a minimum of 200x200\r\n\t\t\t\tlet width = '320';\r\n\t\t\t\tlet height = '200';\r\n\t\t\t\tif (window.innerWidth >= 400) {\r\n\t\t\t\t\twidth = '400';\r\n\t\t\t\t\theight = '225';\r\n\t\t\t\t}\r\n\t\t\t\tconst videoId = /(?:\\?v=|\\/embed\\/)([A-Za-z0-9_\\-]+)/.exec(src)?.[1];\r\n\t\t\t\tif (!videoId) return {tagName: 'img', attribs: ['alt', `invalid src for <youtube>`]};\r\n\r\n\t\t\t\tconst time = /(?:\\?|&)(?:t|start)=([0-9]+)/.exec(src)?.[1];\r\n\t\t\t\tthis.players.push(null);\r\n\t\t\t\tconst idx = this.players.length;\r\n\t\t\t\tthis.initYoutubePlayer(idx);\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttagName: 'iframe',\r\n\t\t\t\t\tattribs: [\r\n\t\t\t\t\t\t'id', `youtube-iframe-${idx}`,\r\n\t\t\t\t\t\t'width', width, 'height', height,\r\n\t\t\t\t\t\t'src', `https://www.youtube.com/embed/${videoId}?enablejsapi=1&playsinline=1${time ? `&start=${time}` : ''}`,\r\n\t\t\t\t\t\t'frameborder', '0', 'allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture', 'allowfullscreen', 'allowfullscreen',\r\n\t\t\t\t\t],\r\n\t\t\t\t};\r\n\t\t\t} else if (tagName === 'psicon') {\r\n\t\t\t\t// <psicon> is a custom element which supports a set of mutually incompatible attributes:\r\n\t\t\t\t// <psicon pokemon> and <psicon item>\r\n\t\t\t\tlet iconType = null;\r\n\t\t\t\tlet iconValue = null;\r\n\t\t\t\tfor (let i = 0; i < attribs.length - 1; i += 2) {\r\n\t\t\t\t\tif (attribs[i] === 'pokemon' || attribs[i] === 'item' || attribs[i] === 'type' || attribs[i] === 'category') {\r\n\t\t\t\t\t\t[iconType, iconValue] = attribs.slice(i, i + 2);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttagName = 'span';\r\n\r\n\t\t\t\tif (iconType) {\r\n\t\t\t\t\tconst className = getAttrib('class');\r\n\t\t\t\t\tconst style = getAttrib('style');\r\n\r\n\t\t\t\t\tif (iconType === 'pokemon') {\r\n\t\t\t\t\t\tsetAttrib('class', 'picon' + (className ? ' ' + className : ''));\r\n\t\t\t\t\t\tsetAttrib('style', Dex.getPokemonIcon(iconValue) + (style ? '; ' + style : ''));\r\n\t\t\t\t\t} else if (iconType === 'item') {\r\n\t\t\t\t\t\tsetAttrib('class', 'itemicon' + (className ? ' ' + className : ''));\r\n\t\t\t\t\t\tsetAttrib('style', Dex.getItemIcon(iconValue) + (style ? '; ' + style : ''));\r\n\t\t\t\t\t} else if (iconType === 'type') {\r\n\t\t\t\t\t\ttagName = Dex.getTypeIcon(iconValue).slice(1, -3);\r\n\t\t\t\t\t} else if (iconType === 'category') {\r\n\t\t\t\t\t\ttagName = Dex.getCategoryIcon(iconValue).slice(1, -3);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tattribs = html.sanitizeAttribs(tagName, attribs, (urlData: any) => {\r\n\t\t\t\tif (urlData.scheme_ === 'geo' || urlData.scheme_ === 'sms' || urlData.scheme_ === 'tel') return null;\r\n\t\t\t\treturn urlData;\r\n\t\t\t});\r\n\r\n\t\t\tif (dataUri && tagName === 'img') {\r\n\t\t\t\tsetAttrib('src', dataUri);\r\n\t\t\t}\r\n\t\t\tif (tagName === 'a' || (tagName === 'form' && !getAttrib('data-submitsend'))) {\r\n\t\t\t\tif (targetReplace) {\r\n\t\t\t\t\tsetAttrib('data-target', 'replace');\r\n\t\t\t\t\tdeleteAttrib('target');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetAttrib('target', '_blank');\r\n\t\t\t\t}\r\n\t\t\t\tif (tagName === 'a') {\r\n\t\t\t\t\tsetAttrib('rel', 'noopener');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {tagName, attribs};\r\n\t\t};\r\n\t}\r\n\tstatic localizeTime(full: string, date: string, time: string, timezone?: string) {\r\n\t\tlet parsedTime = new Date(date + 'T' + time + (timezone || 'Z').toUpperCase());\r\n\t\t// Very old (pre-ES5) web browsers may be incapable of parsing ISO 8601\r\n\t\t// dates. In such a case, gracefully continue without replacing the date\r\n\t\t// format.\r\n\t\tif (!parsedTime.getTime()) return full;\r\n\r\n\t\tlet formattedTime;\r\n\t\t// Try using Intl API if it exists\r\n\t\tif ((window as any).Intl?.DateTimeFormat) {\r\n\t\t\tformattedTime = new Intl.DateTimeFormat(undefined, {\r\n\t\t\t\tmonth: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric',\r\n\t\t\t}).format(parsedTime);\r\n\t\t} else {\r\n\t\t\t// toLocaleString even exists in ECMAScript 1, so no need to check\r\n\t\t\t// if it exists.\r\n\t\t\tformattedTime = parsedTime.toLocaleString();\r\n\t\t}\r\n\t\treturn '<time>' + BattleLog.escapeHTML(formattedTime) + '</time>';\r\n\t}\r\n\tstatic sanitizeHTML(input: string) {\r\n\t\tif (typeof input !== 'string') return '';\r\n\r\n\t\tthis.initSanitizeHTML();\r\n\r\n\t\tinput = input.replace(/<username([^>]*)>([^<]*)<\\/username>/gi, (match, attrs, username) => {\r\n\t\t\tif (/\\bname\\s*=\\s*\"/.test(attrs)) return match;\r\n\t\t\tconst escapedUsername = username.replace(/\"/g, '&quot;').replace(/>/g, '&gt;');\r\n\t\t\treturn `<username${attrs} name=\"${escapedUsername}\">${username}</username>`;\r\n\t\t});\r\n\r\n\t\t// Our custom element support happens in `tagPolicy`, which is set\r\n\t\t// up in `initSanitizeHTML` above.\r\n\t\tconst sanitized = html.sanitizeWithPolicy(input, this.tagPolicy) as string;\r\n\r\n\t\t// <time> parsing requires ISO 8601 time. While more time formats are\r\n\t\t// supported by most JavaScript implementations, it isn't required, and\r\n\t\t// how to exactly enforce ignoring user agent timezone setting is not obvious.\r\n\t\t// As dates come from the server which isn't aware of client timezone, a\r\n\t\t// particular timezone is required.\r\n\t\t//\r\n\t\t// This regular expression is split into three groups.\r\n\t\t//\r\n\t\t// Group 1 - date\r\n\t\t// Group 2 - time (seconds and milliseconds are optional)\r\n\t\t// Group 3 - optional timezone\r\n\t\t//\r\n\t\t// Group 1 and group 2 are split to allow using space as a separator\r\n\t\t// instead of T. Stricly speaking ECMAScript 5 specification only\r\n\t\t// allows T, however it's more practical to also allow spaces.\r\n\t\treturn sanitized.replace(\r\n\t\t\t/<time>\\s*([+-]?\\d{4,}-\\d{2}-\\d{2})[T ](\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d{3})?)?)(Z|[+-]\\d{2}:\\d{2})?\\s*<\\/time>/ig,\r\n\t\tthis.localizeTime);\r\n\t}\r\n\r\n\tstatic initYoutubePlayer(idx: number) {\r\n\t\tconst id = `youtube-iframe-${idx}`;\r\n\t\tconst loadPlayer = () => {\r\n\t\t\tif (!$(`#${id}`).length) return;\r\n\t\t\tconst player = new window.YT.Player(id, {\r\n\t\t\t\tevents: {\r\n\t\t\t\t\tonStateChange: (event: any) => {\r\n\t\t\t\t\t\tif (event.data === window.YT.PlayerState.PLAYING) {\r\n\t\t\t\t\t\t\tfor (const curPlayer of BattleLog.players) {\r\n\t\t\t\t\t\t\t\tif (player === curPlayer) continue;\r\n\t\t\t\t\t\t\t\tcurPlayer?.pauseVideo?.();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tthis.players[idx - 1] = player;\r\n\t\t};\r\n\t\t// wait for html element to be in DOM\r\n\t\tthis.ensureYoutube().then(() => {\r\n\t\t\tsetTimeout(() => loadPlayer(), 300);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic ensureYoutube(): Promise<void> {\r\n\t\tif (this.ytLoading) return this.ytLoading;\r\n\r\n\t\tthis.ytLoading = new Promise(resolve => {\r\n\t\t\tconst el = document.createElement('script');\r\n\t\t\tel.type = 'text/javascript';\r\n\t\t\tel.async = true;\r\n\t\t\tel.src = 'https://youtube.com/iframe_api';\r\n\t\t\tel.onload = () => {\r\n\t\t\t\t// since the src loads more files remotely we'll just wait\r\n\t\t\t\t// until the player exists\r\n\t\t\t\tconst loopCheck = () => {\r\n\t\t\t\t\tif (!window.YT?.Player) {\r\n\t\t\t\t\t\tsetTimeout(() => loopCheck(), 300);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tloopCheck();\r\n\t\t\t};\r\n\t\t\tdocument.body.appendChild(el);\r\n\t\t});\r\n\t\treturn this.ytLoading;\r\n\t}\r\n\r\n\t/*********************************************************\r\n\t * Replay files\r\n\t *********************************************************/\r\n\r\n\t// Replay files are .html files that display a replay for a battle.\r\n\r\n\t// The .html files mainly contain replay log data; the actual replay\r\n\t// player is downloaded online. Also included is a textual log and\r\n\t// some minimal CSS to make it look pretty, for offline viewing.\r\n\r\n\t// This strategy helps keep the replay file reasonably small; of\r\n\t// the 30 KB or so for a 50-turn battle, around 10 KB is the log\r\n\t// data, and around 20 KB is the textual log.\r\n\r\n\t// The actual replay player is downloaded from replay-embed.js,\r\n\t// which handles loading all the necessary resources for turning the log\r\n\t// data into a playable replay.\r\n\r\n\t// Battle log data is stored in and loaded from a\r\n\t// <script type=\"text/plain\" class=\"battle-log-data\"> tag.\r\n\r\n\t// replay-embed.js is loaded through a cache-buster that rotates daily.\r\n\t// This allows pretty much anything about the replay viewer to be\r\n\t// updated as desired.\r\n\r\n\tstatic createReplayFile(room: any) {\r\n\t\tlet battle = room.battle;\r\n\t\tlet replayid = room.id;\r\n\t\tif (replayid) {\r\n\t\t\t// battle room\r\n\t\t\treplayid = replayid.slice(7);\r\n\t\t\tif (Config.server.id !== 'showdown') {\r\n\t\t\t\tif (!Config.server.registered) {\r\n\t\t\t\t\treplayid = 'unregisteredserver-' + replayid;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treplayid = Config.server.id + '-' + replayid;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// replay panel\r\n\t\t\treplayid = room.fragment;\r\n\t\t}\r\n\t\tbattle.seekTurn(Infinity);\r\n\t\tlet buf = '<!DOCTYPE html>\\n';\r\n\t\tbuf += '<meta charset=\"utf-8\" />\\n';\r\n\t\tbuf += '<!-- version 1 -->\\n';\r\n\t\tbuf += `<title>${BattleLog.escapeHTML(battle.tier)} replay: ${BattleLog.escapeHTML(battle.p1.name)} vs. ${BattleLog.escapeHTML(battle.p2.name)}</title>\\n`;\r\n\t\tbuf += '<style>\\n';\r\n\t\tbuf += 'html,body {font-family:Verdana, sans-serif;font-size:10pt;margin:0;padding:0;}body{padding:12px 0;} .battle-log {font-family:Verdana, sans-serif;font-size:10pt;} .battle-log-inline {border:1px solid #AAAAAA;background:#EEF2F5;color:black;max-width:640px;margin:0 auto 80px;padding-bottom:5px;} .battle-log .inner {padding:4px 8px 0px 8px;} .battle-log .inner-preempt {padding:0 8px 4px 8px;} .battle-log .inner-after {margin-top:0.5em;} .battle-log h2 {margin:0.5em -8px;padding:4px 8px;border:1px solid #AAAAAA;background:#E0E7EA;border-left:0;border-right:0;font-family:Verdana, sans-serif;font-size:13pt;} .battle-log .chat {vertical-align:middle;padding:3px 0 3px 0;font-size:8pt;} .battle-log .chat strong {color:#40576A;} .battle-log .chat em {padding:1px 4px 1px 3px;color:#000000;font-style:normal;} .chat.mine {background:rgba(0,0,0,0.05);margin-left:-8px;margin-right:-8px;padding-left:8px;padding-right:8px;} .spoiler {color:#BBBBBB;background:#BBBBBB;padding:0px 3px;} .spoiler:hover, .spoiler:active, .spoiler-shown {color:#000000;background:#E2E2E2;padding:0px 3px;} .spoiler a {color:#BBBBBB;} .spoiler:hover a, .spoiler:active a, .spoiler-shown a {color:#2288CC;} .chat code, .chat .spoiler:hover code, .chat .spoiler:active code, .chat .spoiler-shown code {border:1px solid #C0C0C0;background:#EEEEEE;color:black;padding:0 2px;} .chat .spoiler code {border:1px solid #CCCCCC;background:#CCCCCC;color:#CCCCCC;} .battle-log .rated {padding:3px 4px;} .battle-log .rated strong {color:white;background:#89A;padding:1px 4px;border-radius:4px;} .spacer {margin-top:0.5em;} .message-announce {background:#6688AA;color:white;padding:1px 4px 2px;} .message-announce a, .broadcast-green a, .broadcast-blue a, .broadcast-red a {color:#DDEEFF;} .broadcast-green {background-color:#559955;color:white;padding:2px 4px;} .broadcast-blue {background-color:#6688AA;color:white;padding:2px 4px;} .infobox {border:1px solid #6688AA;padding:2px 4px;} .infobox-limited {max-height:200px;overflow:auto;overflow-x:hidden;} .broadcast-red {background-color:#AA5544;color:white;padding:2px 4px;} .message-learn-canlearn {font-weight:bold;color:#228822;text-decoration:underline;} .message-learn-cannotlearn {font-weight:bold;color:#CC2222;text-decoration:underline;} .message-effect-weak {font-weight:bold;color:#CC2222;} .message-effect-resist {font-weight:bold;color:#6688AA;} .message-effect-immune {font-weight:bold;color:#666666;} .message-learn-list {margin-top:0;margin-bottom:0;} .message-throttle-notice, .message-error {color:#992222;} .message-overflow, .chat small.message-overflow {font-size:0pt;} .message-overflow::before {font-size:9pt;content:\\'...\\';} .subtle {color:#3A4A66;}\\n';\r\n\t\tbuf += '</style>\\n';\r\n\t\tbuf += '<div class=\"wrapper replay-wrapper\" style=\"max-width:1180px;margin:0 auto\">\\n';\r\n\t\tbuf += '<input type=\"hidden\" name=\"replayid\" value=\"' + replayid + '\" />\\n';\r\n\t\tbuf += '<div class=\"battle\"></div><div class=\"battle-log\"></div><div class=\"replay-controls\"></div><div class=\"replay-controls-2\"></div>\\n';\r\n\t\tbuf += `<h1 style=\"font-weight:normal;text-align:center\"><strong>${BattleLog.escapeHTML(battle.tier)}</strong><br /><a href=\"http://${Config.routes.users}/${toID(battle.p1.name)}\" class=\"subtle\" target=\"_blank\">${BattleLog.escapeHTML(battle.p1.name)}</a> vs. <a href=\"http://${Config.routes.users}/${toID(battle.p2.name)}\" class=\"subtle\" target=\"_blank\">${BattleLog.escapeHTML(battle.p2.name)}</a></h1>\\n`;\r\n\t\tbuf += '<script type=\"text/plain\" class=\"battle-log-data\">' + battle.stepQueue.join('\\n').replace(/\\//g, '\\\\/') + '</script>\\n'; // lgtm [js/incomplete-sanitization]\r\n\t\tbuf += '</div>\\n';\r\n\t\tbuf += '<div class=\"battle-log battle-log-inline\"><div class=\"inner\">' + battle.scene.log.elem.innerHTML + '</div></div>\\n';\r\n\t\tbuf += '</div>\\n';\r\n\t\tbuf += '<script>\\n';\r\n\t\tbuf += `let daily = Math.floor(Date.now()/1000/60/60/24);document.write('<script src=\"https://${Config.routes.client}/js/replay-embed.js?version'+daily+'\"></'+'script>');\\n`;\r\n\t\tbuf += '</script>\\n';\r\n\t\treturn buf;\r\n\t}\r\n\r\n\tstatic createReplayFileHref(room: any) {\r\n\t\t// unescape(encodeURIComponent()) is necessary because btoa doesn't support Unicode\r\n\t\t// @ts-ignore\r\n\t\treturn 'data:text/plain;base64,' + encodeURIComponent(btoa(unescape(encodeURIComponent(BattleLog.createReplayFile(room)))));\r\n\t}\r\n}\r\n","/**\r\n * Pokemon Showdown Log Misc\r\n *\r\n * Some miscellaneous helper functions for battle-log.ts, namely:\r\n *\r\n * - an MD5 hasher\r\n *\r\n * - a parseText function (for converting chat text to HTML),\r\n *   cross-compiled from the server\r\n *\r\n * Licensing note: PS's client has complicated licensing:\r\n * - The client as a whole is AGPLv3\r\n * - The battle replay/animation engine (battle-*.ts) by itself is MIT\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license MIT\r\n */\r\n\r\n/* eslint-disable */\r\n\r\n// MD5 minified\r\nfunction MD5(f){function i(b,c){var d,e,f,g,h;f=b&2147483648;g=c&2147483648;d=b&1073741824;e=c&1073741824;h=(b&1073741823)+(c&1073741823);return d&e?h^2147483648^f^g:d|e?h&1073741824?h^3221225472^f^g:h^1073741824^f^g:h^f^g}function j(b,c,d,e,f,g,h){b=i(b,i(i(c&d|~c&e,f),h));return i(b<<g|b>>>32-g,c)}function k(b,c,d,e,f,g,h){b=i(b,i(i(c&e|d&~e,f),h));return i(b<<g|b>>>32-g,c)}function l(b,c,e,d,f,g,h){b=i(b,i(i(c^e^d,f),h));return i(b<<g|b>>>32-g,c)}function m(b,c,e,d,f,g,h){b=i(b,i(i(e^(c|~d),\r\nf),h));return i(b<<g|b>>>32-g,c)}function n(b){var c=\"\",e=\"\",d;for(d=0;d<=3;d++)e=b>>>d*8&255,e=\"0\"+e.toString(16),c+=e.substr(e.length-2,2);return c}var g=[],o,p,q,r,b,c,d,e,f=function(b){for(var b=b.replace(/\\r\\n/g,\"\\n\"),c=\"\",e=0;e<b.length;e++){var d=b.charCodeAt(e);d<128?c+=String.fromCharCode(d):(d>127&&d<2048?c+=String.fromCharCode(d>>6|192):(c+=String.fromCharCode(d>>12|224),c+=String.fromCharCode(d>>6&63|128)),c+=String.fromCharCode(d&63|128))}return c}(f),g=function(b){var c,d=b.length;c=\r\nd+8;for(var e=((c-c%64)/64+1)*16,f=Array(e-1),g=0,h=0;h<d;)c=(h-h%4)/4,g=h%4*8,f[c]|=b.charCodeAt(h)<<g,h++;f[(h-h%4)/4]|=128<<h%4*8;f[e-2]=d<<3;f[e-1]=d>>>29;return f}(f);b=1732584193;c=4023233417;d=2562383102;e=271733878;for(f=0;f<g.length;f+=16)o=b,p=c,q=d,r=e,b=j(b,c,d,e,g[f+0],7,3614090360),e=j(e,b,c,d,g[f+1],12,3905402710),d=j(d,e,b,c,g[f+2],17,606105819),c=j(c,d,e,b,g[f+3],22,3250441966),b=j(b,c,d,e,g[f+4],7,4118548399),e=j(e,b,c,d,g[f+5],12,1200080426),d=j(d,e,b,c,g[f+6],17,2821735955),c=\r\nj(c,d,e,b,g[f+7],22,4249261313),b=j(b,c,d,e,g[f+8],7,1770035416),e=j(e,b,c,d,g[f+9],12,2336552879),d=j(d,e,b,c,g[f+10],17,4294925233),c=j(c,d,e,b,g[f+11],22,2304563134),b=j(b,c,d,e,g[f+12],7,1804603682),e=j(e,b,c,d,g[f+13],12,4254626195),d=j(d,e,b,c,g[f+14],17,2792965006),c=j(c,d,e,b,g[f+15],22,1236535329),b=k(b,c,d,e,g[f+1],5,4129170786),e=k(e,b,c,d,g[f+6],9,3225465664),d=k(d,e,b,c,g[f+11],14,643717713),c=k(c,d,e,b,g[f+0],20,3921069994),b=k(b,c,d,e,g[f+5],5,3593408605),e=k(e,b,c,d,g[f+10],9,38016083),\r\nd=k(d,e,b,c,g[f+15],14,3634488961),c=k(c,d,e,b,g[f+4],20,3889429448),b=k(b,c,d,e,g[f+9],5,568446438),e=k(e,b,c,d,g[f+14],9,3275163606),d=k(d,e,b,c,g[f+3],14,4107603335),c=k(c,d,e,b,g[f+8],20,1163531501),b=k(b,c,d,e,g[f+13],5,2850285829),e=k(e,b,c,d,g[f+2],9,4243563512),d=k(d,e,b,c,g[f+7],14,1735328473),c=k(c,d,e,b,g[f+12],20,2368359562),b=l(b,c,d,e,g[f+5],4,4294588738),e=l(e,b,c,d,g[f+8],11,2272392833),d=l(d,e,b,c,g[f+11],16,1839030562),c=l(c,d,e,b,g[f+14],23,4259657740),b=l(b,c,d,e,g[f+1],4,2763975236),\r\ne=l(e,b,c,d,g[f+4],11,1272893353),d=l(d,e,b,c,g[f+7],16,4139469664),c=l(c,d,e,b,g[f+10],23,3200236656),b=l(b,c,d,e,g[f+13],4,681279174),e=l(e,b,c,d,g[f+0],11,3936430074),d=l(d,e,b,c,g[f+3],16,3572445317),c=l(c,d,e,b,g[f+6],23,76029189),b=l(b,c,d,e,g[f+9],4,3654602809),e=l(e,b,c,d,g[f+12],11,3873151461),d=l(d,e,b,c,g[f+15],16,530742520),c=l(c,d,e,b,g[f+2],23,3299628645),b=m(b,c,d,e,g[f+0],6,4096336452),e=m(e,b,c,d,g[f+7],10,1126891415),d=m(d,e,b,c,g[f+14],15,2878612391),c=m(c,d,e,b,g[f+5],21,4237533241),\r\nb=m(b,c,d,e,g[f+12],6,1700485571),e=m(e,b,c,d,g[f+3],10,2399980690),d=m(d,e,b,c,g[f+10],15,4293915773),c=m(c,d,e,b,g[f+1],21,2240044497),b=m(b,c,d,e,g[f+8],6,1873313359),e=m(e,b,c,d,g[f+15],10,4264355552),d=m(d,e,b,c,g[f+6],15,2734768916),c=m(c,d,e,b,g[f+13],21,1309151649),b=m(b,c,d,e,g[f+4],6,4149444226),e=m(e,b,c,d,g[f+11],10,3174756917),d=m(d,e,b,c,g[f+2],15,718787259),c=m(c,d,e,b,g[f+9],21,3951481745),b=i(b,o),c=i(c,p),d=i(d,q),e=i(e,r);return(n(b)+n(c)+n(d)+n(e)).toLowerCase()};\r\n/* eslint-enable */\r\n","/**\r\n * Text parser\r\n *\r\n * No dependencies\r\n * Optional dependency: BattleText\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license MIT\r\n */\r\n\r\ndeclare const BattleText: {[id: string]: {[templateName: string]: string}};\r\n\r\ntype Args = [string, ...string[]];\r\ntype KWArgs = {[kw: string]: string};\r\ntype SideID = 'p1' | 'p2' | 'p3' | 'p4';\r\n\r\nclass BattleTextParser {\r\n\tp1 = \"Player 1\";\r\n\tp2 = \"Player 2\";\r\n\tp3 = \"Player 3\";\r\n\tp4 = \"Player 4\";\r\n\tperspective: SideID;\r\n\tgen = 9;\r\n\tturn = 0;\r\n\tcurLineSection: 'break' | 'preMajor' | 'major' | 'postMajor' = 'break';\r\n\tlowercaseRegExp: RegExp | null | undefined = undefined;\r\n\r\n\tconstructor(perspective: SideID = 'p1') {\r\n\t\tthis.perspective = perspective;\r\n\t}\r\n\r\n\tstatic parseLine(line: string, noDefault: true): Args | null;\r\n\tstatic parseLine(line: string): Args;\r\n\tstatic parseLine(line: string, noDefault?: boolean): Args | null {\r\n\t\tif (!line.startsWith('|')) {\r\n\t\t\treturn ['', line];\r\n\t\t}\r\n\t\tif (line === '|') {\r\n\t\t\treturn ['done'];\r\n\t\t}\r\n\t\tconst index = line.indexOf('|', 1);\r\n\t\tconst cmd = line.slice(1, index);\r\n\t\tswitch (cmd) {\r\n\t\tcase 'chatmsg': case 'chatmsg-raw': case 'raw': case 'error': case 'html':\r\n\t\tcase 'inactive': case 'inactiveoff': case 'warning':\r\n\t\tcase 'fieldhtml': case 'controlshtml': case 'bigerror':\r\n\t\tcase 'debug': case 'tier': case 'challstr': case 'popup': case '':\r\n\t\t\treturn [cmd, line.slice(index + 1)];\r\n\t\tcase 'c': case 'chat': case 'uhtml': case 'uhtmlchange': case 'queryresponse':\r\n\t\t\t// three parts\r\n\t\t\tconst index2a = line.indexOf('|', index + 1);\r\n\t\t\treturn [cmd, line.slice(index + 1, index2a), line.slice(index2a + 1)];\r\n\t\tcase 'c:': case 'pm':\r\n\t\t\t// four parts\r\n\t\t\tconst index2b = line.indexOf('|', index + 1);\r\n\t\t\tconst index3b = line.indexOf('|', index2b + 1);\r\n\t\t\treturn [cmd, line.slice(index + 1, index2b), line.slice(index2b + 1, index3b), line.slice(index3b + 1)];\r\n\t\t}\r\n\t\tif (noDefault) return null;\r\n\t\treturn line.slice(1).split('|') as [string, ...string[]];\r\n\t}\r\n\r\n\tstatic parseBattleLine(line: string): {args: Args, kwArgs: KWArgs} {\r\n\t\tlet args = this.parseLine(line, true);\r\n\t\tif (args) return {args, kwArgs: {}};\r\n\r\n\t\targs = line.slice(1).split('|') as [string, ...string[]];\r\n\t\tconst kwArgs: KWArgs = {};\r\n\t\twhile (args.length > 1) {\r\n\t\t\tconst lastArg = args[args.length - 1];\r\n\t\t\tif (lastArg.charAt(0) !== '[') break;\r\n\t\t\tconst bracketPos = lastArg.indexOf(']');\r\n\t\t\tif (bracketPos <= 0) break;\r\n\t\t\t// default to '.' so it evaluates to boolean true\r\n\t\t\tkwArgs[lastArg.slice(1, bracketPos)] = lastArg.slice(bracketPos + 1).trim() || '.';\r\n\t\t\targs.pop();\r\n\t\t}\r\n\t\treturn BattleTextParser.upgradeArgs({args, kwArgs});\r\n\t}\r\n\r\n\tstatic parseNameParts(text: string) {\r\n\t\tlet group = '';\r\n\t\t// names can't start with a symbol\r\n\t\tif (!/[A-Za-z0-9]/.test(text.charAt(0))) {\r\n\t\t\tgroup = text.charAt(0);\r\n\t\t\ttext = text.slice(1);\r\n\t\t}\r\n\r\n\t\tlet name = text;\r\n\t\tconst atIndex = text.indexOf('@');\r\n\t\tlet status = '';\r\n\t\tlet away = false;\r\n\t\tif (atIndex > 0) {\r\n\t\t\tname = text.slice(0, atIndex);\r\n\t\t\tstatus = text.slice(atIndex + 1);\r\n\t\t\tif (status.startsWith('!')) {\r\n\t\t\t\taway = true;\r\n\t\t\t\tstatus = status.slice(1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {group, name, away, status};\r\n\t}\r\n\r\n\tstatic upgradeArgs({args, kwArgs}: {args: Args, kwArgs: KWArgs}): {args: Args, kwArgs: KWArgs} {\r\n\t\tswitch (args[0]) {\r\n\t\tcase '-activate': {\r\n\t\t\tif (kwArgs.item || kwArgs.move || kwArgs.number || kwArgs.ability) return {args, kwArgs};\r\n\t\t\tlet [, pokemon, effect, arg3, arg4] = args;\r\n\t\t\tlet target = kwArgs.of;\r\n\t\t\tconst id = BattleTextParser.effectId(effect);\r\n\r\n\t\t\tif (kwArgs.block) return {args: ['-fail', pokemon], kwArgs};\r\n\r\n\t\t\tif (id === 'wonderguard') return {args: ['-immune', pokemon], kwArgs: {from: 'ability:Wonder Guard'}};\r\n\r\n\t\t\tif (id === 'beatup' && kwArgs.of) return {args, kwArgs: {name: kwArgs.of}};\r\n\r\n\t\t\tif ([\r\n\t\t\t\t'ingrain', 'quickguard', 'wideguard', 'craftyshield', 'matblock', 'protect', 'mist', 'safeguard',\r\n\t\t\t\t'electricterrain', 'mistyterrain', 'psychicterrain', 'telepathy', 'stickyhold', 'suctioncups', 'aromaveil',\r\n\t\t\t\t'flowerveil', 'sweetveil', 'disguise', 'safetygoggles', 'protectivepads',\r\n\t\t\t].includes(id)) {\r\n\t\t\t\tif (target) {\r\n\t\t\t\t\tkwArgs.of = pokemon;\r\n\t\t\t\t\treturn {args: ['-block', target, effect, arg3], kwArgs};\r\n\t\t\t\t}\r\n\t\t\t\treturn {args: ['-block', pokemon, effect, arg3], kwArgs};\r\n\t\t\t}\r\n\r\n\t\t\tif (id === 'charge') {\r\n\t\t\t\treturn {args: ['-singlemove', pokemon, effect], kwArgs: {of: target}};\r\n\t\t\t}\r\n\t\t\tif ([\r\n\t\t\t\t'bind', 'wrap', 'clamp', 'whirlpool', 'firespin', 'magmastorm', 'sandtomb', 'infestation', 'snaptrap', 'thundercage', 'trapped',\r\n\t\t\t].includes(id)) {\r\n\t\t\t\treturn {args: ['-start', pokemon, effect], kwArgs: {of: target}};\r\n\t\t\t}\r\n\r\n\t\t\tif (id === 'fairylock') {\r\n\t\t\t\treturn {args: ['-fieldactivate', effect], kwArgs: {}};\r\n\t\t\t}\r\n\r\n\t\t\tif (id === 'symbiosis' || id === 'poltergeist') {\r\n\t\t\t\tkwArgs.item = arg3;\r\n\t\t\t} else if (id === 'magnitude') {\r\n\t\t\t\tkwArgs.number = arg3;\r\n\t\t\t} else if (id === 'skillswap' || id === 'mummy' || id === 'lingeringaroma' || id === 'wanderingspirit') {\r\n\t\t\t\tkwArgs.ability = arg3;\r\n\t\t\t\tkwArgs.ability2 = arg4;\r\n\t\t\t} else if ([\r\n\t\t\t\t'eeriespell', 'gmaxdepletion', 'spite', 'grudge', 'forewarn', 'sketch', 'leppaberry', 'mysteryberry',\r\n\t\t\t].includes(id)) {\r\n\t\t\t\tkwArgs.move = arg3;\r\n\t\t\t\tkwArgs.number = arg4;\r\n\t\t\t}\r\n\t\t\targs = ['-activate', pokemon, effect, target || ''];\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcase '-fail': {\r\n\t\t\tif (kwArgs.from === 'ability: Flower Veil') {\r\n\t\t\t\treturn {args: ['-block', kwArgs.of, 'ability: Flower Veil'], kwArgs: {of: args[1]}};\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcase '-start': {\r\n\t\t\tif (kwArgs.from === 'Protean' || kwArgs.from === 'Color Change') kwArgs.from = 'ability:' + kwArgs.from;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcase 'move': {\r\n\t\t\tif (kwArgs.from === 'Magic Bounce') kwArgs.from = 'ability:Magic Bounce';\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcase 'cant': {\r\n\t\t\tlet [, pokemon, effect, move] = args;\r\n\t\t\tif (['ability: Damp', 'ability: Dazzling', 'ability: Queenly Majesty', 'ability: Armor Tail'].includes(effect)) {\r\n\t\t\t\targs[0] = '-block';\r\n\t\t\t\treturn {args: ['-block', pokemon, effect, move, kwArgs.of], kwArgs: {}};\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcase '-heal': {\r\n\t\t\tconst id = BattleTextParser.effectId(kwArgs.from);\r\n\t\t\tif (['dryskin', 'eartheater', 'voltabsorb', 'waterabsorb'].includes(id)) kwArgs.of = '';\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcase '-nothing':\r\n\t\t\t// OLD: |-nothing\r\n\t\t\t// NEW: |-activate||move:Splash\r\n\t\t\treturn {args: ['-activate', '', 'move:Splash'], kwArgs};\r\n\t\t}\r\n\t\treturn {args, kwArgs};\r\n\t}\r\n\r\n\textractMessage(buf: string) {\r\n\t\tlet out = '';\r\n\t\tfor (const line of buf.split('\\n')) {\r\n\t\t\tconst {args, kwArgs} = BattleTextParser.parseBattleLine(line);\r\n\t\t\tout += this.parseArgs(args, kwArgs) || '';\r\n\t\t}\r\n\t\treturn out;\r\n\t}\r\n\r\n\tfixLowercase(input: string) {\r\n\t\tif (this.lowercaseRegExp === undefined) {\r\n\t\t\tconst prefixes = ['pokemon', 'opposingPokemon', 'team', 'opposingTeam', 'party', 'opposingParty'].map(templateId => {\r\n\t\t\t\tconst template = BattleText.default[templateId];\r\n\t\t\t\tif (template.charAt(0) === template.charAt(0).toUpperCase()) return '';\r\n\t\t\t\tconst bracketIndex = template.indexOf('[');\r\n\t\t\t\tif (bracketIndex >= 0) return template.slice(0, bracketIndex);\r\n\t\t\t\treturn template;\r\n\t\t\t}).filter(prefix => prefix);\r\n\t\t\tif (prefixes.length) {\r\n\t\t\t\tlet buf = `((?:^|\\n)(?:  |  \\\\\\(|\\\\\\[)?)(` +\r\n\t\t\t\t\tprefixes.map(BattleTextParser.escapeRegExp).join('|') +\r\n\t\t\t\t\t`)`;\r\n\t\t\t\tthis.lowercaseRegExp = new RegExp(buf, 'g');\r\n\t\t\t} else {\r\n\t\t\t\tthis.lowercaseRegExp = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.lowercaseRegExp) return input;\r\n\t\treturn input.replace(this.lowercaseRegExp, (match, p1, p2) => (\r\n\t\t\tp1 + p2.charAt(0).toUpperCase() + p2.slice(1)\r\n\t\t));\r\n\t}\r\n\r\n\tstatic escapeRegExp(input: string) {\r\n\t\treturn input.replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&');\r\n\t}\r\n\r\n\tpokemonName = (pokemon: string) => {\r\n\t\tif (!pokemon) return '';\r\n\t\tif (!pokemon.startsWith('p')) return `???pokemon:${pokemon}???`;\r\n\t\tif (pokemon.charAt(3) === ':') return pokemon.slice(4).trim();\r\n\t\telse if (pokemon.charAt(2) === ':') return pokemon.slice(3).trim();\r\n\t\treturn `???pokemon:${pokemon}???`;\r\n\t};\r\n\r\n\tpokemon(pokemon: string) {\r\n\t\tif (!pokemon) return '';\r\n\t\tlet side = pokemon.slice(0, 2);\r\n\t\tif (!['p1', 'p2', 'p3', 'p4'].includes(side)) return `???pokemon:${pokemon}???`;\r\n\t\tconst name = this.pokemonName(pokemon);\r\n\t\tconst isNear = side === this.perspective || side === BattleTextParser.allyID(side as SideID);\r\n\t\tconst template = BattleText.default[isNear ? 'pokemon' : 'opposingPokemon'];\r\n\t\treturn template.replace('[NICKNAME]', name);\r\n\t}\r\n\r\n\tpokemonFull(pokemon: string, details: string): [string, string] {\r\n\t\tconst nickname = this.pokemonName(pokemon);\r\n\r\n\t\tconst species = details.split(',')[0];\r\n\t\tif (nickname === species) return [pokemon.slice(0, 2), `**${species}**`];\r\n\t\treturn [pokemon.slice(0, 2), `${nickname} (**${species}**)`];\r\n\t}\r\n\r\n\ttrainer(side: string) {\r\n\t\tside = side.slice(0, 2);\r\n\t\tif (side === 'p1') return this.p1;\r\n\t\tif (side === 'p2') return this.p2;\r\n\t\tif (side === 'p3') return this.p3;\r\n\t\tif (side === 'p4') return this.p4;\r\n\t\treturn `???side:${side}???`;\r\n\t}\r\n\r\n\tstatic allyID(sideid: SideID): SideID | '' {\r\n\t\tif (sideid === 'p1') return 'p3';\r\n\t\tif (sideid === 'p2') return 'p4';\r\n\t\tif (sideid === 'p3') return 'p1';\r\n\t\tif (sideid === 'p4') return 'p2';\r\n\t\treturn '';\r\n\t}\r\n\r\n\tteam(side: string, isFar: boolean = false) {\r\n\t\tside = side.slice(0, 2);\r\n\t\tif (side === this.perspective || side === BattleTextParser.allyID(side as SideID)) {\r\n\t\t\treturn !isFar ? BattleText.default.team : BattleText.default.opposingTeam;\r\n\t\t}\r\n\t\treturn isFar ? BattleText.default.team : BattleText.default.opposingTeam;\r\n\t}\r\n\r\n\town(side: string) {\r\n\t\tside = side.slice(0, 2);\r\n\t\tif (side === this.perspective) {\r\n\t\t\treturn 'OWN';\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\r\n\tparty(side: string) {\r\n\t\tside = side.slice(0, 2);\r\n\t\tif (side === this.perspective || side === BattleTextParser.allyID(side as SideID)) {\r\n\t\t\treturn BattleText.default.party;\r\n\t\t}\r\n\t\treturn BattleText.default.opposingParty;\r\n\t}\r\n\r\n\tstatic effectId(effect?: string) {\r\n\t\tif (!effect) return '';\r\n\t\tif (effect.startsWith('item:') || effect.startsWith('move:')) {\r\n\t\t\teffect = effect.slice(5);\r\n\t\t} else if (effect.startsWith('ability:')) {\r\n\t\t\teffect = effect.slice(8);\r\n\t\t}\r\n\t\treturn toID(effect);\r\n\t}\r\n\r\n\teffect(effect?: string) {\r\n\t\tif (!effect) return '';\r\n\t\tif (effect.startsWith('item:') || effect.startsWith('move:')) {\r\n\t\t\teffect = effect.slice(5);\r\n\t\t} else if (effect.startsWith('ability:')) {\r\n\t\t\teffect = effect.slice(8);\r\n\t\t}\r\n\t\treturn effect.trim();\r\n\t}\r\n\r\n\ttemplate(type: string, ...namespaces: (string | undefined)[]) {\r\n\t\tfor (const namespace of namespaces) {\r\n\t\t\tif (!namespace) continue;\r\n\t\t\tif (namespace === 'OWN') {\r\n\t\t\t\treturn BattleText.default[type + 'Own'] + '\\n';\r\n\t\t\t}\r\n\t\t\tif (namespace === 'NODEFAULT') {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tlet id = BattleTextParser.effectId(namespace);\r\n\t\t\tif (BattleText[id] && type in BattleText[id]) {\r\n\t\t\t\tif (BattleText[id][type].charAt(1) === '.') type = BattleText[id][type].slice(2) as ID;\r\n\t\t\t\tif (BattleText[id][type].charAt(0) === '#') id = BattleText[id][type].slice(1) as ID;\r\n\t\t\t\tif (!BattleText[id][type]) return '';\r\n\t\t\t\treturn BattleText[id][type] + '\\n';\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!BattleText.default[type]) return '';\r\n\t\treturn BattleText.default[type] + '\\n';\r\n\t}\r\n\r\n\tmaybeAbility(effect: string | undefined, holder: string) {\r\n\t\tif (!effect) return '';\r\n\t\tif (!effect.startsWith('ability:')) return '';\r\n\t\treturn this.ability(effect.slice(8).trim(), holder);\r\n\t}\r\n\r\n\tability(name: string | undefined, holder: string) {\r\n\t\tif (!name) return '';\r\n\t\treturn BattleText.default.abilityActivation.replace('[POKEMON]', this.pokemon(holder)).replace('[ABILITY]', this.effect(name)) + '\\n';\r\n\t}\r\n\r\n\tstatic stat(stat: string) {\r\n\t\tconst entry = BattleText[stat || \"stats\"];\r\n\t\tif (!entry || !entry.statName) return `???stat:${stat}???`;\r\n\t\treturn entry.statName;\r\n\t}\r\n\r\n\tlineSection(args: Args, kwArgs: KWArgs) {\r\n\t\tconst cmd = args[0];\r\n\t\tswitch (cmd) {\r\n\t\tcase 'done' : case 'turn':\r\n\t\t\treturn 'break';\r\n\t\tcase 'move' : case 'cant': case 'switch': case 'drag': case 'upkeep': case 'start':\r\n\t\tcase '-mega': case '-candynamax': case '-terastallize':\r\n\t\t\treturn 'major';\r\n\t\tcase 'switchout': case 'faint':\r\n\t\t\treturn 'preMajor';\r\n\t\tcase '-zpower':\r\n\t\t\treturn 'postMajor';\r\n\t\tcase '-damage': {\r\n\t\t\tconst id = BattleTextParser.effectId(kwArgs.from);\r\n\t\t\tif (id === 'confusion') return 'major';\r\n\t\t\treturn 'postMajor';\r\n\t\t}\r\n\t\tcase '-curestatus': {\r\n\t\t\tconst id = BattleTextParser.effectId(kwArgs.from);\r\n\t\t\tif (id === 'naturalcure') return 'preMajor';\r\n\t\t\treturn 'postMajor';\r\n\t\t}\r\n\t\tcase '-start': {\r\n\t\t\tconst id = BattleTextParser.effectId(kwArgs.from);\r\n\t\t\tif (id === 'protean') return 'preMajor';\r\n\t\t\treturn 'postMajor';\r\n\t\t}\r\n\t\tcase '-activate': {\r\n\t\t\tconst id = BattleTextParser.effectId(args[2]);\r\n\t\t\tif (id === 'confusion' || id === 'attract') return 'preMajor';\r\n\t\t\treturn 'postMajor';\r\n\t\t}\r\n\t\t}\r\n\t\treturn (cmd.charAt(0) === '-' ? 'postMajor' : '');\r\n\t}\r\n\r\n\tsectionBreak(args: Args, kwArgs: KWArgs) {\r\n\t\tconst prevSection = this.curLineSection;\r\n\t\tconst curSection = this.lineSection(args, kwArgs);\r\n\t\tif (!curSection) return false;\r\n\t\tthis.curLineSection = curSection;\r\n\t\tswitch (curSection) {\r\n\t\tcase 'break':\r\n\t\t\tif (prevSection !== 'break') return true;\r\n\t\t\treturn false;\r\n\t\tcase 'preMajor':\r\n\t\tcase 'major':\r\n\t\t\tif (prevSection === 'postMajor' || prevSection === 'major') return true;\r\n\t\t\treturn false;\r\n\t\tcase 'postMajor':\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tparseArgs(args: Args, kwArgs: KWArgs, noSectionBreak?: boolean) {\r\n\t\tlet buf = !noSectionBreak && this.sectionBreak(args, kwArgs) ? '\\n' : '';\r\n\t\treturn buf + this.fixLowercase(this.parseArgsInner(args, kwArgs) || '');\r\n\t}\r\n\r\n\tparseArgsInner(args: Args, kwArgs: KWArgs) {\r\n\t\tlet cmd = args[0];\r\n\t\tswitch (cmd) {\r\n\t\tcase 'player': {\r\n\t\t\tconst [, side, name] = args;\r\n\t\t\tif (side === 'p1' && name) {\r\n\t\t\t\tthis.p1 = name;\r\n\t\t\t} else if (side === 'p2' && name) {\r\n\t\t\t\tthis.p2 = name;\r\n\t\t\t} else if (side === 'p3' && name) {\r\n\t\t\t\tthis.p3 = name;\r\n\t\t\t} else if (side === 'p4' && name) {\r\n\t\t\t\tthis.p4 = name;\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\tcase 'gen': {\r\n\t\t\tconst [, num] = args;\r\n\t\t\tthis.gen = parseInt(num, 10);\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\tcase 'turn': {\r\n\t\t\tconst [, num] = args;\r\n\t\t\tthis.turn = Number.parseInt(num, 10);\r\n\t\t\treturn this.template('turn').replace('[NUMBER]', num) + '\\n';\r\n\t\t}\r\n\r\n\t\tcase 'start': {\r\n\t\t\treturn this.template('startBattle').replace('[TRAINER]', this.p1).replace('[TRAINER]', this.p2);\r\n\t\t}\r\n\r\n\t\tcase 'win': case 'tie': {\r\n\t\t\tconst [, name] = args;\r\n\t\t\tif (cmd === 'tie' || !name) {\r\n\t\t\t\treturn this.template('tieBattle').replace('[TRAINER]', this.p1).replace('[TRAINER]', this.p2);\r\n\t\t\t}\r\n\t\t\treturn this.template('winBattle').replace('[TRAINER]', name);\r\n\t\t}\r\n\r\n\t\tcase 'switch': {\r\n\t\t\tconst [, pokemon, details] = args;\r\n\t\t\tconst [side, fullname] = this.pokemonFull(pokemon, details);\r\n\t\t\tconst template = this.template('switchIn', this.own(side));\r\n\t\t\treturn template.replace('[TRAINER]', this.trainer(side)).replace('[FULLNAME]', fullname);\r\n\t\t}\r\n\r\n\t\tcase 'drag': {\r\n\t\t\tconst [, pokemon, details] = args;\r\n\t\t\tconst [side, fullname] = this.pokemonFull(pokemon, details);\r\n\t\t\tconst template = this.template('drag');\r\n\t\t\treturn template.replace('[TRAINER]', this.trainer(side)).replace('[FULLNAME]', fullname);\r\n\t\t}\r\n\r\n\t\tcase 'detailschange': case '-transform': case '-formechange': {\r\n\t\t\tconst [, pokemon, arg2, arg3] = args;\r\n\t\t\tlet newSpecies = '';\r\n\t\t\tswitch (cmd) {\r\n\t\t\tcase 'detailschange': newSpecies = arg2.split(',')[0].trim(); break;\r\n\t\t\tcase '-transform': newSpecies = arg3; break;\r\n\t\t\tcase '-formechange': newSpecies = arg2; break;\r\n\t\t\t}\r\n\t\t\tlet newSpeciesId = toID(newSpecies);\r\n\t\t\tlet id = '';\r\n\t\t\tlet templateName = 'transform';\r\n\t\t\tif (cmd !== '-transform') {\r\n\t\t\t\tswitch (newSpeciesId) {\r\n\t\t\t\tcase 'greninjaash': id = 'battlebond'; break;\r\n\t\t\t\tcase 'mimikyubusted': id = 'disguise'; break;\r\n\t\t\t\tcase 'zygardecomplete': id = 'powerconstruct'; break;\r\n\t\t\t\tcase 'necrozmaultra': id = 'ultranecroziumz'; break;\r\n\t\t\t\tcase 'darmanitanzen': id = 'zenmode'; break;\r\n\t\t\t\tcase 'darmanitan': id = 'zenmode'; templateName = 'transformEnd'; break;\r\n\t\t\t\tcase 'darmanitangalarzen': id = 'zenmode'; break;\r\n\t\t\t\tcase 'darmanitangalar': id = 'zenmode'; templateName = 'transformEnd'; break;\r\n\t\t\t\tcase 'aegislashblade': id = 'stancechange'; break;\r\n\t\t\t\tcase 'aegislash': id = 'stancechange'; templateName = 'transformEnd'; break;\r\n\t\t\t\tcase 'wishiwashischool': id = 'schooling'; break;\r\n\t\t\t\tcase 'wishiwashi': id = 'schooling'; templateName = 'transformEnd'; break;\r\n\t\t\t\tcase 'miniormeteor': id = 'shieldsdown'; break;\r\n\t\t\t\tcase 'minior': id = 'shieldsdown'; templateName = 'transformEnd'; break;\r\n\t\t\t\tcase 'eiscuenoice': id = 'iceface'; break;\r\n\t\t\t\tcase 'eiscue': id = 'iceface'; templateName = 'transformEnd'; break;\r\n\t\t\t\t}\r\n\t\t\t} else if (newSpecies) {\r\n\t\t\t\tid = 'transform';\r\n\t\t\t}\r\n\t\t\tconst template = this.template(templateName, id, kwArgs.msg ? '' : 'NODEFAULT');\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[SPECIES]', newSpecies);\r\n\t\t}\r\n\r\n\t\tcase 'switchout': {\r\n\t\t\tconst [, pokemon] = args;\r\n\t\t\tconst side = pokemon.slice(0, 2);\r\n\t\t\tconst template = this.template('switchOut', kwArgs.from, this.own(side));\r\n\t\t\treturn template.replace('[TRAINER]', this.trainer(side)).replace('[NICKNAME]', this.pokemonName(pokemon)).replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase 'faint': {\r\n\t\t\tconst [, pokemon] = args;\r\n\t\t\tconst template = this.template('faint');\r\n\t\t\treturn template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase 'swap': {\r\n\t\t\tconst [, pokemon, target] = args;\r\n\t\t\tif (!target || !isNaN(Number(target))) {\r\n\t\t\t\tconst template = this.template('swapCenter');\r\n\t\t\t\treturn template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t\t}\r\n\t\t\tconst template = this.template('swap');\r\n\t\t\treturn template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[TARGET]', this.pokemon(target));\r\n\t\t}\r\n\r\n\t\tcase 'move': {\r\n\t\t\tconst [, pokemon, move] = args;\r\n\t\t\tlet line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tif (kwArgs.zeffect) {\r\n\t\t\t\tline1 = this.template('zEffect').replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t\t}\r\n\t\t\tconst template = this.template('move', kwArgs.from);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[MOVE]', move);\r\n\t\t}\r\n\r\n\t\tcase 'cant': {\r\n\t\t\tlet [, pokemon, effect, move] = args;\r\n\t\t\tconst template = this.template('cant', effect, 'NODEFAULT') ||\r\n\t\t\t\tthis.template(move ? 'cant' : 'cantNoMove');\r\n\t\t\tconst line1 = this.maybeAbility(effect, kwArgs.of || pokemon);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[MOVE]', move);\r\n\t\t}\r\n\r\n\t\tcase '-candynamax': {\r\n\t\t\tlet [, side] = args;\r\n\t\t\tconst own = this.own(side);\r\n\t\t\tlet template = '';\r\n\t\t\tif (this.turn === 1) {\r\n\t\t\t\tif (own) template = this.template('canDynamax', own);\r\n\t\t\t} else {\r\n\t\t\t\ttemplate = this.template('canDynamax', own);\r\n\t\t\t}\r\n\t\t\treturn template.replace('[TRAINER]', this.trainer(side));\r\n\t\t}\r\n\r\n\t\tcase 'message': {\r\n\t\t\tlet [, message] = args;\r\n\t\t\treturn '' + message + '\\n';\r\n\t\t}\r\n\r\n\t\tcase '-start': {\r\n\t\t\tlet [, pokemon, effect, arg3] = args;\r\n\t\t\tconst line1 = this.maybeAbility(effect, pokemon) || this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tlet id = BattleTextParser.effectId(effect);\r\n\t\t\tif (id === 'typechange') {\r\n\t\t\t\tconst template = this.template('typeChange', kwArgs.from);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[TYPE]', arg3).replace('[SOURCE]', this.pokemon(kwArgs.of));\r\n\t\t\t}\r\n\t\t\tif (id === 'typeadd') {\r\n\t\t\t\tconst template = this.template('typeAdd', kwArgs.from);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[TYPE]', arg3);\r\n\t\t\t}\r\n\t\t\tif (id.startsWith('stockpile')) {\r\n\t\t\t\tconst num = id.slice(9);\r\n\t\t\t\tconst template = this.template('start', 'stockpile');\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[NUMBER]', num);\r\n\t\t\t}\r\n\t\t\tif (id.startsWith('perish')) {\r\n\t\t\t\tconst num = id.slice(6);\r\n\t\t\t\tconst template = this.template('activate', 'perishsong');\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[NUMBER]', num);\r\n\t\t\t}\r\n\t\t\tif (id.startsWith('protosynthesis') || id.startsWith('quarkdrive')) {\r\n\t\t\t\tconst stat = id.slice(-3);\r\n\t\t\t\tconst template = this.template('start', id.slice(0, id.length - 3));\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[STAT]', BattleTextParser.stat(stat));\r\n\t\t\t}\r\n\t\t\tlet templateId = 'start';\r\n\t\t\tif (kwArgs.already) templateId = 'alreadyStarted';\r\n\t\t\tif (kwArgs.fatigue) templateId = 'startFromFatigue';\r\n\t\t\tif (kwArgs.zeffect) templateId = 'startFromZEffect';\r\n\t\t\tif (kwArgs.damage) templateId = 'activate';\r\n\t\t\tif (kwArgs.block) templateId = 'block';\r\n\t\t\tif (kwArgs.upkeep) templateId = 'upkeep';\r\n\t\t\tif (id === 'mist' && this.gen <= 2) templateId = 'startGen' + this.gen;\r\n\t\t\tif (id === 'reflect' || id === 'lightscreen') templateId = 'startGen1';\r\n\t\t\tif (templateId === 'start' && kwArgs.from?.startsWith('item:')) {\r\n\t\t\t\ttemplateId += 'FromItem';\r\n\t\t\t}\r\n\t\t\tconst template = this.template(templateId, kwArgs.from, effect);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[EFFECT]', this.effect(effect)).replace('[MOVE]', arg3).replace('[SOURCE]', this.pokemon(kwArgs.of)).replace('[ITEM]', this.effect(kwArgs.from));\r\n\t\t}\r\n\r\n\t\tcase '-end': {\r\n\t\t\tlet [, pokemon, effect] = args;\r\n\t\t\tconst line1 = this.maybeAbility(effect, pokemon) || this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tlet id = BattleTextParser.effectId(effect);\r\n\t\t\tif (id === 'doomdesire' || id === 'futuresight') {\r\n\t\t\t\tconst template = this.template('activate', effect);\r\n\t\t\t\treturn line1 + template.replace('[TARGET]', this.pokemon(pokemon));\r\n\t\t\t}\r\n\t\t\tlet templateId = 'end';\r\n\t\t\tlet template = '';\r\n\t\t\tif (kwArgs.from?.startsWith('item:')) {\r\n\t\t\t\ttemplate = this.template('endFromItem', effect);\r\n\t\t\t}\r\n\t\t\tif (!template) template = this.template(templateId, effect);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[EFFECT]', this.effect(effect)).replace('[SOURCE]', this.pokemon(kwArgs.of)).replace('[ITEM]', this.effect(kwArgs.from));\r\n\t\t}\r\n\r\n\t\tcase '-ability': {\r\n\t\t\tlet [, pokemon, ability, oldAbility, arg4] = args;\r\n\t\t\tlet line1 = '';\r\n\t\t\tif (oldAbility && (oldAbility.startsWith('p1') || oldAbility.startsWith('p2') || oldAbility === 'boost')) {\r\n\t\t\t\targ4 = oldAbility;\r\n\t\t\t\toldAbility = '';\r\n\t\t\t}\r\n\t\t\tif (oldAbility) line1 += this.ability(oldAbility, pokemon);\r\n\t\t\tline1 += this.ability(ability, pokemon);\r\n\t\t\tif (kwArgs.fail) {\r\n\t\t\t\tconst template = this.template('block', kwArgs.from);\r\n\t\t\t\treturn line1 + template;\r\n\t\t\t}\r\n\t\t\tif (kwArgs.from) {\r\n\t\t\t\tline1 = this.maybeAbility(kwArgs.from, pokemon) + line1;\r\n\t\t\t\tconst template = this.template('changeAbility', kwArgs.from);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[ABILITY]', this.effect(ability)).replace('[SOURCE]', this.pokemon(kwArgs.of));\r\n\t\t\t}\r\n\t\t\tconst id = BattleTextParser.effectId(ability);\r\n\t\t\tif (id === 'unnerve') {\r\n\t\t\t\tconst template = this.template('start', ability);\r\n\t\t\t\treturn line1 + template.replace('[TEAM]', this.team(pokemon.slice(0, 2), true));\r\n\t\t\t}\r\n\t\t\tlet templateId = 'start';\r\n\t\t\tif (id === 'anticipation' || id === 'sturdy') templateId = 'activate';\r\n\t\t\tconst template = this.template(templateId, ability, 'NODEFAULT');\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-endability': {\r\n\t\t\tlet [, pokemon, ability] = args;\r\n\t\t\tif (ability) return this.ability(ability, pokemon);\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tconst template = this.template('start', 'Gastro Acid');\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-item': {\r\n\t\t\tconst [, pokemon, item] = args;\r\n\t\t\tconst id = BattleTextParser.effectId(kwArgs.from);\r\n\t\t\tlet target = '';\r\n\t\t\tif (['magician', 'pickpocket'].includes(id)) {\r\n\t\t\t\t[target, kwArgs.of] = [kwArgs.of, ''];\r\n\t\t\t}\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tif (['thief', 'covet', 'bestow', 'magician', 'pickpocket'].includes(id)) {\r\n\t\t\t\tconst template = this.template('takeItem', kwArgs.from);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[ITEM]', this.effect(item)).replace('[SOURCE]', this.pokemon(target || kwArgs.of));\r\n\t\t\t}\r\n\t\t\tif (id === 'frisk') {\r\n\t\t\t\tconst hasTarget = kwArgs.of && pokemon && kwArgs.of !== pokemon;\r\n\t\t\t\tconst template = this.template(hasTarget ? 'activate' : 'activateNoTarget', \"Frisk\");\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(kwArgs.of)).replace('[ITEM]', this.effect(item)).replace('[TARGET]', this.pokemon(pokemon));\r\n\t\t\t}\r\n\t\t\tif (kwArgs.from) {\r\n\t\t\t\tconst template = this.template('addItem', kwArgs.from);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[ITEM]', this.effect(item));\r\n\t\t\t}\r\n\t\t\tconst template = this.template('start', item, 'NODEFAULT');\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-enditem': {\r\n\t\t\tlet [, pokemon, item] = args;\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tif (kwArgs.eat) {\r\n\t\t\t\tconst template = this.template('eatItem', kwArgs.from);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[ITEM]', this.effect(item));\r\n\t\t\t}\r\n\t\t\tconst id = BattleTextParser.effectId(kwArgs.from);\r\n\t\t\tif (id === 'gem') {\r\n\t\t\t\tconst template = this.template('useGem', item);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[ITEM]', this.effect(item)).replace('[MOVE]', kwArgs.move);\r\n\t\t\t}\r\n\t\t\tif (id === 'stealeat') {\r\n\t\t\t\tconst template = this.template('removeItem', \"Bug Bite\");\r\n\t\t\t\treturn line1 + template.replace('[SOURCE]', this.pokemon(kwArgs.of)).replace('[ITEM]', this.effect(item));\r\n\t\t\t}\r\n\t\t\tif (kwArgs.from) {\r\n\t\t\t\tconst template = this.template('removeItem', kwArgs.from);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[ITEM]', this.effect(item)).replace('[SOURCE]', this.pokemon(kwArgs.of));\r\n\t\t\t}\r\n\t\t\tif (kwArgs.weaken) {\r\n\t\t\t\tconst template = this.template('activateWeaken');\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[ITEM]', this.effect(item));\r\n\t\t\t}\r\n\t\t\tlet template = this.template('end', item, 'NODEFAULT');\r\n\t\t\tif (!template) template = this.template('activateItem').replace('[ITEM]', this.effect(item));\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[TARGET]', this.pokemon(kwArgs.of));\r\n\t\t}\r\n\r\n\t\tcase '-status': {\r\n\t\t\tconst [, pokemon, status] = args;\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tif (BattleTextParser.effectId(kwArgs.from) === 'rest') {\r\n\t\t\t\tconst template = this.template('startFromRest', status);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t\t}\r\n\t\t\tconst template = this.template('start', status);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-curestatus': {\r\n\t\t\tconst [, pokemon, status] = args;\r\n\t\t\tif (BattleTextParser.effectId(kwArgs.from) === 'naturalcure') {\r\n\t\t\t\tconst template = this.template('activate', kwArgs.from);\r\n\t\t\t\treturn template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t\t}\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tif (kwArgs.from?.startsWith('item:')) {\r\n\t\t\t\tconst template = this.template('endFromItem', status);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[ITEM]', this.effect(kwArgs.from));\r\n\t\t\t}\r\n\t\t\tif (kwArgs.thaw) {\r\n\t\t\t\tconst template = this.template('endFromMove', status);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[MOVE]', this.effect(kwArgs.from));\r\n\t\t\t}\r\n\t\t\tlet template = this.template('end', status, 'NODEFAULT');\r\n\t\t\tif (!template) template = this.template('end').replace('[EFFECT]', status);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-cureteam': {\r\n\t\t\treturn this.template('activate', kwArgs.from);\r\n\t\t}\r\n\r\n\t\tcase '-singleturn': case '-singlemove': {\r\n\t\t\tconst [, pokemon, effect] = args;\r\n\t\t\tconst line1 = this.maybeAbility(effect, kwArgs.of || pokemon) ||\r\n\t\t\t\tthis.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tlet id = BattleTextParser.effectId(effect);\r\n\t\t\tif (id === 'instruct') {\r\n\t\t\t\tconst template = this.template('activate', effect);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(kwArgs.of)).replace('[TARGET]', this.pokemon(pokemon));\r\n\t\t\t}\r\n\t\t\tlet template = this.template('start', effect, 'NODEFAULT');\r\n\t\t\tif (!template) template = this.template('start').replace('[EFFECT]', this.effect(effect));\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[SOURCE]', this.pokemon(kwArgs.of)).replace('[TEAM]', this.team(pokemon.slice(0, 2)));\r\n\t\t}\r\n\r\n\t\tcase '-sidestart': {\r\n\t\t\tlet [, side, effect] = args;\r\n\t\t\tlet template = this.template('start', effect, 'NODEFAULT');\r\n\t\t\tif (!template) template = this.template('startTeamEffect').replace('[EFFECT]', this.effect(effect));\r\n\t\t\treturn template.replace('[TEAM]', this.team(side)).replace('[PARTY]', this.party(side));\r\n\t\t}\r\n\r\n\t\tcase '-sideend': {\r\n\t\t\tlet [, side, effect] = args;\r\n\t\t\tlet template = this.template('end', effect, 'NODEFAULT');\r\n\t\t\tif (!template) template = this.template('endTeamEffect').replace('[EFFECT]', this.effect(effect));\r\n\t\t\treturn template.replace('[TEAM]', this.team(side)).replace('[PARTY]', this.party(side));\r\n\t\t}\r\n\r\n\t\tcase '-weather': {\r\n\t\t\tconst [, weather] = args;\r\n\t\t\tif (!weather || weather === 'none') {\r\n\t\t\t\tconst template = this.template('end', kwArgs.from, 'NODEFAULT');\r\n\t\t\t\tif (!template) return this.template('endFieldEffect').replace('[EFFECT]', this.effect(weather));\r\n\t\t\t\treturn template;\r\n\t\t\t}\r\n\t\t\tif (kwArgs.upkeep) {\r\n\t\t\t\treturn this.template('upkeep', weather, 'NODEFAULT');\r\n\t\t\t}\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of);\r\n\t\t\tlet template = this.template('start', weather, 'NODEFAULT');\r\n\t\t\tif (!template) template = this.template('startFieldEffect').replace('[EFFECT]', this.effect(weather));\r\n\t\t\treturn line1 + template;\r\n\t\t}\r\n\r\n\t\tcase '-fieldstart': case '-fieldactivate': {\r\n\t\t\tconst [, effect] = args;\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of);\r\n\t\t\tif (BattleTextParser.effectId(kwArgs.from) === 'hadronengine') {\r\n\t\t\t\treturn line1 + this.template('start', 'hadronengine').replace('[POKEMON]', this.pokemon(kwArgs.of));\r\n\t\t\t}\r\n\t\t\tlet templateId = cmd.slice(6);\r\n\t\t\tif (BattleTextParser.effectId(effect) === 'perishsong') templateId = 'start';\r\n\t\t\tlet template = this.template(templateId, effect, 'NODEFAULT');\r\n\t\t\tif (!template) template = this.template('startFieldEffect').replace('[EFFECT]', this.effect(effect));\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(kwArgs.of));\r\n\t\t}\r\n\r\n\t\tcase '-fieldend': {\r\n\t\t\tlet [, effect] = args;\r\n\t\t\tlet template = this.template('end', effect, 'NODEFAULT');\r\n\t\t\tif (!template) template = this.template('endFieldEffect').replace('[EFFECT]', this.effect(effect));\r\n\t\t\treturn template;\r\n\t\t}\r\n\r\n\t\tcase '-sethp': {\r\n\t\t\tlet effect = kwArgs.from;\r\n\t\t\treturn this.template('activate', effect);\r\n\t\t}\r\n\r\n\t\tcase '-message': {\r\n\t\t\tlet [, message] = args;\r\n\t\t\treturn '  ' + message + '\\n';\r\n\t\t}\r\n\r\n\t\tcase '-hint': {\r\n\t\t\tlet [, message] = args;\r\n\t\t\treturn '  (' + message + ')\\n';\r\n\t\t}\r\n\r\n\t\tcase '-activate': {\r\n\t\t\tlet [, pokemon, effect, target] = args;\r\n\t\t\tlet id = BattleTextParser.effectId(effect);\r\n\t\t\tif (id === 'celebrate') {\r\n\t\t\t\treturn this.template('activate', 'celebrate').replace('[TRAINER]', this.trainer(pokemon.slice(0, 2)));\r\n\t\t\t}\r\n\t\t\tif (!target &&\r\n\t\t\t\t['hyperdrill', 'hyperspacefury', 'hyperspacehole', 'phantomforce', 'shadowforce', 'feint'].includes(id)) {\r\n\t\t\t\t[pokemon, target] = [kwArgs.of, pokemon];\r\n\t\t\t\tif (!pokemon) pokemon = target;\r\n\t\t\t}\r\n\t\t\tif (!target) target = kwArgs.of || pokemon;\r\n\r\n\t\t\tlet line1 = this.maybeAbility(effect, pokemon);\r\n\r\n\t\t\tif (id === 'lockon' || id === 'mindreader') {\r\n\t\t\t\tconst template = this.template('start', effect);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(kwArgs.of)).replace('[SOURCE]', this.pokemon(pokemon));\r\n\t\t\t}\r\n\r\n\t\t\tif ((id === 'mummy' || id === 'lingeringaroma') && kwArgs.ability) {\r\n\t\t\t\tline1 += this.ability(kwArgs.ability, target);\r\n\t\t\t\tline1 += this.ability(id === 'mummy' ? 'Mummy' : 'Lingering Aroma', target);\r\n\t\t\t\tconst template = this.template('changeAbility', id);\r\n\t\t\t\treturn line1 + template.replace('[TARGET]', this.pokemon(target));\r\n\t\t\t}\r\n\r\n\t\t\tif (id === 'commander') {\r\n\t\t\t\t// Commander didn't have a message prior to v1.2.0 of SV\r\n\t\t\t\t// so this is for backwards compatibility\r\n\t\t\t\tif (target === pokemon) return line1;\r\n\t\t\t\tconst template = this.template('activate', id);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace(/\\[TARGET\\]/g, this.pokemon(target));\r\n\t\t\t}\r\n\r\n\t\t\tlet templateId = 'activate';\r\n\t\t\tif (id === 'forewarn' && pokemon === target) {\r\n\t\t\t\ttemplateId = 'activateNoTarget';\r\n\t\t\t}\r\n\t\t\tif ((id === 'protosynthesis' || id === 'quarkdrive') && kwArgs.fromitem) {\r\n\t\t\t\ttemplateId = 'activateFromItem';\r\n\t\t\t}\r\n\t\t\tif (id === 'orichalcumpulse' && kwArgs.source) {\r\n\t\t\t\ttemplateId = 'start';\r\n\t\t\t}\r\n\t\t\tlet template = this.template(templateId, effect, 'NODEFAULT');\r\n\t\t\tif (!template) {\r\n\t\t\t\tif (line1) return line1; // Abilities don't have a default template\r\n\t\t\t\ttemplate = this.template('activate');\r\n\t\t\t\treturn line1 + template.replace('[EFFECT]', this.effect(effect));\r\n\t\t\t}\r\n\r\n\t\t\tif (id === 'brickbreak') {\r\n\t\t\t\ttemplate = template.replace('[TEAM]', this.team(target.slice(0, 2)));\r\n\t\t\t}\r\n\t\t\tif (kwArgs.ability) {\r\n\t\t\t\tline1 += this.ability(kwArgs.ability, pokemon);\r\n\t\t\t}\r\n\t\t\tif (kwArgs.ability2) {\r\n\t\t\t\tline1 += this.ability(kwArgs.ability2, target);\r\n\t\t\t}\r\n\t\t\tif (kwArgs.move || kwArgs.number || kwArgs.item || kwArgs.name) {\r\n\t\t\t\ttemplate = template.replace('[MOVE]', kwArgs.move).replace('[NUMBER]', kwArgs.number).replace('[ITEM]', kwArgs.item).replace('[NAME]', kwArgs.name);\r\n\t\t\t}\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[TARGET]', this.pokemon(target)).replace('[SOURCE]', this.pokemon(kwArgs.of));\r\n\t\t}\r\n\r\n\t\tcase '-prepare': {\r\n\t\t\tconst [, pokemon, effect, target] = args;\r\n\t\t\tconst template = this.template('prepare', effect);\r\n\t\t\treturn template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[TARGET]', this.pokemon(target));\r\n\t\t}\r\n\r\n\t\tcase '-damage': {\r\n\t\t\tlet [, pokemon, , percentage] = args;\r\n\t\t\tlet template = this.template('damage', kwArgs.from, 'NODEFAULT');\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tconst id = BattleTextParser.effectId(kwArgs.from);\r\n\t\t\tif (template) {\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t\t}\r\n\r\n\t\t\tif (!kwArgs.from) {\r\n\t\t\t\ttemplate = this.template(percentage ? 'damagePercentage' : 'damage');\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[PERCENTAGE]', percentage);\r\n\t\t\t}\r\n\t\t\tif (kwArgs.from.startsWith('item:')) {\r\n\t\t\t\ttemplate = this.template(kwArgs.of ? 'damageFromPokemon' : 'damageFromItem');\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[ITEM]', this.effect(kwArgs.from)).replace('[SOURCE]', this.pokemon(kwArgs.of));\r\n\t\t\t}\r\n\t\t\tif (kwArgs.partiallytrapped || id === 'bind' || id === 'wrap') {\r\n\t\t\t\ttemplate = this.template('damageFromPartialTrapping');\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[MOVE]', this.effect(kwArgs.from));\r\n\t\t\t}\r\n\r\n\t\t\ttemplate = this.template('damage');\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-heal': {\r\n\t\t\tlet [, pokemon] = args;\r\n\t\t\tlet template = this.template('heal', kwArgs.from, 'NODEFAULT');\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tif (template) {\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[SOURCE]', this.pokemon(kwArgs.of)).replace('[NICKNAME]', kwArgs.wisher);\r\n\t\t\t}\r\n\r\n\t\t\tif (kwArgs.from && !kwArgs.from.startsWith('ability:')) {\r\n\t\t\t\ttemplate = this.template('healFromEffect');\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[EFFECT]', this.effect(kwArgs.from));\r\n\t\t\t}\r\n\r\n\t\t\ttemplate = this.template('heal');\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-boost': case '-unboost': {\r\n\t\t\tlet [, pokemon, stat, num] = args;\r\n\t\t\tif (stat === 'spa' && this.gen === 1) stat = 'spc';\r\n\t\t\tconst amount = parseInt(num, 10);\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tlet templateId = cmd.slice(1);\r\n\t\t\tif (amount >= 3) templateId += '3';\r\n\t\t\telse if (amount >= 2) templateId += '2';\r\n\t\t\telse if (amount === 0) templateId += '0';\r\n\t\t\tif (amount && kwArgs.zeffect) {\r\n\t\t\t\ttemplateId += (kwArgs.multiple ? 'MultipleFromZEffect' : 'FromZEffect');\r\n\t\t\t} else if (amount && kwArgs.from?.startsWith('item:')) {\r\n\t\t\t\tconst template = this.template(templateId + 'FromItem', kwArgs.from);\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[STAT]', BattleTextParser.stat(stat)).replace('[ITEM]', this.effect(kwArgs.from));\r\n\t\t\t}\r\n\t\t\tconst template = this.template(templateId, kwArgs.from);\r\n\t\t\treturn line1 + template.replace(/\\[POKEMON\\]/g, this.pokemon(pokemon)).replace('[STAT]', BattleTextParser.stat(stat));\r\n\t\t}\r\n\r\n\t\tcase '-setboost': {\r\n\t\t\tconst [, pokemon] = args;\r\n\t\t\tconst effect = kwArgs.from;\r\n\t\t\tconst line1 = this.maybeAbility(effect, kwArgs.of || pokemon);\r\n\t\t\tconst template = this.template('boost', effect);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-swapboost': {\r\n\t\t\tconst [, pokemon, target] = args;\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tconst id = BattleTextParser.effectId(kwArgs.from);\r\n\t\t\tlet templateId = 'swapBoost';\r\n\t\t\tif (id === 'guardswap') templateId = 'swapDefensiveBoost';\r\n\t\t\tif (id === 'powerswap') templateId = 'swapOffensiveBoost';\r\n\t\t\tconst template = this.template(templateId, kwArgs.from);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[TARGET]', this.pokemon(target));\r\n\t\t}\r\n\r\n\t\tcase '-copyboost': {\r\n\t\t\tconst [, pokemon, target] = args;\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tconst template = this.template('copyBoost', kwArgs.from);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[TARGET]', this.pokemon(target));\r\n\t\t}\r\n\r\n\t\tcase '-clearboost': case '-clearpositiveboost': case '-clearnegativeboost': {\r\n\t\t\tconst [, pokemon, source] = args;\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tlet templateId = 'clearBoost';\r\n\t\t\tif (kwArgs.zeffect) templateId = 'clearBoostFromZEffect';\r\n\t\t\tconst template = this.template(templateId, kwArgs.from);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[SOURCE]', this.pokemon(source));\r\n\t\t}\r\n\r\n\t\tcase '-invertboost': {\r\n\t\t\tconst [, pokemon] = args;\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tconst template = this.template('invertBoost', kwArgs.from);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-clearallboost': {\r\n\t\t\treturn this.template('clearAllBoost', kwArgs.from);\r\n\t\t}\r\n\r\n\t\tcase '-crit': case '-supereffective': case '-resisted': {\r\n\t\t\tconst [, pokemon] = args;\r\n\t\t\tlet templateId = cmd.slice(1);\r\n\t\t\tif (templateId === 'supereffective') templateId = 'superEffective';\r\n\t\t\tif (kwArgs.spread) templateId += 'Spread';\r\n\t\t\tconst template = this.template(templateId);\r\n\t\t\treturn template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-block': {\r\n\t\t\tlet [, pokemon, effect, move, attacker] = args;\r\n\t\t\tconst line1 = this.maybeAbility(effect, kwArgs.of || pokemon);\r\n\t\t\tlet id = BattleTextParser.effectId(effect);\r\n\t\t\tlet templateId = 'block';\r\n\t\t\tif (id === 'mist' && this.gen <= 2) templateId = 'blockGen' + this.gen;\r\n\t\t\tconst template = this.template(templateId, effect);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[SOURCE]', this.pokemon(attacker || kwArgs.of)).replace('[MOVE]', move);\r\n\t\t}\r\n\r\n\t\tcase '-fail': {\r\n\t\t\tlet [, pokemon, effect, stat] = args;\r\n\t\t\tlet id = BattleTextParser.effectId(effect);\r\n\t\t\tlet blocker = BattleTextParser.effectId(kwArgs.from);\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tlet templateId = 'block';\r\n\t\t\tif (['desolateland', 'primordialsea'].includes(blocker) &&\r\n\t\t\t\t!['sunnyday', 'raindance', 'sandstorm', 'hail', 'snowscape', 'chillyreception'].includes(id)) {\r\n\t\t\t\ttemplateId = 'blockMove';\r\n\t\t\t} else if (blocker === 'uproar' && kwArgs.msg) {\r\n\t\t\t\ttemplateId = 'blockSelf';\r\n\t\t\t}\r\n\t\t\tlet template = this.template(templateId, kwArgs.from);\r\n\t\t\tif (template) {\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t\t}\r\n\r\n\t\t\tif (id === 'unboost') {\r\n\t\t\t\ttemplate = this.template(stat ? 'failSingular' : 'fail', 'unboost');\r\n\t\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[STAT]', stat);\r\n\t\t\t}\r\n\r\n\t\t\ttemplateId = 'fail';\r\n\t\t\tif (['brn', 'frz', 'par', 'psn', 'slp', 'substitute', 'shedtail'].includes(id)) {\r\n\t\t\t\ttemplateId = 'alreadyStarted';\r\n\t\t\t}\r\n\t\t\tif (kwArgs.heavy) templateId = 'failTooHeavy';\r\n\t\t\tif (kwArgs.weak) templateId = 'fail';\r\n\t\t\tif (kwArgs.forme) templateId = 'failWrongForme';\r\n\t\t\ttemplate = this.template(templateId, id);\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-immune': {\r\n\t\t\tconst [, pokemon] = args;\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tlet template = this.template('block', kwArgs.from);\r\n\t\t\tif (!template) {\r\n\t\t\t\tconst templateId = kwArgs.ohko ? 'immuneOHKO' : 'immune';\r\n\t\t\t\ttemplate = this.template(pokemon ? templateId : 'immuneNoPokemon', kwArgs.from);\r\n\t\t\t}\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-miss': {\r\n\t\t\tconst [, source, pokemon] = args;\r\n\t\t\tconst line1 = this.maybeAbility(kwArgs.from, kwArgs.of || pokemon);\r\n\t\t\tif (!pokemon) {\r\n\t\t\t\tconst template = this.template('missNoPokemon');\r\n\t\t\t\treturn line1 + template.replace('[SOURCE]', this.pokemon(source));\r\n\t\t\t}\r\n\t\t\tconst template = this.template('miss');\r\n\t\t\treturn line1 + template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-center': case '-ohko': case '-combine': {\r\n\t\t\treturn this.template(cmd.slice(1));\r\n\t\t}\r\n\r\n\t\tcase '-notarget': {\r\n\t\t\treturn this.template('noTarget');\r\n\t\t}\r\n\r\n\t\tcase '-mega': case '-primal': {\r\n\t\t\tconst [, pokemon, species, item] = args;\r\n\t\t\tlet id = '';\r\n\t\t\tlet templateId = cmd.slice(1);\r\n\t\t\tif (species === 'Rayquaza') {\r\n\t\t\t\tid = 'dragonascent';\r\n\t\t\t\ttemplateId = 'megaNoItem';\r\n\t\t\t}\r\n\t\t\tif (!id && cmd === '-mega' && this.gen < 7) templateId = 'megaGen6';\r\n\t\t\tif (!item && cmd === '-mega') templateId = 'megaNoItem';\r\n\t\t\tlet template = this.template(templateId, id);\r\n\t\t\tconst side = pokemon.slice(0, 2);\r\n\t\t\tconst pokemonName = this.pokemon(pokemon);\r\n\t\t\tif (cmd === '-mega') {\r\n\t\t\t\tconst template2 = this.template('transformMega');\r\n\t\t\t\ttemplate += template2.replace('[POKEMON]', pokemonName).replace('[SPECIES]', species);\r\n\t\t\t}\r\n\t\t\treturn template.replace('[POKEMON]', pokemonName).replace('[ITEM]', item).replace('[TRAINER]', this.trainer(side));\r\n\t\t}\r\n\r\n\t\tcase '-terastallize': {\r\n\t\t\tconst [, pokemon, type] = args;\r\n\t\t\tlet id = '';\r\n\t\t\tlet templateId = cmd.slice(1);\r\n\t\t\tlet template = this.template(templateId, id);\r\n\t\t\tconst pokemonName = this.pokemon(pokemon);\r\n\t\t\treturn template.replace('[POKEMON]', pokemonName).replace('[TYPE]', type);\r\n\t\t}\r\n\r\n\t\tcase '-zpower': {\r\n\t\t\tconst [, pokemon] = args;\r\n\t\t\tconst template = this.template('zPower');\r\n\t\t\treturn template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-burst': {\r\n\t\t\tconst [, pokemon] = args;\r\n\t\t\tconst template = this.template('activate', \"Ultranecrozium Z\");\r\n\t\t\treturn template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-zbroken': {\r\n\t\t\tconst [, pokemon] = args;\r\n\t\t\tconst template = this.template('zBroken');\r\n\t\t\treturn template.replace('[POKEMON]', this.pokemon(pokemon));\r\n\t\t}\r\n\r\n\t\tcase '-hitcount': {\r\n\t\t\tconst [, , num] = args;\r\n\t\t\tif (num === '1') {\r\n\t\t\t\treturn this.template('hitCountSingular');\r\n\t\t\t}\r\n\t\t\treturn this.template('hitCount').replace('[NUMBER]', num);\r\n\t\t}\r\n\r\n\t\tcase '-waiting': {\r\n\t\t\tconst [, pokemon, target] = args;\r\n\t\t\tconst template = this.template('activate', \"Water Pledge\");\r\n\t\t\treturn template.replace('[POKEMON]', this.pokemon(pokemon)).replace('[TARGET]', this.pokemon(target));\r\n\t\t}\r\n\r\n\t\tcase '-anim': {\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\tdefault: {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nif (typeof require === 'function') {\r\n\t// in Node\r\n\t(global as any).BattleTextParser = BattleTextParser;\r\n}\r\n"]}